webpackJsonp([5,6],Array(360).concat([function(e,t,n){(function(t){function i(e){var t=e?"on":"off";$[t]("play",o,this)[t]("pause",a,this)[t]("finish",r,this)}function s(){var e=$.getCurrentSound(),t=e&&e.isPlaying();y.call(this,!t),this.toggleState("playing",t)}function o(){s.call(this),u.call(this)}function a(){v.call(this,!1)}function r(){v.call(this,!1)}function l(){this.isBlocked()||u.call(this)}function u(){var e=$.getCurrentSound();e&&(this.isSound||e.audio)&&c.call(this,e)}function c(e){this._isInsertingWaveform||(this._isInsertingWaveform=!0,k.call(this).done(function(t){var n=this.subviews.waveform;if(n&&n.model===e&&(t===this.waveformStyle||!this.isPlaylist))return void(this._isInsertingWaveform=!1);this.waveformStyle=t;var i=h.call(this,e,t),s=!1;i.$el.addClass("hidden g-all-transitions-200"),this.$$("waveform").append(i.render().el),T.fadeOut(n?n.$el:this.$$("total")).progress(function(e){!s&&e>=.4&&(s=!0,i.$el.removeClass("hidden"))}).done(function(){d.call(this,i),this._isInsertingWaveform=!1}.bind(this))}.bind(this)))}function d(e){var t=this.subviews.waveform;t&&(this.removeSubview(t),t._dispose()),this.addSubview(e,"waveform")}function h(e,t){var n=this.isSound?O:C;return new n({resource_id:e.resource_id,resource_type:e.resource_type,waveformStyle:t,darkText:"inverted"!==t,show_comments:A.get("widgetParams").show_comments})}function p(e){if(!this.isBlocked()&&!t(e.target).closest(".artworkWaveform, .waveform").length){var n=$.getCurrentSound();n&&$.toggle(n,{userAction:!0,view:"visual-audible"}),g.call(this,!0)}}function f(){v.call(this,!0),g.call(this,!0)}function m(){v.call(this,!1),g.call(this,!1)}function g(e){var t=_.call(this);this.toggleState("highlight",e),t&&t.toggleState("hover",e)}function v(e){var t=$.getCurrentSound(),n=t&&t.isPlaying(),i=this.getState("background"),s=this.model.hasVisuals&&this.model.hasVisuals();n&&!i&&s?this.toggleState("minimal",!e):this.toggleState("minimal",!1)}function _(){var e=this.subviews.waveform;return e&&e instanceof C&&(e=e.subviews.waveform),e}function b(){var e=t.Deferred();return this.whenReady().pipe(function(e){return e.subviews.header.whenReady()}).pipe(function(e){return e.subviews.logo.whenReady()}).pipe(e.resolve),e}function x(e,n){var i=t.Deferred(),s=this.$$("artwork")[0],o=new E({width:s.offsetWidth,height:s.offsetHeight}),a=D.urlFrom(this.model.attributes,500);return D.isDefaultImage(a)?i.resolve(I("#000").rgb(),e):(w(o,a).done(function(){if(!this.disposed){var t,a,r,l=e instanceof N?e.el:e[0],u=l.getBoundingClientRect(),c=s.getBoundingClientRect();t=o.getImageData({x:Math.round(u.left-c.left),y:u.top},{x:Math.round(u.right-c.left),y:u.bottom}),a=D.getMainColor(t,n),r="rgb("+a.join(",")+")",i.resolve(r,e)}}.bind(this)),i)}function w(e,n){function i(t){var n=Math.max(e.width,e.height)/t.width,i=0,s=0,o=t.width,a=t.height,r=o*n,l=a*n,u=(e.width-r)/2,c=(e.height-l)/2;e.drawImage(t,i,s,o,a,u,c,r,l)}var s=t.Deferred();return R.corsImg?(D.load(n,!0).pipe(i).pipe(s.resolve),s):s.reject()}function y(e){this.$$("artwork").toggleClass("sc-pointer",e)}function k(){var e,n=t.Deferred();return this.model.hasVisuals&&this.model.hasVisuals()&&(e="default"),e?n.resolve(e):this.whenReady().done(function(){x.call(this,this.$$("waveform")).done(function(t){var i="rgb("+z.getColor("backgroundGradient","default")[0][1]+")",s=I(t).diff(i).brightness,o=s>U;e=o?"default":"inverted",n.resolve(e)}.bind(this))}.bind(this)),n}var S=n(217),T=n(361),C=n(362),P=n(310),E=n(444),I=n(257),A=n(219),D=n(381),M=n(445),L=n(397),$=n(234),R=n(233),N=n(281),O=n(403),z=n(429),U=190;e.exports=N.extend(L,M,{className:"visualAudible",css:n(446),template:n(447),states:{background:"background",minimal:"minimal",onlyArtwork:"onlyArtwork"},_isInsertingWaveform:null,events:{mouseenter:f,mouseleave:m,"click .visualAudible__artwork, .visualAudible__footer":p},requiredAttributes:{sound:["visuals","policy"]},setup:function(e){var t=this.requiredAttributes[e.resource_type]=this.requiredAttributes[e.resource_type]||[];t.push(this.model.imageAttribute),i.call(this,!0),this.toggleState("mobile",P.isMobile)},dispose:function(){i.call(this,!1)},renderDecorate:function(){var e=this.isBlocked();if(this.toggleState("blocked",e),!e){var t=this.model.hasVisuals&&this.model.hasVisuals();u.call(this),s.call(this),t||this.correctLogoColor()}},onCurrentSoundChange:l,correctColors:function(){this.correctLogoColor(),u.call(this)},correctLogoColor:function(){b.call(this).pipe(x.bind(this)).pipe(function(e,t){var n=I(e).diff(t.getColor()).brightness>U;n||t.toggleAltColor()})},toggleBackgroundState:function(e){this.toggleState("background",e),this.subviews.visuals&&this.subviews.visuals.toggleState("background",e)},getTemplateData:function(e){return S.extend(e,{is_sound:this.isSound,is_blocked:this.isBlocked(),has_visuals:this.model.hasVisuals&&this.model.hasVisuals()})}})}).call(t,n(1))},function(e,t,n){(function(t){function n(e,n){var s=t.Deferred();return e.removeClass("g-opacity-transition").css({opacity:n?0:1}).addClass("g-opacity-transition").css({opacity:n?1:0}),i(d).progress(s.notify).done(function(){e.removeClass("g-opacity-transition"),s.resolve()}),s}function i(e){var n,i,s,o=t.Deferred(),a=Date.now();return s=setInterval(function(){i=Date.now()-a,n=Math.min(1,i/e),o.notify(n),1===n&&(o.resolve(),clearInterval(s))},16),o.fail(function(){clearInterval(s)}),o}function s(e,t,n,i){return n*e/i+t}function o(e,t,n,i){return n*(e/=i)*e+t}function a(e,t,n,i){return-n*(e/=i)*(e-2)+t}function r(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}function l(e,t,n,i){return n*(e/=i)*e*e+t}function u(e,t,n,i){return n*((e=e/i-1)*e*e+1)+t}var c={linear:s,"ease-in":o,"ease-out":a,"ease-in-out":r,"ease-in-cubic":l,"ease-out-cubic":u},d=200;e.exports={fadeOut:function(e,t){return n(e,!1,t)},fadeIn:function(e,t){return n(e,!0,t)},animateValue:function(e,n,s,o){var a=t.Deferred(),r=s-n,l=i(e),u=c[o]||c.linear;return r?(l.progress(function(t){var i=e*t,s=u(i,n,r,e);a.notify(s)}).done(a.resolve),a.fail(l.reject),a):a.resolve()}}}).call(t,n(1))},function(e,t,n){function i(e){this.options.show_artwork=!e,this.toggleState("noArtwork",e),this.rerender()}var s=n(337),o=n(363),a=n(281);e.exports=a.extend(o,{css:n(364),template:n(365),className:"artworkWaveform g-box-full",ModelClass:s,defaults:{show_artwork:!0,waveformStyle:"inverted",show_comments:!0},states:{"state-small":i}})},function(e,t,n){(function(t){function i(e){var t=e?"on":"off";g[t]("change",a,this),p[t]("layout:change",s,this)}function s(){o(),a.call(this)}function o(){g.set({width:b.width(),height:b.height()})}function a(){r.call(this),this.onWindowSizeChange(l(),{width:this.getWindowWidth(),height:this.getWindowHeight()})}function r(){var e,t=l();Object.keys(d).forEach(function(n){e=d[n],e!==d.DEFAULT&&this.toggleState("state-"+e,e===t)},this)}function l(){if(!u())return d.DEFAULT;var e,t=g.get("width");return e=t<=v?d.SMALL:t<_?d.MEDIUM:d.DEFAULT}function u(){return!!h.get("router").layoutName}var c=n(217),d=n(321),h=n(219),p=n(229),f=n(225),m=n(221),g=new m.Model,v=250,_=400,b=t(window);e.exports=new f({before:{setup:function(){i.call(this,!0)},renderDecorate:function(){this.whenInserted().done(s.bind(this))},dispose:function(){i.call(this,!1)}},defaults:{onWindowSizeChange:function(){},getWindowHeight:function(){return g.has("height")?g.get("height"):b.height()},getWindowWidth:function(){return g.has("width")?g.get("width"):b.width()},getWindowSize:l}});b.on("resize",c.debounce(o,50))}).call(t,n(1))},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".artworkWaveform{position:relative}.artworkWaveform__artwork{position:absolute;top:-3px;left:0;width:80px;height:80px}.artworkWaveform__waveform{position:absolute;top:0;left:90px;right:0;bottom:0;height:100%}.artworkWaveform.noArtwork .artworkWaveform__waveform{left:0}@media (max-height:350px){.artworkWaveform__waveform{left:60px}.artworkWaveform .artworkWaveform__artwork{width:50px;height:50px}}",""])},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,i,s,o){return'  <div class="artworkWaveform__artwork">\n    '+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},n(367),{name:"$view",hash:{size:80,resource_type:null!=t?t._resource_type:t,resource_id:null!=t?t._resource_id:t},data:o}))+"\n  </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,s,o){var a,r=null!=t?t:e.nullContext||{};return(null!=(a=i["if"].call(r,null!=(a=null!=t?t._options:t)?a.show_artwork:a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?a:"")+'<div class="artworkWaveform__waveform">\n  '+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(r,n(403),{name:"$view",hash:{key:"waveform",waveformStyle:null!=(a=null!=t?t._options:t)?a.waveformStyle:a,show_comments:null!=(a=null!=t?t._options:t)?a.show_comments:a,resource_type:null!=t?t._resource_type:t,resource_id:null!=t?t._resource_id:t},data:o}))+"\n</div>\n"},useData:!0})},function(e,t,n){var i=n(285),s=n(284);e.exports=function(){return new i.SafeString(s.handlebarHelper.apply(this,arguments))}},function(e,t,n){function i(e){return["top","right","bottom","left"].map(function(t){return t+":"+e+"px;"}).join("")}function s(){var e=this.model;r.trigger(l.UI.ARTWORK_CLICKED,e),r.trigger("sound:deeplink",this.$$("link")[0],e)}var o=n(217),a=n(368),r=n(229),l=n(248),u=n(281);e.exports=u.extend({template:n(371),css:n(402),ModelClass:a,className:"artwork",events:{"click .artwork__link":s},defaults:{show_follow_button:!1,size:200,is_link:!0,offset:9},getTemplateData:function(e){return o.extend(e,{isLink:this.options.is_link&&!this.model.isPrivate(),wrapperStyle:i(this.options.offset)})}})},function(e,t,n){var i=n(320),s=n(369),o=n(337),a=e.exports=function(e,t){var n,a=e.resource_type;return delete e.resource_type,n=a===i.PLAYLIST?new s(e,t):new o(e,t)};a.getClass=function(e){var t=e.resource_type;return t===i.PLAYLIST?s:o}},,,function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,i,s,o){var a,r=null!=t?t:e.nullContext||{},l=i.helperMissing,u=e.escapeExpression;return'    <a href="'+u((a=null!=(a=i.permalink_url||(null!=t?t.permalink_url:t))?a:l,"function"==typeof a?a.call(r,{name:"permalink_url",hash:{},data:o}):a))+'" title="'+u((n(331)||t&&t.$t||l).call(r,"Open on SoundCloud",{name:"$t",hash:{},data:o}))+'" class="artwork__link">\n'},3:function(e,t,n,i,s){return"    </a>\n"},5:function(e,t,i,s,o){var a;return'    <div class="artwork__follow g-opacity-transition">\n      '+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},n(372),{name:"$view",hash:{resource_id:null!=(a=null!=t?t.user:t)?a.id:a},data:o}))+"\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,s,o){var a,r,l=null!=t?t:e.nullContext||{},u=i.helperMissing,c=e.escapeExpression;return'<div class="artwork__wrapper" style="'+c((r=null!=(r=i.wrapperStyle||(null!=t?t.wrapperStyle:t))?r:u,"function"==typeof r?r.call(l,{name:"wrapperStyle",hash:{},data:o}):r))+'">\n'+(null!=(a=i["if"].call(l,null!=t?t.isLink:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?a:"")+"    "+c((n(366)||t&&t.$view||u).call(l,n(380),{name:"$view",hash:{stretch:!0,size:null!=(a=null!=t?t._options:t)?a.size:a,className:"artwork__img",resource_type:null!=t?t._resource_type:t,resource_id:null!=t?t._resource_id:t},data:o}))+"\n"+(null!=(a=i["if"].call(l,null!=t?t.isLink:t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o}))?a:"")+(null!=(a=i["if"].call(l,null!=(a=null!=t?t._options:t)?a.show_follow_button:a,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o}))?a:"")+"</div>\n"},useData:!0})},function(e,t,n){function i(){return!!this.model.get(this.options.resource_id)}function s(){return!!this.myFollowers.get(this.options.resource_id)}var o=n(373),a=n(378),r=n(229),l=n(359),u=n(374),c=n(376),d=n(248),h=n(281);e.exports=h.extend(a,{ModelClass:c,className:"sc-button-follow sc-button-cta",template:n(379),defaults:{icon_only:!1},setup:function(){this.observedAttributes=[this.options.resource_id],this.myFollowers=new u,this.setupModelListeners(this.myFollowers)},dispose:function(){this.teardownModelListeners(this.myFollowers),this.myFollowers.release(),delete this.myFollowers},renderDecorate:function(){var e=i.call(this);this.myFollowers.lastFetchTime||this.myFollowers.fetch(),this.toggleState("selected",e),this.$el.toggleClass("sc-button-cta",!e)},onClick:function(e){var t=new l({id:this.options.resource_id});r.trigger(d.UI.FOLLOW_BUTTON_CLICKED,t),o.follow(this.options.resource_id,!i.call(this)),e.preventDefault()},getTemplateData:function(){var e=i.call(this),t=s.call(this);return{selected:e,followBack:!e&&t}}})},function(e,t,n){(function(t){function i(e){var n,o,r,l=!1,u=e.list,c=e.state,h=e.target,p=e.origin,f=e.requestType,m=p===a.currentUserId();return o=t.Deferred(),m&&!a.isLoggedIn()?a.login().done(function(){e.origin=a.currentUserId(),i(e).done(o.resolve).fail(o.reject)}).fail(o.reject):(u&&m?(n=function(){u.get(h)!==c?(u.toggle(h,c),c=u.get(h),e.persist&&(r=u.setRemote(h,c,f),r&&r.fail(function(t,n){"abort"!==n&&d.trigger("error",s.extend({xhr:t},e)),i(s.defaults({persist:!1,state:!c},e))}))):l=!0},u.fetch().done(n).done(o.resolve).fail(o.reject)):o.resolve(),o.done(function(){if(!l){var t=e.action;d.trigger([t,t+":origin:"+e.originType+":"+p,t+":target:"+e.targetType+":"+h].join(" "),{state:c,origin:p,originType:e.originType,target:h,targetType:e.targetType,context:e.context})}})),o}var s=n(217),o=n(221),a=n(250),r=n(374),l=n(376),u=n(377),c={followings:new l,followers:new r,soundLikes:new u},d=e.exports=s.extend({},o.Events,{follow:function(e,t,n){var o,r,l=a.currentUserId();n=s.defaults(n||{},{action:"follow",origin:l,originType:"user",target:e,targetType:"user",state:t,persist:!0}),r=n.origin,r!==n.target&&(n.target===l?(o=c.followers,o.fetch().done(function(){o.get(r)!==n.state&&(o.toggle(r,n.state),n.state=o.get(r),i(n))})):(n.list=r===l?c.followings:null,i(n)))},like:function(e,t,n,o){o=s.defaults(o||{},{action:"like",origin:a.currentUserId(),originType:"user",target:e,targetType:t,state:n,persist:!0,list:c.soundLikes}),i(o)}})}).call(t,n(1))},function(e,t,n){(function(t){var i=n(375);e.exports=i.extend({baseUrl:function(){return this.getEndpointUrl("myFollowers")},setRemote:t.noop})}).call(t,n(1))},function(e,t,n){(function(t){function i(){var e=this.url();e&&o.isLoggedIn()?r.prototype.fetch.apply(this,arguments).done(i.bind(this)).fail(this._fetchDefer.reject):this._fetchDefer.resolve()}var s=n(217),o=n(250),a=n(229),r=n(255),l=n(227),u=n(222);e.exports=r.extend({CREATE:"POST",READ:"GET",DELETE:"DELETE",_currentRequests:null,next_href:null,_fetchDefer:null,readPathSuffix:"ids",setup:function(){this._currentRequests=new l},url:function(e,t){var n="CREATE"===t||"DELETE"===t,i=s.isFunction(this.baseUrl)?this.baseUrl(t):this.baseUrl,o=u.parse(i);if(o.path=o.path.replace(/\/?$/,"/"),n)o.path+=e;else{if(null!==this.next_href)return this.next_href;o.path+=this.readPathSuffix,o.query.linked_partitioning=1,o.query.limit=5e3}return u.stringify(o)},get:function(){return r.prototype.get.apply(this,arguments)||!1},fetch:function(){return this._fetchDefer||(this._fetchDefer=t.Deferred(),o.isLoggedIn()?i.call(this):a.one("connect:hasUserData",i.bind(this))),this._fetchDefer},parse:function(e){return this.next_href=e.next_href||!1,s.reduce(e.collection,function(e,t){return e[t]=!0,e},{})},toggle:function(e,t){var n=this.get(e),i="boolean"==typeof t?t:!n;i!==n&&(i?this.set(e,!0):this.unset(e))},setRemote:function(e,n,i){var s,o,a,r=this._currentRequests.get(e);if(!r)return o=i?i:n?"CREATE":"DELETE",s=this.url(e,o),r=t.ajax({url:s,type:this[o],dataType:"json"}),this._currentRequests.set(e,r),a=this,r.always(function(){this._currentRequests.unset(e)}.bind(this)).done(function(){var t=a.get(e);(this.type===a.DELETE&&t||this.type===a.CREATE&&!t)&&a.setRemote(e,t)}),r},hasDataForView:function(){return!!this.lastFetchTime}},{neverRelease:!0,hashFn:function(){return 1}})}).call(t,n(1))},function(e,t,n){var i=n(375),s=n(250);e.exports=i.extend({baseUrl:function(e,t){return"CREATE"===e||"DELETE"===e?this.getEndpointUrl("myFollowingsWrite"):this.getEndpointUrl("userFollowings",{userId:s.currentUserId()})}})},function(e,t,n){var i=n(219),s=n(337),o=n(375);e.exports=o.extend({CREATE:"PUT",baseUrl:function(){return this.getEndpointUrl("myTrackLikes")},onToggle:function(e,t){var n=s.instances.get(e),o=i.get("me");n&&n.likesChanged(t),o&&o.likesChanged(t)}})},function(e,t,n){(function(t){function i(e){this.options.responsive&&this.toggleState("icon",e!==o.DEFAULT)}var s=n(217),o=n(321),a=n(363),r=n(225);e.exports=new r({applyTo:function(e){a.applyTo(e),e.defaults=s.extend({size:"small",text_only:!1,icon_only:!0,responsive:!1,visual:!1},e.defaults),e.states=s.extend({active:"sc-button-active",selected:"sc-button-selected",icon:"sc-button-icon",visual:"sc-button-visual"},e.states),e.className=["sc-button",e.className].join(" ").trim(),e.events=s.extend({},e.events,{"click.button":"onClick"})},defaults:{tagName:"button",onClick:t.noop,template:function(){return""},loadingTemplate:null,onWindowSizeChange:i},before:{setup:function(e){this.$el.attr("tabIndex",0).addClass("sc-button-"+e.size),this.toggleState("icon",e.icon_only).toggleState("visual",e.visual),i.call(this,this.getWindowSize())}}})}).call(t,n(1))},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,i,s,o){return"  "+e.escapeExpression((n(331)||t&&t.$t||i.helperMissing).call(null!=t?t:e.nullContext||{},"Follow back",{name:"$t",hash:{_context:"button",_comment:"Shows up on a profile if the user who's profile is visited, is  following the current user. Clicking equals the follow action."},data:o}))+"\n"},3:function(e,t,n,i,s){var o;return null!=(o=n["if"].call(null!=t?t:e.nullContext||{},null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.program(6,s,0),data:s}))?o:""},4:function(e,t,i,s,o){return"    "+e.escapeExpression((n(331)||t&&t.$t||i.helperMissing).call(null!=t?t:e.nullContext||{},"Following",{name:"$t",hash:{_context:"button",_comment:"Shows up on a profile if the current user is already following this user of the profile. Clicking equals the unfollow action."},data:o}))+"\n"},6:function(e,t,i,s,o){return"    "+e.escapeExpression((n(331)||t&&t.$t||i.helperMissing).call(null!=t?t:e.nullContext||{},"Follow",{name:"$t",hash:{_context:"button",_comment:"Shows up on a profile of someone who you're not following."},data:o}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){var o;return null!=(o=n["if"].call(null!=t?t:e.nullContext||{},null!=t?t.followBack:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?o:""},useData:!0})},function(e,t,n){function i(e){return o.urlFrom(e.model.attributes,e.options.size)}var s=n(217),o=n(381),a=n(397),r=n(281);e.exports=r.extend(a,{template:n(399),css:n(401),className:"image",defaults:{alt:"",size:50,stretch:!1},setup:function(){var e=this.model,t=this.model;!t.imageAttribute,this.requiredAttributes=["kind",t.imageAttribute],this.toggleState("fadeIn",!0),this.$el.addClass(["sc-artwork",o.getPlaceholderClass(this.model.id),e.stretch?"image-full":""].join(" "))},renderDecorate:function(){var e=i(this);e&&!o.isDefaultImage(e)?this.addDeferred(o.load(e).done(function(){this.toggleState("fadeIn",!1),o.flagCachedImage(e)}.bind(this))):this.toggleState("fadeIn",!1)},getTemplateData:function(e){return s.extend(e,{size:this.options.size,placeholderUrl:o.getPlaceholderUrl(i(this),this.options.size)})}})},function(e,t,n){(function(t){function i(e){var t,n,i;return m.lastIndex=0,t=e.replace(m,function(e,t,s,o,a){return u.find(v,function(e,t){if(e[1]===a)return n=t,!0}),i=t,s}),i?{index:n,key:parseInt(t,10),type:i}:null}function s(e,t){var n=u.find(v,function(e){return e[0]>=t})||u.last(v);return"t20x20"===n[1]&&"artworks"===e?"tiny":n[1]}function o(e){m.lastIndex=0;var t,n=m.exec(e);return n&&(t=n[3].charCodeAt(0)%4+1,1!==t&&(e=e.replace("//i1.","//i"+t+"."))),e}function a(e){g[e.type]||(g[e.type]={}),g[e.type][e.key]|=1<<e.index}var r,l=n(382),u=n(217),c=n(228),d=n(310),h=n(233),p=n(384),f=/default/,m=/^.*\/(\w+)-([-a-z0-9]+)-([a-z0-9]+)\.(jpg|png|gif).*$/i,g={},v=[[20,"t20x20"],[50,"t50x50"],[120,"t120x120"],[200,"t200x200"],[500,"t500x500"]],_=["alt","class","height","src","title","width"],b={whitelist:["style","title","class","aria-label","aria-role","aria-hidden"],closingTag:!0},x={cloud:{40:n(385),50:n(386),80:n(387),120:n(388),200:n(389),500:n(390)},user:{40:n(391),50:n(392),80:n(393),120:n(394),200:n(395),500:n(396)}},w=e.exports={load:function(e,n){var i=new Image,s=t.Deferred();return t(i).on("load",function(){s.resolve(i)}).on("error",function(){s.reject(i)}),n&&h.corsImg&&(i.crossOrigin=!0),i.src=e,s},isLoaded:function(e){return!!(e.complete&&e.width&&e.height)},markup:function(e,t){var n,i,s,o;return e&&e.attributes&&(e=e.attributes),n=t.src||this.urlFrom(e,t.size),n=this.isDefaultImage(n)?null:"url("+n+")",o=t.placeholderId||e,s=t.stretch?"100%":t.size+"px",i=u.extend({style:{"background-image":n,width:s,height:s},"class":"sc-artwork "+this.getPlaceholderClass(o)+" "+(t["class"]||""),"aria-label":this.getAltText(e),"aria-role":"img"},u.omit(t,"stretch","size","class")),p.getMarkup("span",i,b)},getMarkup:function(e){var t,n=[];return u.each(e,function(e,t){u.indexOf(_,t)!==-1&&n.push(t+'="'+e+'"')}),t=i(e.src),t&&a(t),"<img "+n.join(" ")+">"},getAltText:function(e){return e.username?l.get(e,!0)+" avatar":l.get(e)},getPlaceholderUrl:function(e,t){var n,s,o,a,r;if(o=i(w.setFormat(e,t))){if(n=o.key,g[o.type]||(g[o.type]={}),g[o.type][n])for(s=u.find(v,function(e,n){return r=n,t<=e[0]});r>=0;){if(g[o.type][n]&1<<r){a=v[r];break}--r}if(s&&a===s)return!1;if(a)return w.setFormat(e,a[0])}return null},urlFrom:function(e,t){var n=e&&(e.artwork_url||e.avatar_url||e.user&&e.user.avatar_url)||"";return t&&d.isHiDPI&&(t*=2),w.isDefaultImage(n)?n:(n=o(n).replace(/^https?\:\/\//,"//"),t?w.setFormat(n,t):n)},isDefaultImage:function(e){return!e||f.test(e)},getDefaultImage:function(e,t){return(x[e]||x.cloud)[r(t)]},setFormat:function(e,t,n){if(this.isDefaultImage(e))return"";m.lastIndex=0;var i=m.exec(e);if(i){var a=i[1],r=i[3],l=s(a,t);return l&&(e=e.replace(r,l)),n?o(e):e}return e},flagCachedImage:function(e){var t=i(e);t&&a(t)},getMainColor:function(e,t){var n,i,s,o=e.data,a=o.length,r={},l=0,u=1,d=a/4;for(t=c.clamp(t||0,u,d),s=0;s<a;s+=4*t)i=[o[s],o[s+1],o[s+2]],i=i.join(","),r[i]=r.hasOwnProperty(i)?++r[i]:1;for(i in r)if(r.hasOwnProperty(i)){if(r[i]<l)continue;l=r[i],n=i}return n?n.split(",").map(function(e){return parseInt(e,10)}):null},getPlaceholderClass:function(e){var t=12,n="number"==typeof e?e:e&&e.id||0;return"sc-artwork-placeholder-"+n%t}};r=function(){var e,t=Object.keys(x.cloud);return t.sort(function(e,t){return e-t}),e=u.last(t),u.memoize(function(n){var i,s;for(i=0;s=t[i];++i)if(s>=n)return s;return e})}()}).call(t,n(1))},function(e,t,n){var i=n(285),s=n(383);e.exports={get:function(e,t){var n=i.Utils.escapeExpression(e.username||e.title||e.name);return t===!0&&(n=s.possessive(n)),n}}},function(e,t){e.exports={possessive:function(e){return e+"’s"}}},function(e,t,n){var i=n(217),s=n(285),o=e.exports={getMarkup:function(e,t,n){if(Array.isArray(t))return t.map(function(t){return o.getMarkup(e,t,n)}).join("");n=n||{};var a=[],r=n.whitelist,l="self"===n.closingTag?"/":"",u=n.closingTag===!0?"</"+e+">":"";return i.each(t,function(e,t){"style"===t&&"object"==typeof e&&(e=this.getStyleAttr(e)),r&&r.indexOf(t)===-1||a.push(" "+t+'="'+s.Utils.escapeExpression(e)+'"')},this),"<"+e+a.join("")+l+">"+u},getStyleAttr:function(e){return i.map(e,function(e,t){return null!=e&&""!==e?t+":"+e+";":""}).join("")}}},function(e,t,n){e.exports=n.p+"assets/images/default/cloudx40-aa663d.png"},function(e,t,n){e.exports=n.p+"assets/images/default/cloudx50-6fda91.png"},function(e,t,n){e.exports=n.p+"assets/images/default/cloudx80-fb664f.png"},function(e,t,n){e.exports=n.p+"assets/images/default/cloudx120-9ee05c.png"},function(e,t,n){e.exports=n.p+"assets/images/default/cloudx200-24be23.png"},function(e,t,n){e.exports=n.p+"assets/images/default/cloudx500-adf8ac.png"},function(e,t,n){e.exports=n.p+"assets/images/default/userx40-871313.png"},function(e,t,n){e.exports=n.p+"assets/images/default/userx50-4fe60e.png"},function(e,t,n){e.exports=n.p+"assets/images/default/userx80-df9b45.png"},function(e,t,n){e.exports=n.p+"assets/images/default/userx120-92218c.png"},function(e,t,n){e.exports=n.p+"assets/images/default/userx200-f4534b.png"},function(e,t,n){e.exports=n.p+"assets/images/default/userx500-296a72.png"},function(e,t,n){var i=n(217),s=n(225),o=n(320),a=n(398);e.exports=new s({defaults:{isAudible:!1,isUser:!1,isSound:!1,isPlaylist:!1,isPrivate:function(){return this.isAudible&&this.model.isPrivate()},isShareable:function(){return this.isAudible&&this.model.isShareable()},isLikeable:function(){return this.isAudible&&!this.model.isPrivate()},isBlocked:function(){return this.isSound&&this.model.isBlocked()},isBuyable:function(){return!(!this.isAudible||!this.model.get("purchase_url"))},isDownloadable:function(){return!(!this.isAudible||!this.model.get("download_url"))},getShareURL:function(){var e=this.model.get("permalink_url");switch(this.options.resource_type){case o.USER_SOUNDS:e+="/tracks";break;case o.USER_FAVORITES:e+="/likes"}return this.isAudible&&this.isPrivate()&&(e+="/"+this.model.get("secret_token")),e}},before:{setup:function(e){if(!this.model){var t=a.getResourceTypeInfo(e.resource_type);this.ModelClass=t.ModelClass,i.extend(this,t.props),this.model=this.getModel(e.resource_id,e.resource_type)}}}})},,function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,i,s,o){var a;return"  "+e.escapeExpression((n(400)||t&&t.$image||i.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"$image",hash:{stretch:null!=(a=null!=t?t._options:t)?a.stretch:a,"class":"image__placeholder",size:null!=t?t.size:t,src:null!=t?t.placeholderUrl:t},data:o}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,s,o){var a,r=null!=t?t:e.nullContext||{};return(null!=(a=i["if"].call(r,null!=t?t.placeholderUrl:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?a:"")+e.escapeExpression((n(400)||t&&t.$image||i.helperMissing).call(r,t,{name:"$image",hash:{stretch:null!=(a=null!=t?t._options:t)?a.stretch:a,"class":"image__full g-transition-opacity",size:null!=t?t.size:t,src:null!=t?t.src:t},data:o}))+"\n"},useData:!0})},function(e,t,n){var i=n(285),s=n(381);e.exports=function(e,t){return new i.SafeString(s.markup(e,t.hash))}},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".image{position:relative;width:100%;height:100%}.image__placeholder{position:absolute}.image__full{position:relative;opacity:1}.image__full,.image__placeholder{background-size:cover;background-position:50% 50%}.image.fadeIn>.image__full{opacity:0}",""])},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".artwork,.artwork__img,.artwork__link{display:block;position:relative;height:100%;width:100%}.artwork__wrapper{position:absolute}.artwork__userAvatar{width:100%}.artwork__follow{opacity:0;position:absolute;bottom:10px;left:0;right:0}.artwork__follow .sc-button-follow{margin:auto;display:block}.artwork:hover .artwork__follow{opacity:1;display:block}",""])},function(e,t,n){function i(e){this.model[e]("play pause",s,this)}function s(){this.toggleState("playing",this.model.isPlaying())}function o(){return this.options.show_comments&&"sound"===this.model.resource_type}function a(){if(!this.disposed&&!this.layersAreInserted){var e=this.options,t=this.model,n=e.interactive,i=this.getElement("sceneElement"),s={resource_type:t.resource_type,resource_id:t.resource_id,waveformStyle:e.waveformStyle,upperPartHeight:e.upperPartHeight,$eventEl:i};this.addLayer([[_,u.defaults({waveformData:this.waveformData},s)],[w,u.clone(s)],n&&!f.touch?[y,s]:null]),n&&this.addLayer([[k,u.clone(s)],[x,u.clone(s)]]),r.call(this),this.toggleState("loaded",!0),this.layersAreInserted=!0}}function r(){var e,t;!this._commentsShowing&&o.call(this)&&(e=this.model,t=this.addLayer([[b,{sound_id:e.id,resource_id:e.resource_id,waveformData:this.waveformData,$eventEl:this.getElement("sceneElement")}]],{at:1}),t.setDirty(!0),this._commentsShowing=!0)}function l(){if(!this.subviews.commentPopover){var e,t=this.model,n=this.el.offsetHeight*(1-this.options.upperPartHeight);e=new v({sound_id:t.id,resource_id:t.resource_id,darkText:this.options.darkText,avatarSize:n<20?10:20}),e.render(),this.el.appendChild(e.el),this.addSubview(e,"commentPopover")}}var u=n(217),c=n(253),d=n(337),h=n(404),p=n(405),f=n(233),m=n(281),g=n(408),v=n(409),_=n(427),b=n(434),x=n(437),w=n(438),y=n(440),k=n(441);e.exports=m.extend({template:n(442),css:n(443),className:"waveform",ModelClass:d,requiredAttributes:["waveform_url","state"],defaults:{single:!0,upperPartHeight:.7,waveformStyle:"default",show_comments:!0,interactive:!0,darkText:!0},_commentsShowing:!1,states:{playing:"playing",emptyWaveform:function(e){this.$el.toggleClass("waveform__empty",e),e&&this.toggleState("loaded",!0)},loaded:"loaded"},element2selector:{sceneElement:".waveform__scene"},waveformData:null,_wisDeferred:null,setup:function(){i.call(this,"on"),this.scene=new h,this.whenReadyForLayers=c.defer(),this.layersAreInserted=!1,c.all([this.whenInserted(),g.loadWaveformDataForView(this)]).done(this.whenReadyForLayers.resolve)},dispose:function(){i.call(this,"off")},renderDecorate:function(){var e=this.model.isProcessing();e?this.toggleState("emptyWaveform",!0):o.call(this)&&this.whenInserted().done(l.bind(this)),this.whenReadyForLayers.done(a.bind(this))},teardown:function(){this.scene.teardown(),this._commentsShowing=!1,this.layersAreInserted=!1},addLayer:function(e,t){var n,i=new p,s=i.el,o=this.scene,a=this.getElement("sceneElement");return t=t||{},this.addSubview(i),o.addLayer(i),void 0===t.at?a.append(s):(n=o.getLayers()[t.at],n?n.$el.before(s):a.append(s)),i.initCanvasDimensions(),e.filter(u.identity).forEach(i.addNode,i),i},getModelData:function(){return{}},getTemplateData:function(e){var t=this.model,n="sound"===t.resource_type,i=t.isProcessing();return u.extend(e,{id:t.id,_resource_id:t.resource_id,type:n?"track":"playlist",isProcessing:i,showComments:o.call(this),upperPartHeightPercent:100*this.options.upperPartHeight+"%"})}})},function(e,t,n){function i(){s.call(this)}function s(){this._raf||(this._raf=window.requestAnimationFrame(this.update))}var o=n(221);e.exports=Class.extend([o.Events,{_layers:null,_raf:null,initialize:function(){this._layers=[],this.update=this.update.bind(this)},teardown:function(){window.cancelAnimationFrame(this._raf),this._raf=null;for(var e;e=this._layers.pop();)e.off("dirty",i,this)},getLayers:function(){return this._layers},addLayer:function(e){this._layers.push(e),e.on("dirty",i,this),e.isDirty&&s.call(this)},update:function(){this._raf=null;var e,t;for(e=0;t=this._layers[e];++e)t.isDirty&&t.update()}}])},function(e,t,n){function i(){this.setDirty(!0)}var s=n(217),o=n(406);e.exports=o.extend({className:"g-box-full sceneLayer",render:function(){return this},addNode:function(e){var t=e[0],n=s.extend({el:this.el,scale:this.scale},e[1]),o=new t(n);o.className&&this.$el.addClass(o.className),this.addSubview(o).on("dirty",i,this).render()},onCanvasResize:function(){s.invoke(this.subviews,"onResize")},setDirty:function(e){(this.isDirty=e)&&this.trigger("dirty")},update:function(){if(!this.disposed&&this.isDirty){var e,t,n=!1;for(this.context.clearRect(0,0,this.el.width,this.el.height),e=0;t=this.subviews[e];++e)t.draw(),n=n||t.isDirty;this.setDirty(n)}}})},function(e,t,n){(function(t){function i(){var e=this.$el.width(),t=this.$el.height();this.initCanvasDimensions(e,t),this.onCanvasResize()}var s=n(310),o=n(281),a=n(407),r=window.devicePixelRatio?(Math.floor(window.devicePixelRatio)||1)/s.backingStoreRatio:1;e.exports=o.extend({tagName:"canvas",className:"g-box-full waveform__layer",attributes:{"aria-hidden":"true"
},context:null,scale:null,template:function(){return""},onCanvasResize:t.noop,_setup:function(){this.context=this.el.getContext("2d"),this.scale=r,a.on("resize:x:debounced",i,this),o.prototype._setup.apply(this,arguments)},_dispose:function(){this.disposed||(a.off("resize:x:debounced",i,this),o.prototype._dispose.apply(this,arguments))},renderDecorate:function(){this.whenInserted().done(this.initCanvasDimensions.bind(this))},initCanvasDimensions:function(e,t){var n=this.context,i=n.canvas,o=this.scale;i.width=(e||this.el.offsetWidth)*o,i.height=(t||this.el.offsetHeight)*o,s.isHiDPI&&1!==o&&n.scale(o,o)}})}).call(t,n(1))},function(e,t,n){(function(t){function i(e,t){var n=t+"d",i="resize"===e?s(n):l.trigger.bind(l,e+":"+n);return o[t](i,r)}function s(e){var t=window.innerWidth,n=window.innerHeight,i=l.trigger.bind(l,"resize:x:"+e),s=l.trigger.bind(l,"resize:y:"+e),o=l.trigger.bind(l,"resize:"+e);return function(e){var a=window.innerWidth,r=window.innerHeight;a!==t&&i(e),r!==n&&s(e),o(e),n=r,t=a}}var o=n(217),a=n(221),r=200,l=e.exports=o.extend({},a.Events);t(window).on("resize",i("resize","debounce")).on("resize",i("resize","throttle")).on("scroll",i("scroll","debounce")).on("scroll",i("scroll","throttle"))}).call(t,n(1))},function(e,t,n){(function(t){function i(e){return!e||e.indexOf(m)>-1?f:e.replace(/\/w1\./,"/wis.").replace(/\.png$/i,".json")}function s(e){return t.ajax({url:e,type:"GET",dataType:"json"})}function o(e){var t=e.model,n=i(t.get("waveform_url")),o=c.defer(),d=b.get(n);return o.done(function(){e.waveformData=u.pluck(arguments,"data")}),d?o.resolve({data:d,key:n}):(o.done(a),s(n).done(function(e){var t=e.samples.reduce(l(e.height),new p(e.samples.length));o.resolve({key:n,data:t})}).fail(function(){o.resolve({key:n,data:r()})}),o)}function a(e){b.set(e.key,e.data)}var r,l,u=n(217),c=n(253),d=n(227),h=n(233),p=h.typedArrays?Uint8Array:Array,f=(h.corsImg?"//w1.sndcdn.com/":"/_waveform/")+"90GaSwazbrh1_m.json",m="/images/player-waveform-medium.png",g=500,v=1800,_=1.5,b=new d({maxLength:g});e.exports={loadWaveformDataForView:o};r=u.memoize(function(){var e,t=new p(v);for(e=0;e<v;++e)t[e]=Math.round(15*Math.sin(e/v*Math.PI*10)+105);return t}),l=u.memoize(function(e){return function(t,n,i){return t[i]=Math.round(Math.pow((e-n)/e,1/_)*e),t}})}).call(t,n(1))},function(e,t,n){(function(t){function i(e){var t=e?"on":"off";T[t]("resize:debounced",this.resetCachedDimensions,this),this.sound[t]("finish",s,this)}function s(){this.isInteracting()||this.goToState(w.INITIAL)}function o(){this._hovered||(this._hoverTimeout=setTimeout(function(){this._hovered=!0,this._hoverTimeout=null}.bind(this),C))}function a(){this._hoverTimeout&&(clearTimeout(this._hoverTimeout),this._hoverTimeout=null),this.getCurrentState()!==w.ACTIVE_TIMESTAMP&&this.goToState(w.INITIAL)}function r(e){var t=this.getTimestampByMouseEvent(e),n=h.call(this,e),i=this.getCurrentState();i!==w.ACTIVE_TIMESTAMP&&(i===w.CURRENT_COMMENT&&this.getCurrentComment()===n||(this.setInteracting(!0),n&&this._hovered?this.goToState(w.CURRENT_COMMENT,n.get("timestamp"),n):this.goToState(w.CURRENT_TIMESTAMP,t)))}function l(e){e.stopPropagation(),e.preventDefault();var t=Math.floor((p.call(this)||0)/1e3),n=this.sound;n.isPrivate()||this.getState("snippet")||(window.open(n.get("permalink_url")+"#c="+t+"&t="+n.timecode()),x.pause(n))}function u(e){var t=m.get("me"),n=v.timecode(e),i=t?_.urlFrom(t.attributes,10):_.getDefaultImage("user",10);this.toggleState("leaveCommentPlaceholder",!0),this.$$("body").text(""),this.$$("body").attr("title","").html(b.t("Leave a comment at [[timecode]]",{timecode:n})),this.$$("avatar").attr("title","").css({"background-image":"url("+i+")"}),this.setPosition(e/this.sound.duration()),this.toggleState("visible",!0)}function c(e){var t=this.getState("visible");e=e||this.getCurrentComment(),this.toggleState("leaveCommentPlaceholder",!1),e?(d.call(this,e),this.setPosition(e.get("timestamp")/this.sound.duration()),this.toggleState("visible",!0)):t&&!e&&this.toggleState("visible",!1)}function d(e){var t=e.get("user"),n=t.username,i=k(e.get("body"),{paragraphs:!1,className:"sc-truncate",links:!1}),s=b.t("Click to reply to [[username]]",{username:n},{comment:"This is an alt text on the reply button"}),o=_.urlFrom(t,10);this.$$("username").attr("href",t.permalink_url).attr("title",s).text(n),this.$$("body").attr("title",s).html(i),this.$$("avatar").attr("title",s).css({"background-image":o?"url("+o+")":""})}function h(e){var t=this.getTimestampByMouseEvent(e),n=Math.floor(this.options.avatarSize/2/this.cachedDimensions().width*this.sound.duration());return this.collection.getCommentAtTimestamp(t,n)}function p(){var e=this.stateMachine.currentComment;return e?e.get("timestamp"):this.stateMachine.currentTimestamp}var f=n(217),m=n(219),g=n(410),v=n(340),_=n(381),b=n(259),x=n(234),w=n(412),y=n(413),k=n(415),S=n(281),T=n(407),C=50;e.exports=S.extend(y,{className:"commentPopover",template:n(425),css:n(426),defaults:{avatarSize:10,darkText:!1,flagSize:"small"},events:{click:l,mouseleave:a,mouseenter:o,"mousemove .commentPopover__scrub":r},_hovered:!1,_hoverTimeout:null,setup:function(e){this.collection=new g(null,{sound_id:e.sound_id,secret_token:this.sound.get("secret_token")}),f.bindAll(this,"onClickOutsideOfPointer"),i.call(this,!0),this.toggleState("darkText",e.darkText).toggleState("smallAvatar",10===e.avatarSize),this.$el.addClass(e.flagSize)},dispose:function(){i.call(this,!1),t("html").off("mousedown",this.onClickOutsideOfPointer)},renderDecorate:function(){var e=this.getCurrentComment(),t=this.sound.duration();this.toggleState("visible",!!e).toggleState("commentLeft",!1).toggleState("snippet",this.sound.getMediaDuration()<t),e&&this.setPosition(e.get("timestamp")/t)},setPosition:function(e){var t=this.cachedDimensions().width,n=Math.floor(e*t)-this.options.avatarSize/2,i=0,s=t-n,o=this.$$("wrapper");e>.5?(s=t-s,o.width(s),i=this.getState("leaveCommentPlaceholder")?-1*this.$$("body").outerWidth():-1*(this.$$("username").outerWidth()+this.$$("body").outerWidth()),this.toggleState("commentLeft",!0)):(o.width(s),this.toggleState("commentLeft",!1)),o.css({transform:"translateX("+n+"px)",marginLeft:i}),this.$$("avatar").css({left:-i})},onAdd:function(e){this.toggleState("visible",!0),c.call(this,e)},onRemove:function(){this.goToState(w.INITIAL)},onInitialState:function(){this.setInteracting(!1),c.call(this)},onCurrentCommentChange:function(){c.call(this)},onCurrentTimestamp:function(e){this.sound.isPrivate()||!this.isInteracting()||this.getState("snippet")?c.call(this):u.call(this,e)},onActiveTimestamp:function(e,n){c.call(this,n),t("html").on("mousedown",this.onClickOutsideOfPointer)},onClickOutsideOfPointer:function(e){this.disposed||this.getCurrentState()!==w.ACTIVE_TIMESTAMP||t(e.target).closest(".commentPopover__wrapper").length||(this.goToState(w.INITIAL),t("html").off("mousedown",this.onClickOutsideOfPointer))}})}).call(t,n(1))},function(e,t,n){var i=n(411),s=n(235),o=n(337);e.exports=s.extend({model:i,soundDuration:null,defaults:{sound_id:null,secret_token:null,limit:100},baseUrl:function(){return this.getEndpointUrl("comments",{id:this.options.sound_id})},setup:function(){var e=new o({id:this.options.sound_id});this.options.secret_token=e.get("secret_token"),this.soundDuration=e.duration(),e.release()},comparator:function(e,t){return new Date(e.attributes.timestamp)-new Date(t.attributes.timestamp)},getCommentAtTimestamp:function(e,t){return t=t||0,this.find(function(n){var s=n.get("timestamp");return 0===t?s===e:Math.abs(e-s)<=t&&s!==i.EMPTY_TIMESTAMP})}},{hashFn:function(e,t){return t&&t.sound_id||null}})},function(e,t,n){var i=n(255),s=1/0;e.exports=i.extend({parse:function(e){return null===e.timestamp&&(e.timestamp=s),e.user.avatar_url=e.user.avatar_url.replace("http:","https:"),e}},{EMPTY_TIMESTAMP:s})},function(e,t){e.exports={INITIAL:"timed-comment-sm:initial",CURRENT_COMMENT:"timed-comment-sm:current-comment",CURRENT_TIMESTAMP:"timed-comment-sm:current-timestamp",ACTIVE_TIMESTAMP:"timed-comment-sm:active-timestamp"}},function(e,t,n){(function(t){var i=n(217),s=n(225),o=n(337),a=n(414),r=n(412),l=t.noop;e.exports=new s({stateMachine:null,_stateHandlers:null,before:{setup:function(){this._stateHandlers={},this.sound=new o({id:this.options.sound_id,resource_id:this.options.resource_id})}},after:{setup:function(){var e=this.sound.get("secret_token");this.stateMachine=new a(this.options.sound_id,this.options.resource_id,e),this.onState(r.INITIAL,this.onInitialState).onState(r.CURRENT_COMMENT,this.onCurrentCommentChange).onState(r.ACTIVE_TIMESTAMP,this.onActiveTimestamp).onState(r.CURRENT_TIMESTAMP,this.onCurrentTimestamp)},dispose:function(){var e=this.stateMachine,t=this;this.sound.release(),this.sound=null,i.each(this._stateHandlers,function(n,i){n.forEach(function(n){e.off(i,n,t)})}),this._stateHandlers=null,e&&e.release()}},getCurrentComment:function(){return this.stateMachine.currentComment},getCurrentCommentTimestamp:function(){var e=this.getCurrentComment();return e&&e.get("timestamp")},cachedDimensions:function(){return this._cachedDimensions||(this._cachedDimensions=this.$el.offset(),this._cachedDimensions.width=this.$el.width(),this._cachedDimensions.height=this.$el.height()),this._cachedDimensions},resetCachedDimensions:function(){this._cachedDimensions=null},getTimestampByMouseEvent:function(e){return Math.floor((e.clientX-this.cachedDimensions().left)/this.cachedDimensions().width*this.sound.duration())},getCurrentState:function(){return this.stateMachine.currentState},goToState:function(){var e=this.stateMachine;e.goToState.apply(e,arguments)},setInteracting:function(e){this.stateMachine.interactingWithComments=e},isInteracting:function(){return this.stateMachine.interactingWithComments},onState:function(e,t){return this._stateHandlers[e]=this._stateHandlers[e]||[],this.stateMachine.on(e,t,this),this._stateHandlers[e].push(t),this},isActiveTimestampState:function(){return!!this.stateMachine.activeTimestamp&&this.getCurrentState()===r.ACTIVE_TIMESTAMP},defaults:{onInitialState:l,onActiveTimestamp:l,onCurrentTimestamp:l,onCurrentCommentChange:l}})}).call(t,n(1))},function(e,t,n){function i(e){var t=e?"on":"off";this[t](c.INITIAL,this.onInitialState,this)[t](c.CURRENT_COMMENT,this.onCurrentComment,this)[t](c.CURRENT_TIMESTAMP,this.onCurrentTimestamp,this)[t](c.ACTIVE_TIMESTAMP,this.onActiveTimestamp,this),this.sound[t]("time",this.onAudioTime,this)}var s,o=n(217),a=n(221),r=n(410),l=n(238),u=n(337),c=n(412),d=300,h=3e3,p=1e3;s=function(){this.setup.apply(this,arguments)},s.extend=a.Model.extend,o.extend(s.prototype,a.Events,{constructor:s,currentComment:null,activeTimestamp:null,currentTimestamp:null,commentQuotaTimeout:null,commentQuotaExceeded:!0,commentIntervalTimeout:null,commentIntervalExceeded:!0,currentState:c.INITIAL,interactingWithComments:!1,setup:function(e,t,n){this.collection=new r(null,{sound_id:e,secret_token:n}),this.sound=new u({id:e,resource_id:t}),i.call(this,!0)},dispose:function(){i.call(this,!1),this.sound.release(),this.collection.release()},onInitialState:function(){this.activeTimestamp=null,this.currentComment=null,this.currentTimestamp=null},onCurrentComment:function(e,t){this.activeTimestamp=null,this.currentComment=t,this.currentTimestamp=null},onCurrentTimestamp:function(e){this.activeTimestamp=null,this.currentComment=null,this.currentTimestamp=e},onActiveTimestamp:function(e){this.activeTimestamp=e,this.currentComment=null,this.currentTimestamp=null},goToState:function(e){var t=this.canGoToState.apply(this,arguments);return t&&(this.currentState=e,this.trigger.apply(this,arguments)),t},canGoToState:function(e){var t=this.activeTimestamp&&this.currentState===c.ACTIVE_TIMESTAMP;switch(e){case c.CURRENT_TIMESTAMP:return!t;case c.CURRENT_COMMENT:return this.commentIntervalExceeded&&arguments[1]!==this.currentComment&&!t;case c.INITIAL:return!0;case c.ACTIVE_TIMESTAMP:return arguments[1]!==this.activeTimestamp;default:return!1}},onAudioTime:o.throttle(function(e){if(!this.disposed){var t,n=e.sound.currentTime();!this.interactingWithComments&&this.sound.isPlaying()&&(t=this.collection.getCommentAtTimestamp(n,d),t?this.goToState(c.CURRENT_COMMENT,n,t)&&(clearTimeout(this.commentIntervalTimeout),this.commentIntervalExceeded=!1,setTimeout(function(){this.commentIntervalExceeded=!0}.bind(this),p),clearTimeout(this.commentQuotaTimeout),this.commentQuotaExceeded=!1,this.commentQuotaTimeout=setTimeout(function(){this.commentQuotaExceeded=!0,this.onAudioTime(e)}.bind(this),h)):this.commentQuotaExceeded&&this.goToState(c.CURRENT_TIMESTAMP,n))}},d)}),e.exports=l.applyTo(s,{onCleanup:function(e){e.dispose()},cleanupInstantly:!0,hashFn:function(e){return e}})},function(e,t,n){"use strict";function i(e,t){var n=o({},I,t),s=n.links,A=n.userLinks,D=n.internalLinks,M=n.externalLinks,L=n.deepLinks,$=n.escapeExpression,R=n.hashtagLinks,N=n.internalLinksBaseUrl,O=n.isOpeningNewWindow,z=n.maxExternalLinksLength,U=n.maxLength,H=n.paragraphs,B=n.redirectorPattern,V=n.splitWordsAtLength,W=n.whitelist,F=$!==!1;if("string"!=typeof e)return"";s?A||D||M||(s=!1):A=D=M=!1;var j=s?c():{},G=j.flatten,q=j.addPlaceholder;return p.lastIndex=g.lastIndex=m.lastIndex=0,e=a(e),s&&(e=e.replace(E,function(e,t,n,i){var s=n||t;return q(s,i!==s?i:null)}).replace(p,function(e,t){return q(t)})),e=e.replace(y,"\n\n").replace(k,"\n").replace(C," "),e=W&&W.length?e.replace(new RegExp("<(?!\\s*\\/?("+W.join("|")+")\\b)[^>]*>","ig"),""):e.replace(S,""),F&&(e=r(e)),s&&(e=e.replace(m,'<a href="mailto:$1">$1</a>'),e=G(e,function(e,t){var s={},a="",u=x.test(e)?e:"http://"+e;if(0===e.indexOf("mailto:"))s.href=e,s.text=e.replace("mailto:","");else if(D&&_.test(e))s.href=e.replace(_,N),s.text=e.replace(x,"");else if(M){var c=b.test(u);s.href=c?u:l(B,u,b),c||(s.title=u,s.rel="nofollow"),s.text=h(e,z,x),s.target="_blank"}else s.href=e;return t&&(F?a=i(t,o({},n,{paragraphs:!1,splitWordsAtLength:0})).trim()+(/[!?:;.]$/.test(t)?" ":": "):s.text=t),a+(s.text?'<a href="'+r(s.href)+'"'+(s.rel?' rel="'+s.rel+'"':"")+(s.target?' target="'+s.target+'"':"")+(s.title?' title="'+r(s.title)+'"':"")+(">"+(F?r(s.text):s.text)+"</a>"):r(s.href))}),A&&(e=e.replace(g,'$1@<a href="'+N+'$2"'+(O?' target="_blank"':"")+">$2</a>")),R&&(e=e.replace(v,'$1<a href="/tags/$3">$2</a>')),L&&(e=e.replace(f,'<a href="#t=$1">$1</a>'))),U&&(e=u(e,U)),V>0&&(e=d(e,V)),e=H?e.split(w).map(function(e){return"<p>"+e.trim().replace(T,"<br>")+"</p>"}).join(""):e.replace(P," ").replace(C," ")}function s(e,t){var n=t&&t.redirectorPattern;return n?l(n,e,b):e}var o=n(416),a=n(417),r=n(418),l=n(419),u=n(420),c=n(422),d=n(423),h=n(424);e.exports=i;var p=/\b((?:https?:\/\/|www\d{0,3}\.|(?:[a-z0-9\-]+\.)+[a-z]{2,4}\/)[^\s'’"]*[^\s`!()\[\]{};:'".,<>?«»“”‘’])/gi,f=/(\b(?:[0-5]?[0-9])(?::[0-5][0-9]){1,2}\b)/g,m=/([a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,24})/gi,g=/(\s|[^\w]|^)@([\w\-]+)/g,v=/( |^)(#([\w-]+))/gm,_=/^((?:https?:\/\/)?(?:www\.|m\.)?soundcloud\.(?:com|dev))\/?|^\//i,b=/^((?:https?:\/\/)?([a-z0-9-]+\.)*soundcloud\.(?:com|dev))(?:\/|$)/i,x=/^(?:ht|f)tps?:\/\//i,w=/(?:[ \t]*\r?\n[ \t]*){2,}/,y=/<\/p>/g,k=/<br\s*\/?>/g,S=/<\/?[a-z].*?>/gi,T=/\r?\n/g,C=/[ \t]{2,}/g,P=/[\r\n]+/g,E=/<a\s+[^>]*?href=(['"]([^'"\s]+)['"]|[^'"\s]+)[^>]*?>(.+?)<\/a>/gi,I={paragraphs:!0,links:!0,externalLinks:!0,internalLinks:!0,userLinks:!0,deepLinks:!1,whitelist:[],internalLinksBaseUrl:"/",isOpeningNewWindow:!1,maxLength:null,truncateExternalLinks:!0,maxExternalLinksLength:50,hashtagLinks:!0,splitWordsAtLength:null,redirectorPattern:null};i.redirectLink=s,i.withDefaults=function(e){var t=o({},I,e),n=function(e,n){var s=n?o({},t,n):t;return i(e,s)};return n.redirectLink=function(e,n){var i=n?o({},t,n):t;return s(e,i)},n}},function(e,t){"use strict";function n(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return n.reduce(i,e)}function i(e,t){for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.exports=n},function(e,t){"use strict";function n(e){return i.innerHTML=e.replace(s,"&lt;"),i.value}e.exports=n;var i=document.createElement("textarea"),s=/</g},function(e,t){"use strict";function n(e){return null==e||e===!1?"":o.test(e)?e.replace(s,a):e}e.exports=n;var i={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[<>"'`]/g,o=/[&<>"'`]/,a=function(e){return i[e]||"&amp;"}},function(e,t){"use strict";function n(e,t,n){return!e||n&&n.test(t)?t:e.replace(i,window.encodeURIComponent(t))}e.exports=n;var i=/%s/},function(e,t,n){"use strict";function i(e,t){function n(e){if(t>0){var n=e.data.length;t-=n,t<=0&&(e.data=e.substringData(0,e.data.length+t))}else e.data=""}function i(){return t>0}function r(e){for(var t=void 0;e;)t=e,e=e.nextSibling,t.parentNode.removeChild(t)}return e.length<t?e:(a.innerHTML=o.innerHTML=e,s(o,n,i,r),o.innerHTML+(o.innerHTML===a.innerHTML?"":"&hellip;"))}var s=n(421);e.exports=i;var o=document.createElement("div"),a=document.createElement("div")},function(e,t){"use strict";function n(e,t,i,a){var r=e.firstChild,l=void 0;if(r)do r.nodeType===s?t(r):r.nodeType===o&&n(r,t,i,a),l=r;while((r=r.nextSibling)&&(!i||i(l)));a&&r&&a(r)}var i=Node,s=i.TEXT_NODE,o=i.ELEMENT_NODE;e.exports=n},function(e,t){"use strict";function n(){var e=[],t=Math.floor(1e4*Math.random()),n=/xxxLINK[0-9]+\|([0-9]+)xxx/g;return{addPlaceholder:function(n,i){return e.push({href:n,text:i}),"xxxLINK"+t+"|"+(e.length-1)+"xxx"},flatten:function(t,i){var s=t.replace(n,function(t,n){var s=e[parseInt(n,10)];return s?i(s.href,s.text):t});return e.length=0,s}}}e.exports=n},function(e,t,n){"use strict";function i(e,t){function n(e){i.lastIndex=0,i.test(e.data)&&(e.data=e.data.replace(i,function(e){return e.split(a).filter(Boolean).join("​")}))}var i=new RegExp("\\S{"+t+",}","g"),a=new RegExp("(\\S{"+Math.floor(t/2)+"}(?=\\S{2}))");return i.test(e)?(o.innerHTML=e,s(o,n),o.innerHTML):e}var s=n(421);e.exports=i;var o=document.createElement("div")},function(e,t){"use strict";function n(e,t,n){e=n?e.replace(n,""):e;var o=e.match(s)||[],a=i(o,1),r=a[0];if(r&&e.length>t){var l=e.search(s)+r.length,u=Math.floor((t-l)/2);return e.slice(0,l+u)+"&hellip;"+e.slice(-u)}return e}var i=function(){function e(e,t){var n=[],i=!0,s=!1,o=void 0;try{for(var a,r=e[Symbol.iterator]();!(i=(a=r.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){s=!0,o=l}finally{try{!i&&r["return"]&&r["return"]()}finally{if(s)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.exports=n;var s=/\.[a-z-]{2,30}\//},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){var o,a=e.lambda,r=e.escapeExpression;return'<div class="commentPopover__scrub"></div>\n<div class="commentPopover__wrapper g-opacity-transition">\n  <div class="commentPopover__avatar" style="width: '+r(a(null!=(o=null!=t?t._options:t)?o.avatarSize:o,t))+"px; height: "+r(a(null!=(o=null!=t?t._options:t)?o.avatarSize:o,t))+'px;"></div>\n  <a class="commentPopover__username sc-truncate" tabindex="-1" href=""></a>\n  <p class="commentPopover__body sc-truncate sc-pointer"></p>\n</div>\n'},useData:!0})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,'.commentPopover{position:absolute;width:100%;top:70%;height:20px;opacity:0;transition:opacity .25s;z-index:9}.commentPopover.leaveCommentPlaceholder .commentPopover__avatar{pointer-events:none}.commentPopover.leaveCommentPlaceholder .commentPopover__username{display:none}.commentPopover.visible{opacity:1}.commentPopover__scrub{height:100%}.commentPopover:not(.snippet) .commentPopover__scrub{cursor:pointer}.commentPopover__wrapper{width:50%;transition:transform 50ms}.commentPopover:hover .commentPopover__wrapper{transition:transform 0}.commentPopover__body,.commentPopover__username{transition:padding-top .25s;box-sizing:border-box;display:inline-block}.commentPopover__username{position:relative;float:left;max-width:30%;padding-left:10px}.commentPopover.commentLeft .commentPopover__username{float:none;padding-left:0;padding-right:10px}.commentPopover__username,a.commentPopover__username:hover,a.commentPopover__username:visited{color:#f50}.commentPopover__username:before{content:"";position:absolute;top:0;bottom:0;left:0;width:1px;display:block;background-image:linear-gradient(rgba(255,85,0,.95),rgba(255,85,0,.1))}.commentPopover.commentLeft .commentPopover__username:before{right:0;left:auto}.commentPopover__body{margin:0;padding-left:10px;color:#fff;max-width:70%}.commentPopover.leaveCommentPlaceholder.commentLeft .commentPopover__body{position:absolute;left:20px}.commentPopover.leaveCommentPlaceholder.commentLeft.smallAvatar .commentPopover__body{left:10px}.commentPopover.commentLeft .commentPopover__body{float:left;padding-left:0;padding-right:10px}.commentPopover__avatar{position:absolute;top:-20px;background-size:cover;display:none}.commentPopover.visible .commentPopover__avatar{display:block;cursor:pointer}.commentPopover.smallAvatar{height:10px}.commentPopover.smallAvatar .commentPopover__avatar{top:-10px}.commentPopover.darkText .commentPopover__body{color:#333}.commentPopover.small .commentPopover__body,.commentPopover.small .commentPopover__username{padding-top:1px}.commentPopover.small.visible .commentPopover__body,.commentPopover.small.visible .commentPopover__username{padding-top:2px}.commentPopover.medium .commentPopover__body,.commentPopover.medium .commentPopover__username{padding-top:10px}.commentPopover.medium.visible .commentPopover__body,.commentPopover.medium.visible .commentPopover__username{padding-top:13px}.commentPopover.large .commentPopover__body,.commentPopover.large .commentPopover__username{padding-top:20px}.commentPopover.large.visible .commentPopover__body,.commentPopover.large.visible .commentPopover__username{padding-top:23px}.visualSound.streamContext.playing .commentPopover__body{color:#e5e5e5}.visualSound.streamContext.playing .commentPopover__body,.visualSound.streamContext.playing .commentPopover__username{padding-top:6px}.visualSound.streamContext.playing .commentPopover.visible .commentPopover__body,.visualSound.streamContext.playing .commentPopover.visible .commentPopover__username{padding-top:9px}',""])},function(e,t,n){function i(e){var t=e?"on":"off";this.model[t]("play",o,this),this.options.$eventEl[t]("mouseenter mouseleave",this.onHover)}function s(e){return e>0&&e<v}function o(){this.setDirty(!0)}function a(e,t){var n=t?v:0;return n>e?e+1:n<e?e-1:e}function r(){if(this._pattern)return this._pattern;var e,t,n,i,s,o=document.createElement("canvas"),a=this.options,r=this.canvas,l=o.getContext("2d"),u=a.scale,d=r.width/u,h=r.height/u,p=a.waveformHeight,m=f.getConfig("gapWidth"),g=f.getConfig("barWidth"),v=g+m,_=a.upperPartHeight*h,b=h-_,x=this.getFillStyle(),w=m>0,y=w&&this.getFillStyle(1,"gapGradient"),k=null,S=null;for(o.width=r.width,o.height=r.height,c.isHiDPI&&1!==u&&l.scale(u,u),l.beginPath(),l.fillStyle=y,e=0;e<d;e+=v)i=this.getWaveformHeightAt(e),t=Math.floor(i/p*_),n=Math.floor((1-i/p)*b+_),l.rect(e,t,g,n-t),w&&e&&(s=Math.max(t,k),l.fillRect(e-m,s,m,Math.min(n,S)-s)),k=t,S=n;return l.fillStyle=x,l.fill(),this._pattern=this.context.createPattern(o,"no-repeat"),this._pattern}var l,u=n(217),c=n(310),d=n(428),h=n(431),p=n(281),f=n(429),m=n(432),g=3,v=13,_=.2;e.exports=p.extend(m,h,d,{gradientName:"backgroundGradient",_pattern:null,_currentPlayingStep:0,_currentHoverStep:0,_isHovered:!1,_isPlaying:!1,setup:function(){this._currentPlayingStep=this.model.isPlaying()?v:0,u.bindAll(this,"onHover"),this.onHover=this.onHover.bind(this),i.call(this,!0)},dispose:function(){i.call(this,!1)},onHover:function(e){this._isHovered="mouseenter"===e.type,this.setDirty(!0)},onResize:function(){this._pattern=null},draw:function(){var e=this.context,t=this.options.scale,n=this.canvas.height,i=a(this._currentPlayingStep,this.model.isPlaying()),o=a(this._currentHoverStep,!!this._isHovered);this._currentPlayingStep=i,this._currentHoverStep=o,this.isAnimating=s(o)||s(i);var u=Math.max(i,o),c=this.getPlayableWidth(),d=this.getUnplayableWidth();e.save(),e.fillStyle=r.call(this),e.scale(1/t,1/t),e.globalAlpha=l(u),e.fillRect(0,0,c,n),d&&(e.globalAlpha=_,e.fillRect(c,0,d,n)),e.restore()}});l=u.memoize(function(e){var t=Math.max(0,(e-g)/(v-g));return-Math.cos(t*Math.PI)/8+.875})},function(e,t,n){var i=n(225),s=n(429);e.exports=new i({_fills:null,requires:["gradientName"],before:{onResize:function(){this._fills=null}},getFillStyle:function(e,t){return null==e&&(e=1),t=t||this.gradientName,this._fills=this._fills||{},this._fills[e+"_"+t]||(this._fills[e+"_"+t]=s.gradient(this.context,t,this.options.waveformStyle,this.options.scale,e))}})},function(e,t,n){function i(e,t){var n=t[0],i=t[1],s=3===t.length?t[2]:1,o="rgba("+i+","+s+")";return e.addColorStop(n,o),e}function s(e){var t=o.result(a,e);return t}var o=n(217),a=n(430);e.exports={getConfig:function(e){return a._config[e]},gradient:function(e,t,n,o,a){o=o||1,null==a&&(a=1);var r=s(n),l=e.canvas.height/o,u=r[t];return 1!==a&&(u=u.map(function(e){var t=3===e.length?e[2]:1;return[e[0],e[1],t*a]})),u.reduce(i,e.createLinearGradient(0,0,0,l))},getColor:function(e,t){return s(t)[e]}}},function(e,t,n){function i(e,t){return 1===t?"rgb("+e+")":"rgba("+e+","+t+")"}var s=n(257),o=n(219),a="0,0,0",r="51,51,51",l="102,102,102",u="153,153,153",c="255,0,0",d="255,51,0",h="255,85,0",p="255,101,0",f="255,255,255",m="82,82,82";e.exports={_config:{barWidth:2,gapWidth:1,fadeInSteps:10,fixedTimeIndicator:!0,commentLines:!1,fullHighlight:!0},"default":function(){var e=s(o.get("widgetParams").color).toRgb(),t=[e.r,e.g,e.b].join(","),n=t===h?d:t;return{progressGradient:[[0,t],[.7,n],[.701,t],[1,t]],backgroundGradient:[[0,r],[.7,r],[.701,r,.5],[1,r,.5]],gapGradient:[[0,l,0],[.28,m,.6],[.7,r],[.701,r,.25],[1,r,.25]],scrubberGradientBackward:[[0,r,.5],[.7,r,.5],[.701,r,0],[1,r,0]],scrubberGradientForward:[[0,t,.5],[.7,n,.5],[.701,t,0],[1,t,0]],highlightGradientPlayed:[[0,t],[.7,n],[.701,t],[1,t]],highlightGradientUnplayed:[[0,a,.5],[1,a,.5]],progressIndicatorBg:i(a,.8),progressIndicatorColor:i(p,1),durationIndicatorBg:i(a,.8),durationIndicatorColor:i(u,1),dividerColorPrevious:i(c,1),dividerColorUpcoming:i(u,1)}},inverted:function(){var e=s(o.get("widgetParams").color).toRgb(),t=[e.r,e.g,e.b].join(","),n=t===h?d:t;return{progressGradient:[[0,t],[.7,n],[.701,t],[1,t]],backgroundGradient:[[0,f],[.7,f],[.701,f,.4],[1,f,.4]],gapGradient:[[0,f,0],[.28,f,.3],[.7,f,.5],[.701,f,.125],[1,f,.125]],scrubberGradientBackward:[[0,f,.5],[.7,f,.5],[.701,f,0],[1,f,0]],scrubberGradientForward:[[0,t,.5],[.7,n,.5],[.701,t,0],[1,t,0]],highlightGradientPlayed:[[0,t],[.7,n],[.701,t],[1,t]],highlightGradientUnplayed:[[0,f],[1,f]],progressIndicatorBg:i(a,.8),progressIndicatorColor:i(p,1),durationIndicatorBg:i(a,.8),durationIndicatorColor:i(u,1),dividerColorPrevious:i(c,1),dividerColorUpcoming:i(u,1)}}}},function(e,t,n){var i=n(217),s=n(225),o=n(429),a={upperPartHeight:.7,waveformWidth:1800,waveformHeight:140,waveformData:null};e.exports=new s({_memo:null,applyTo:function(e){e.defaults=i.defaults(e.defaults||{},a)},before:{onResize:function(){this._memo=null}},defaults:{getAudible:function(){return this.model}},getWaveformHeightAt:function(e){var t,n=this.options,i=this.canvas.width/n.scale,s=o.getConfig("gapWidth")+o.getConfig("barWidth"),a=Math.floor(e/s),r=e/i;return this._memo||(this._memo=new Array(Math.ceil(i/s))),null==this._memo[a]&&(t=Math.floor(r*n.waveformWidth),this._memo[a]=n.waveformData[0][t]),this._memo[a]}})},function(e,t,n){function i(e){return Math.ceil(e/c)*c}function s(e){return e-e%c}var o=n(225),a=n(337),r=n(433),l=n(228).clamp,u=n(429),c=u.getConfig("barWidth")+u.getConfig("gapWidth");e.exports=new o(r,{override:{ModelClass:a},merge:{requiredAttributes:["duration"],defaults:{upperPartHeight:.7,waveformStyle:"default"}},hasUnplayableArea:function(){return this.getPlayablePortion()<1},getPlayablePortion:function(){var e=this.model.getMediaDuration(),t=this.model.getFixedDuration();return t<=0?1:l(e/t,0,1)},getPlayableWidth:function(){var e=this.canvas.width,t=this.getPlayablePortion();return 1===t?e:s(e*t)},getUnplayableWidth:function(){return this.canvas.width-this.getPlayableWidth()},insideScrubbableArea:function(e,t){return this.insideTopArea(t)&&this.insidePlayableArea(e,"px")},roundToBar:function(e,t){return(t?i:s)(e)},getWholeBarWidth:function(){return c},insidePlayableArea:function(e,t){return!this.hasUnplayableArea()||("ms"===t&&(e=this.msToPx(e)),e<=this.getPlayableWidth())},insideTopArea:function(e){return e<this.options.upperPartHeight*this.canvas.height},msToPx:function(e){return e/this.model.getFixedDuration()*this.canvas.width}})},function(e,t,n){(function(t){var i=n(217),s=n(225);e.exports=new s({canvas:null,context:null,isDirty:!1,isAnimating:!1,requires:["draw"],applyTo:function(e){e.defaults=i.extend({scale:1,$eventEl:null},e.defaults)},after:{draw:function(){this.setDirty(this.isAnimating)},onResize:function(){this.setDirty(!0)}},before:{setup:function(e){e.$eventEl||(e.$eventEl=this.$el),this.canvas=this.el,this.context=this.el.getContext("2d")}},override:{render:function(){this.hasData()?this.setDirty(!0):(this.setDirty(!1),this.fetchData())},destroyElement:t.noop},defaults:{onResize:t.noop},setDirty:function(e){(this.isDirty=e)&&this.trigger("dirty")}})}).call(t,n(1))},function(e,t,n){(function(t){function i(e){this.options.$eventEl[e]("click",this.onClick)[e]("mousemove",this.onMouseMove)[e]("mouseenter",this.onMouseEnter)[e]("mouseleave",this.onMouseLeave),this.sound[e]("finish",this.onPlaybackFinish)}function s(){return!!this._avatarsDeferred&&"pending"!==this._avatarsDeferred.state()}function o(){var e=this.collection.map(a,this).filter(m.identity);return this._avatarsDeferred=this.addDeferred(_.settled(e).done(function(){this.setDirty(!0),this.toggleState("loadedAvatars",!0)}.bind(this))),this._avatarsDeferred}function a(e){var t,n,i,s,o,a,u,c,d;if(e.length?(n=e[0],i=e[1][0]):(n=e.get("timestamp"),i=e),i&&null!=n&&!(n<0))return t=_.defer(),o={timestamp:n,cid:i.cid},a=i.get("user"),u=!!a.avatar_t20x20,s=u?a.avatar_t20x20:a.avatar_url,c=s.indexOf("default_avatar")!==-1,this.sound.get("comment_count")<50||!c?(d={view:this,url:u||c?s:x.setFormat(s,10,!0),info:o,imgDefer:t},u?r(d):l(d)):(this._comments.unshift(o),t.resolve()),t}function r(e){var t=new Image;t.onload=d.bind(e.view,t,e.info,e.imgDefer),t.onerror=h.bind(e.view,e.info,e.imgDefer),t.src=e.url}function l(e){A.push(e),u()}function u(){for(var e,t,n=I.length;n<E&&(t=A.shift());)e=t.imgDefer,"pending"===e.state()&&(n=I.push(t),r(t),e.always(c(t)))}function c(e){return function(){I.splice(I.indexOf(e),1),u()}}function d(e,t,n){this.disposed||(t.el=e,this._comments.unshift(t)),n.resolve()}function h(e,t){this._comments.unshift(e),t.resolve()}function p(e){var t=this.getTimestampByMouseEvent(e),n=Math.floor(this.options.avatarWidth/2/this.cachedDimensions().width*this.sound.duration());return this.collection.getCommentAtTimestamp(t,n)}function f(e){return e.offsetY>=this.options.upperPartHeight*this.cachedDimensions().height}var m=n(217),g=n(410),v=n(219),_=n(253),b=n(431),x=n(381),w=n(435),y=n(433),k=n(412),S=n(413),T=n(281),C=T.prototype,P=500,E=10,I=[],A=[];e.exports=T.extend(y,b,S,{css:n(436),className:"waveformCommentsNode",defaults:{sound_id:null,avatarWidth:10,avatarHeight:10,fullAvatarWidth:20,fullAvatarHeight:20,drawLines:!0,strokeStyle:"rgba(255,255,255,.1)",bulkFetch:v.get("maxComments")},_avatarsDeferred:null,_hovered:!1,_hoverTimeout:null,_comments:null,states:{loadedAvatars:"loaded"},setup:function(e){this.collection=new g(null,{sound_id:e.sound_id,secret_token:this.sound.get("secret_token")}),this._comments=[],m.bindAll(this,"onClick","onMouseMove","onMouseEnter","onMouseLeave","onClickOutsideOfPointer","onPlaybackFinish"),i.call(this,"on")},dispose:function(){this._comments.length=0,i.call(this,"off")},getAudible:function(){return this.sound},hasData:function(){
if(C.hasData.call(this))return s.call(this)},fetchData:function(){return C.hasData.call(this,this.collection)?s.call(this)?(this.toggleState("loadedAvatars",!0),_.resolve()):o.call(this):C.fetchData.call(this,this.collection)},onResize:function(){this.resetCachedDimensions()},draw:function(){if(this._comments.length&&s.call(this)){var e=this.context,t=this.canvas,n=this.options,i=t.width/n.scale,o=t.height/n.scale*n.upperPartHeight,a=n.avatarHeight,r=n.avatarWidth,l=a/2,u=this.sound.duration();this._comments.forEach(function(t){var n=t.timestamp/u,s=Math.floor(i*n);t.el&&e.drawImage(t.el,s-l,o,a,r)},this)}},onAdd:function(e){a.call(this,e).done(this.setDirty.bind(this,!0))},onRemove:function(e){var t=this._comments.some(function(t,n,i){if(t.cid===e.cid)return i.splice(n,1),!0});t&&this.setDirty(!0)},onInitialState:function(){this.setInteracting(!1)},onActiveTimestamp:function(){t("html").one("click",this.onClickOutsideOfPointer)},onClickOutsideOfPointer:function(){this.disposed||this.getCurrentState()!==k.ACTIVE_TIMESTAMP||this.goToState(k.INITIAL)},onClick:function(e){if(e=w.normalizeEvent(e),f.call(this,e)){e.stopPropagation();var t=p.call(this,e),n=t?t.get("timestamp"):this.getTimestampByMouseEvent(e);this.goToState(k.ACTIVE_TIMESTAMP,n,t)}},onMouseMove:function(e){var t=this.getTimestampByMouseEvent(e),n=p.call(this,e),i=this.getCurrentState();return e=w.normalizeEvent(e),f.call(this,e)?void(i!==k.ACTIVE_TIMESTAMP&&(i===k.CURRENT_COMMENT&&this.getCurrentComment()===n||(n&&this._hovered?(this.setInteracting(!0),this.goToState(k.CURRENT_COMMENT,n.get("timestamp"),n)):this.goToState(k.CURRENT_TIMESTAMP,t)))):void(i===k.CURRENT_COMMENT&&this.goToState(k.INITIAL))},onMouseEnter:function(){this._hovered||(this._hoverTimeout=setTimeout(function(){this._hovered=!0,this._hoverTimeout=null}.bind(this),P))},onMouseLeave:function(){this._hoverTimeout&&(clearTimeout(this._hoverTimeout),this._hoverTimeout=null)},onPlaybackFinish:function(){this.isInteracting()||this.goToState(k.INITIAL)}})}).call(t,n(1))},function(e,t,n){(function(t){function n(e){var t,n,i=e.type;return 0===i.indexOf("touch")?(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY):0===i.indexOf("mouse")?(t=e.clientX+window.pageXOffset,n=e.clientY+window.pageYOffset):(t=e.x,n=e.y),{x:t,y:n}}var i;e.exports={normalizeEvent:function(e){if(e.offsetX===i||e.offsetY===i){var s=t(e.target).offset(),o=n(e.originalEvent);e.pageX=o.x,e.pageY=o.y,e.offsetX=o.x-s.left,e.offsetY=o.y-s.top}return e}}}).call(t,n(1))},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".waveformCommentsNode{opacity:0;transition:opacity .2s ease-in-out}.waveformCommentsNode.loaded{opacity:1}",""])},function(e,t,n){(function(t){function i(e){e=l.normalizeEvent(e);var t=this.options.scale;this.insideScrubbableArea(e.offsetX*t,e.offsetY*t)&&this.model.seek(this.getSeekPosition(e.pageX))}function s(e){this.options.$eventEl[e](v,this.onPointerMove)[e](_,this.onPointerUp)[e](g,this.onPointerDown)}var o,a=n(217),r=n(219),l=n(435),u=n(234),c=n(233),d=n(281),h=n(432),p=Math.floor,f=t(window),m=function(){return!1},g=c.touch?"touchstart":"mousedown",v=c.touch?"touchmove":"mousemove",_=c.touch?"touchend":"mouseup";e.exports=d.extend(h,{states:{scrubbing:function(e){document.onselectstart=e?m:null,o.toggleClass("sc-selection-disabled",e)}},_cachedOffset:null,draw:t.noop,setup:function(){o=o||r.get("appView").$el,a.bindAll(this,"onPointerDown","onPointerMove","onPointerUp"),s.call(this,"on")},dispose:function(){s.call(this,"off")},onResize:function(){this._cachedOffset=null},onPointerDown:function(e){e=l.normalizeEvent(e);var t=this.model,n=this.options.scale;this.toggleState("scrubbing",!0),f.on(_,this.onPointerUp),t.isPlaying()?i.call(this,e):this.insideTopArea(e.offsetY*n)&&u.toggle(this.model,{userAction:!0})},onPointerUp:function(e){f.off(_,this.onPointerUp),this.toggleState("scrubbing",!1)},onPointerMove:function(e){c.touch&&e.preventDefault(),e=l.normalizeEvent(e),this.getState("scrubbing")&&this.model.isPlaying()&&i.call(this,e)},getCachedOffset:function(){if(!this._cachedOffset){var e=this.$el,t=e.offset();this._cachedOffset={left:p(t.left),top:p(t.top),right:p(t.left+e.width()),bottom:p(t.top+e.height())}}return this._cachedOffset},getSeekPosition:function(e){var t=(e-this.getCachedOffset().left)/this.canvas.width*this.options.scale;return p(t*this.model.getFixedDuration())}})}).call(t,n(1))},function(e,t,n){function i(e){var t=e?"on":"off";this.model[t]("play pause seeked",s,this)}function s(){this.setDirty(!0)}var o=n(439),a=n(428),r=n(281),l=n(432),u=n(429);e.exports=r.extend(l,o,a,{gradientName:"progressGradient",setup:function(){i.call(this,!0)},dispose:function(){i.call(this,!1)},draw:function(){var e=this.context,t=this.canvas,n=this.options,i=u.getConfig("fadeInSteps"),s=this.lastPosition=Math.ceil(this.model.progress()*(t.width/n.scale)*i)/i,o=this.getWholeBarWidth(),a=this.roundToBar(s,!1),r=s-a;e.save(),e.globalCompositeOperation="source-atop",e.fillStyle=this.getFillStyle(),e.fillRect(0,0,a,this.canvas.height),r&&(e.fillStyle=this.getFillStyle(r/o),e.fillRect(a,0,o,this.canvas.height)),e.restore()}})},function(e,t,n){function i(){!this.isDirty&&this.shouldBeDirty()&&this.setDirty(!0)}function s(){this.setDirty(!0)}function o(e){var t=e?"on":"off";this.model[t]("time",i,this)[t]("seeked",s,this)}var a=n(225);e.exports=new a({lastPosition:0,after:{setup:function(){o.call(this,!0)},dispose:function(){o.call(this,!1)}},getPosition:function(){return Math.max(this.model.isPlaying()?1:0,Math.ceil(this.model.progress()*this.canvas.width/this.options.scale))},hasPositionChanged:function(){return this.lastPosition!==this.getPosition()},defaults:{shouldBeDirty:function(){return this.hasPositionChanged()}}})},function(e,t,n){function i(e){if(e){var t=this.context,n=this.canvas,i=this.options,s=i.scale,o=this._mouseX||0,a=this.model.progress()*(n.width/s),r=this.roundToBar(a,a>=o);t.save(),t.globalCompositeOperation="source-atop",t.fillStyle=this.getFillStyle(e,r<o?"scrubberGradientForward":this.gradientName),t.fillRect(Math.min(r,o),0,Math.abs(r-o),n.height),t.restore()}}function s(e){this.options.$eventEl[e]("mouseleave",this.onMouseLeave)[e]("mousemove",this.onMouseMove)}function o(){var e=this._targetStep,t=this._currentStep;return e>t?t+1:e<t?t-1:t}var a,r=n(217),l=n(428),u=n(435),c=n(281),d=n(432),h=3,p=13;e.exports=c.extend(d,l,{gradientName:"scrubberGradientBackward",_mouseX:null,_currentStep:0,_targetStep:0,_isHovering:!1,setup:function(){r.bindAll(this,"onMouseLeave","onMouseMove"),s.call(this,"on")},dispose:function(){s.call(this,"off"),clearTimeout(this._delayTimeout)},onResize:function(){this._mouseX=null},onMouseLeave:function(){this._isHovering=!1,this.setDirty(!0)},onMouseMove:function(e){e=u.normalizeEvent(e);var t=this._mouseX,n=this._isHovering,i=this.options.scale;(this._isHovering=this.insideScrubbableArea(e.offsetX*i,e.offsetY*i))&&(this._mouseX=e.offsetX),t===this._mouseX&&n===this._isHovering||this.setDirty(!0)},draw:function(){this._targetStep=this.model.isPlaying()&&this._isHovering?p:0;var e=o.call(this),t=a(e);this.isAnimating=e!==this._currentStep,this._currentStep=e,i.call(this,t)}});a=r.memoize(function(e){var t=Math.max(0,(e-h)/(p-h));return-Math.cos(t*Math.PI)/2+.5})},function(e,t,n){function i(e){var t=e?"on":"off";this.model[t]("play",s,this)[t]("change:duration duration-change",o,this)}function s(){this.setDirty(!0)}function o(){this._duration=null}var a=n(340),r=n(439),l=n(281),u=n(432),c=n(429),d=2,h=12;e.exports=l.extend(u,r,{_lastSecs:null,_duration:null,setup:function(){i.call(this,!0),this.setFont()},dispose:function(){i.call(this,!1)},onResize:function(){this.setFont()},setFont:function(){this.context.font='10px "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Garuda, Verdana, Tahoma, sans-serif',this.setDirty(!0)},shouldBeDirty:function(){return this._lastSecs!==Math.floor(this.model.currentTime()/1e3)},getDuration:function(e){if(!this._duration){var t=a.timecode(this.model.getFixedDuration());this._duration={text:t,width:this.context.measureText(t).width}}return this._duration[e]},draw:function(){var e=this.el,t=this.context,n=this.options,i=this.model,s=n.waveformStyle,o=i.currentTime(),r=a.timecode(o),l=this.getDuration("text"),u=t.measureText(r).width,p=this.getDuration("width"),f=p+2*d,m=e.width/n.scale,g=n.upperPartHeight*(e.height/n.scale),v=g-h-d;t.save(),t.translate(.5,.5),t.fillStyle=c.getColor("durationIndicatorBg",s),t.fillRect(m-f,v,f,h+d),(o>0||i.isPlaying())&&(t.fillRect(0,v,u+2*d,h+d),t.fillStyle=c.getColor("progressIndicatorColor",s),t.fillText(r,d,Math.floor(g-2*d))),t.fillStyle=c.getColor("durationIndicatorColor",s),t.fillText(l,Math.floor(m-f+d),Math.floor(g-2*d)),this._lastSecs=Math.floor(o/1e3),t.restore()}})},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,i,s,o){var a,r=null!=t?t:e.nullContext||{},l=i.helperMissing,u=e.escapeExpression;return'  <div style="height:'+u((a=null!=(a=i.upperPartHeightPercent||(null!=t?t.upperPartHeightPercent:t))?a:l,"function"==typeof a?a.call(r,{name:"upperPartHeightPercent",hash:{},data:o}):a))+';" class="waveform__emptyWaveform sc-font sc-type-light">\n    <span class="waveform__emptyMessage">\n      '+u((n(331)||t&&t.$t||l).call(r,"We're still processing this track or playlist.",{name:"$t",hash:{},data:o}))+"\n    </span>\n  </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){var o;return'<div class="waveform__layer waveform__scene"></div>\n'+(null!=(o=n["if"].call(null!=t?t:e.nullContext||{},null!=t?t.isProcessing:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?o:"")},useData:!0})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".waveform{position:relative;width:100%;height:100%;opacity:0;transition:opacity .2s ease-in-out}.waveform:not(.playing) .waveform__scene:hover{cursor:pointer}.waveform.loaded{opacity:1}.waveform__layer,.waveform__layer .sceneLayer{position:absolute;top:0;left:0;width:100%;height:100%}.waveform__empty .waveform__scene{opacity:.4}.waveform__emptyWaveform{position:relative}.waveform__emptyMessage{position:absolute;text-align:center;width:100%;bottom:5px;color:#000;font-size:11px;text-shadow:1px 1px 1px #fff;font-size:16px}",""])},function(e,t,n){function i(e){e=o.defaults(e||{},{width:0,height:0,canvas:document.createElement("canvas")}),this.canvas=e.canvas,this.context=e.canvas.getContext("2d"),this.width=e.width||e.canvas.offsetWidth,this.height=e.height||e.canvas.offsetHeight,this.devicePixelRatio=window.devicePixelRatio?window.devicePixelRatio:1,this.backingStoreRatio=a.backingStoreRatio,this.canvasPixelRatio=this.devicePixelRatio/this.backingStoreRatio,this.canvas.setAttribute("width",this.width*this.canvasPixelRatio),this.canvas.setAttribute("height",this.height*this.canvasPixelRatio),this.devicePixelRatio!==this.backingStoreRatio&&this.context.scale(this.canvasPixelRatio,this.canvasPixelRatio)}function s(e,t){return{x:e.x*t,y:e.y*t}}var o=n(217),a=n(310);e.exports=i,o.extend(i.prototype,{drawImage:function(){this.context.drawImage.apply(this.context,arguments)},putImageData:function(e,t){this.context.putImageData(e,s(t,this.canvasPixelRatio))},getImageData:function(e,t){return e=s(e,this.canvasPixelRatio),t=s(t,this.canvasPixelRatio),this.context.getImageData(e.x,e.y,t.x-e.x,t.y-e.y)}})},function(e,t,n){(function(t){function i(e){var t=e?"on":"off";o[t]("change:current",s,this)}function s(e){if(!this.disposed){var t=e.current;this.currentSound&&this.currentSound.release(),t&&t.hold(),this.currentSound=t,this.onCurrentSoundChange(e)}}var o=n(234),a=n(225);e.exports=new a({defaults:{currentSound:null,onCurrentSoundChange:t.noop},before:{setup:function(){this.currentSound=null},dispose:function(){this.currentSound&&this.currentSound.release(),this.currentSound=null},renderDecorate:function(){i.call(this,!0)},teardown:function(){i.call(this,!1)}}})}).call(t,n(1))},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,'.visualAudible{width:100%;height:100%;position:relative;z-index:1}.visualAudible.mobile,.visualAudible.mobile *{backface-visibility:hidden}.visualAudible__artwork,.visualAudible__artworkOverlay,.visualAudible__artworkOverlay:after,.visualAudible__artworkOverlayBottom,.visualAudible__artworkOverlayTop,.visualAudible__blocked,.visualAudible__wrapper{position:absolute;top:0;left:0;width:100%;height:100%}.visualAudible__artworkOverlay:after{display:block;content:"";background:#000;opacity:.6}.visualAudible__artworkOverlayBottom{-webkit-filter:blur(2px)}.visualAudible__artworkOverlayTop{-webkit-filter:blur(8px);opacity:.9}.visualAudible__artworkOverlay{opacity:0}.visualAudible.background .visualAudible__artworkOverlay{opacity:1}.visualAudible__body{position:relative;margin:0 0 90px;padding:14px 11px 14px 10px;z-index:100}.visualAudible__footer{position:absolute;right:0;bottom:0;left:0;height:110px;padding:15px 10px;transform:translate(0)}.visualAudible.background .visualAudible__footer{transform:translateY(100%)}.visualAudible.adBackground .soundHeader__actions{opacity:0}.visualAudible__total{position:absolute;bottom:10px;left:10px;z-index:100}.visualAudible__waveform{position:absolute;height:74px;left:10px;right:10px;bottom:20px;transition:opacity .2s ease-out,transform .2s ease-out}.visualAudible__waveform>.artworkWaveform{position:absolute;top:0;left:0;opacity:1;z-index:101}.visualAudible__waveform>.artworkWaveform.hidden{opacity:0}.visualAudible__progressBar{position:fixed;bottom:0;left:0;right:0;opacity:0}.visualAudible__blocked{display:none}.visualAudible.blocked .visualAudible__blocked{display:block}.visualAudible.blocked .soundHeader__logo{z-index:100}.visualAudible.blocked .soundHeader__title{-webkit-filter:blur(1px)}.visualAudible.blocked .visualAudible__artwork{-webkit-filter:blur(8px)}.visualAudible.minimal .visualAudible__waveform{transform:translate3d(0,100%,0)}.visualAudible.minimal .soundHeader__actions,.visualAudible.minimal .soundHeader__playButton,.visualAudible.minimal .soundHeader__title,.visualAudible.minimal .visualAudible__waveform,.visualAudible.onlyArtwork .soundHeader__actions,.visualAudible.onlyArtwork .soundHeader__logo,.visualAudible.onlyArtwork .soundHeader__playButton,.visualAudible.onlyArtwork .soundHeader__snippetIndicator,.visualAudible.onlyArtwork .soundHeader__title,.visualAudible.onlyArtwork .visualAudible__waveform{opacity:0}.visualAudible.minimal .visualAudible__progressBar,.visualAudible.onlyArtwork .visualAudible__progressBar{opacity:1}@media (max-height:350px){.visualAudible .visualAudible__waveform{height:44px}}',""])},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,i,s,o){var a;return"      "+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},n(448),{name:"$view",hash:{key:"visuals",resource_type:null!=(a=null!=t?t._options:t)?a.resource_type:a,resource_id:null!=(a=null!=t?t._options:t)?a.resource_id:a},data:o}))+"\n"},3:function(e,t,i,s,o){var a,r=null!=t?t:e.nullContext||{},l=i.helperMissing,u=e.escapeExpression;return"      "+u((n(366)||t&&t.$view||l).call(r,n(380),{name:"$view",hash:{size:500,stretch:!0,resource_type:null!=(a=null!=t?t._options:t)?a.resource_type:a,resource_id:null!=(a=null!=t?t._options:t)?a.resource_id:a},data:o}))+'\n      <div class="visualAudible__artworkOverlay g-transition-opacity">\n        '+u((n(366)||t&&t.$view||l).call(r,n(380),{name:"$view",hash:{"class":"visualAudible__artworkOverlayBottom",size:500,stretch:!0,resource_type:null!=(a=null!=t?t._options:t)?a.resource_type:a,resource_id:null!=(a=null!=t?t._options:t)?a.resource_id:a},data:o}))+"\n        "+u((n(366)||t&&t.$view||l).call(r,n(380),{name:"$view",hash:{"class":"visualAudible__artworkOverlayTop",size:500,stretch:!0,resource_type:null!=(a=null!=t?t._options:t)?a.resource_type:a,resource_id:null!=(a=null!=t?t._options:t)?a.resource_id:a},data:o}))+"\n      </div>\n"},5:function(e,t,i,s,o){var a;return'      <div class="visualAudible__total g-transition-opacity">\n        '+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},n(451),{name:"$view",hash:{key:"soundsTotal",resource_type:null!=(a=null!=t?t._options:t)?a.resource_type:a,resource_id:null!=(a=null!=t?t._options:t)?a.resource_id:a},data:o}))+"\n      </div>\n"},7:function(e,t,i,s,o){return'      <div class="visualAudible__progressBar g-transition-opacity">\n        '+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},n(457),{name:"$view",hash:{resource_type:null!=t?t._resource_type:t,resource_id:null!=t?t._resource_id:t},data:o}))+"\n      </div>\n"},9:function(e,t,i,s,o){return'<div class="visualAudible__blocked g-transition-transform">\n  '+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},n(463),{name:"$view",hash:{sound_id:null!=t?t._resource_id:t},data:o}))+"\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,s,o){var a,r=null!=t?t:e.nullContext||{};return'<div class="visualAudible__wrapper">\n  <div class="visualAudible__artwork">\n'+(null!=(a=i["if"].call(r,null!=t?t.has_visuals:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o}))?a:"")+'  </div>\n  <div class="visualAudible__body">\n    <div class="visualAudible__header">\n      '+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(r,n(482),{name:"$view",hash:{key:"header",show_button_overlay:!0,hide_action_buttons:null!=t?t.is_blocked:t,visual:!0,resource_type:null!=(a=null!=t?t._options:t)?a.resource_type:a,resource_id:null!=(a=null!=t?t._options:t)?a.resource_id:a},data:o}))+'\n    </div>\n  </div>\n  <div class="visualAudible__footer g-transition-transform">\n'+(null!=(a=i.unless.call(r,null!=t?t.is_sound:t,{name:"unless",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o}))?a:"")+'    <div class="visualAudible__waveform g-transition-transform"></div>\n'+(null!=(a=i["if"].call(r,null!=t?t.is_sound:t,{name:"if",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o}))?a:"")+"  </div>\n</div>\n"+(null!=(a=i["if"].call(r,null!=t?t.is_blocked:t,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o}))?a:"")},useData:!0})},function(e,t,n){function i(e){this.model[e]("seeked",s,this)[e]("time",s,this)}function s(){if(!this.disposed){var e=this.model.currentTime(),t=this.model.get("visuals").visuals,n=a.clamp(o.sortedIndex(t,{entry_time:e},"entry_time")-1,0,t.length-1),i=t[n];n!==this.currentVisualIndex&&(this.currentVisualIndex=n,this.$$("backgroundLayer").css("background-image","url("+i.visual_url+")"),this.$$("item").removeClass("visible").filter('[data-timestamp="'+i.entry_time+'"]').addClass("visible"))}}var o=n(217),a=n(228),r=n(397),l=n(281);e.exports=l.extend(r,{className:"visuals",css:n(449),template:n(450),requiredAttributes:["visuals"],setup:function(){this.currentVisualIndex=-1,i.call(this,"on")},dispose:function(){i.call(this,"off")},getTemplateData:function(e){return e.visuals},renderDecorate:function(){s.call(this)},teardown:function(){this.currentVisualIndex=-1}})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,'.visuals{top:0;left:0;right:0;height:100%;width:100%;position:relative}.visuals__background,.visuals__item{position:absolute;top:0;left:0;bottom:0;right:0;background-size:cover;background-position:50%;background-repeat:no-repeat;opacity:0}.visuals__background:after{position:absolute;top:0;left:0;display:block;content:"";background:#000;opacity:.6;width:100%;height:100%}.visuals__backgroundLayer{position:absolute;top:0;left:0;background-size:cover;background-position:50%;background-repeat:no-repeat}.visuals__backgroundLayerBottom{filter:blur(2px)}.visuals__backgroundLayerTop{filter:blur(8px);opacity:.9}.visuals.background .visuals__background,.visuals__item.visible{opacity:1}',""])},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,n,i,s){var o,a=null!=t?t:e.nullContext||{},r=n.helperMissing,l="function",u=e.escapeExpression;return'  <div class="visuals__item g-transition-opacity" style="background-image: url('+u((o=null!=(o=n.visual_url||(null!=t?t.visual_url:t))?o:r,typeof o===l?o.call(a,{name:"visual_url",hash:{},data:s}):o))+');" data-timestamp="'+u((o=null!=(o=n.entry_time||(null!=t?t.entry_time:t))?o:r,typeof o===l?o.call(a,{name:"entry_time",hash:{},data:s}):o))+'"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){var o;return(null!=(o=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.visuals:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?o:"")+'<div class="visuals__background g-transition-opacity">\n  <div class="visuals__backgroundLayer visuals__backgroundLayerBottom g-box-full"></div>\n  <div class="visuals__backgroundLayer visuals__backgroundLayerTop g-box-full"></div>\n</div>\n'},useData:!0})},function(e,t,n){function i(e){var t=null;switch(e){case o.USER_SOUNDS:t=s.get("widgetParams").show_reposts?null:"track_count";break;case o.PLAYLIST:t="track_count";break;case o.USER_FAVORITES:t="likes_count"}return t}var s=n(219),o=n(320),a=n(397),r=n(281);e.exports=r.extend(a,{css:n(452),template:n(453),className:"soundsTotal sc-font sc-pointer",trackCountProperty:null,setup:function(e){this.trackCountProperty=i(e.resource_type),this.trackCountProperty&&(this.requiredAttributes=[this.trackCountProperty])},renderDecorate:function(){this.toggleState("hidden",!(this.trackCountProperty&&this.model.get(this.trackCountProperty)>0))},getTemplateData:function(){return{track_count:this.model.get(this.trackCountProperty)}}})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".soundsTotal{width:80px;height:80px;padding:12px;overflow:hidden;background:rgba(0,0,0,.8);border-radius:50%;color:#fff;font-weight:100;text-align:center;text-transform:uppercase}.soundsTotal.hidden{display:none}.soundsTotal__number{font-size:26px;line-height:1.25}.soundsTotal__tracks{font-size:14px;line-height:1.25}@media (max-height:350px){.soundsTotal{width:50px;height:50px;padding:8px}.soundsTotal__number{font-size:16px}.soundsTotal__tracks{font-size:9px;font-family:Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif}}",""])},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,i,s,o){var a=null!=t?t:e.nullContext||{},r=i.helperMissing,l=e.escapeExpression;return'<div class="soundsTotal__number sc-font-tabular">'+l((n(454)||t&&t.$shortnumber||r).call(a,null!=t?t.track_count:t,{name:"$shortnumber",hash:{},data:o}))+'</div>\n<div class="soundsTotal__tracks">'+l((n(456)||t&&t.$tp||r).call(a,null!=t?t.track_count:t,"track","tracks",{name:"$tp",hash:{},data:o}))+"</div>\n"},useData:!0})},function(e,t,n){var i=n(455);e.exports=i.shorten},function(e,t){function n(e){var t=e<100?10:1;return Math.floor(e*t)/t}e.exports={format:function(e){return"number"!=typeof e&&(e=parseInt(e,10)),e!==e?"":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},shorten:function(e){var t,i=1e3;return[{limit:Math.pow(i,1),unit:""},{limit:Math.pow(i,2),unit:"K"},{limit:Math.pow(i,3),unit:"M"},{limit:Math.pow(i,4),unit:"B"}].some(function(s){return e<s.limit&&(t=n(e/(s.limit/i))+s.unit),!!t}),t}}},function(e,t,n){function i(e,t,n,i){return o.tp(t,n,e,i.hash,{comment:i.hash._comment,context:i.hash._context})}function s(e,t){return o.tp(a.cleanBlockText(t.fn()),a.cleanBlockText(t.inverse()),e,t.hash,{comment:t.hash._comment,context:t.hash._context})}var o=n(259),a=n(332);e.exports=function(){var e=arguments.length;if(4===e)return i.apply(null,arguments);if(2===e)return s.apply(null,arguments);throw new Error("Invalid signature to tp helper, expected 4 or 2 arguments, got: "+e)}},function(e,t,n){var i=n(458),s=n(462);e.exports=i.extend(s)},function(e,t,n){var i=n(459);e.exports=i.extend({template:n(460),css:n(461),className:"thinProgressbar sc-pointer",colorCustomizable:!0,updatePlayed:function(){this.playedProgress&&(this.$$("played")[0].style.width=100*this.playedProgress+"%")}})},function(e,t,n){(function(t){var i=n(217),s=n(368),o=n(281),a=n(407),r=40;e.exports=o.extend({ModelClass:s,_lastContainerSize:-1,_throttleTime:0,_throttleTimeout:0,setup:function(){this.loadedProgress=this._getLoadedProgress(),this.playedProgress=this._getPlayedProgress(),this.isFullyLoaded=!1,i.bindAll(this,"onAudioFinish","updateProgressBar","rethrottle","onInitialPlay","onAudioPlay","onAudioPause","timedUpdate"),a.on("resize:debounced",this.rethrottle,this),this.model.on("finish",this.onAudioFinish).on("time",this.onInitialPlay).on("seeked",this.updateProgressBar)},dispose:function(){this.model.off("finish",this.onAudioFinish).off("time",this.onInitialPlay).off("seeked",this.updateProgressBar),a.off("resize:debounced",this.rethrottle,this)},renderDecorate:function(){this.updateProgressBar(),this.model.on("play",this.onAudioPlay).on("pause",this.onAudioPause),this.model.isPlaying()&&(this._throttleTime||this.rethrottle(),this._throttleTimeout||this.timedUpdate())},teardown:function(){this.stopTimedUpdates(),this.model.off("play",this.onAudioPlay).off("pause",this.onAudioPause)},onInitialPlay:function(){this.model.off("time",this.onInitialPlay),this.updateProgressBar()},onAudioPause:function(){this.stopTimedUpdates()},onAudioPlay:function(){this._throttleTime||this.rethrottle(),this._throttleTimeout||this.timedUpdate()},rethrottle:function(){if(!this.disposed){var e,t,n=this.el.clientWidth;n!==this._lastContainerSize&&(this._lastContainerSize=n,e=this.model.duration(),0===n?(this._throttleTime=0,t=this.whenInserted(),"pending"===t.state()&&t.done(this.rethrottle)):this._throttleTime=Math.max(r,Math.floor(e/n)))}},updateLoaded:t.noop,updatePlayed:t.noop,onAudioFinish:function(){this.updateProgressBar()},updateProgressBar:function(){this.disposed||(this.playedProgress=this._getPlayedProgress(),this.isFullyLoaded||(this.loadedProgress=this._getLoadedProgress(),this.isFullyLoaded=1===this.loadedProgress,this.updateLoaded()),this.updatePlayed())},_getLoadedProgress:function(){return this.model.loadProgress()},_getPlayedProgress:function(){return this.model.progress()},timedUpdate:function(){var e,t=this._throttleTime;this.updateProgressBar(),e=Math.max(r,t&&t-this.model.currentTime()%t),this._throttleTimeout=setTimeout(this.timedUpdate,e)},stopTimedUpdates:function(){clearTimeout(this._throttleTimeout),this._throttleTimeout=null}})}).call(t,n(1))},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){return'<div class="thinProgressbar__layer sc-background-dark"></div>\n<div class="thinProgressbar__layer thinProgressbar__played"></div>\n'},useData:!0})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,'.thinProgressbar{height:3px;width:100%;position:relative}.thinProgressbar:after{content:"";display:block;position:absolute;height:11px;width:100%;top:-4px;left:0}.thinProgressbar__layer{position:absolute;height:100%;width:100%}.thinProgressbar__played{width:0;background-color:$mainColor}',""])},function(e,t,n){(function(t){function i(e){this.model.seek(s.call(this,e)),this.onSeek()}function s(e){var t;return t=(e-l.call(this).left)/r.call(this),Math.floor(t*this.model.duration())}function o(e){var t=e.originalEvent.pageX,n=e.originalEvent.pageY,i=l.call(this);return t>=i.left&&t<=i.right&&n>=i.top&&n<=i.bottom}function a(e){var n=e?"on":"off";t(window)[n]("resize",this.onWindowResize),this.model[n]("play",this.onPlay,this)[n]("pause",this.onPause,this)}function r(){return this.width=this.width||this.$el.width(),this.width}function l(){var e=this.$el.offset();return e.right=e.left+this.$el.width(),e.bottom=e.top+this.$el.height(),e}function u(){return this.model.loadProgress()*r.call(this)}var c=n(217),d=n(368),h=n(234),p=n(219),f=n(233),m=n(225),g=p.get("appView").$el,v=t(document),_=500,b=50,x={CLICK:"click:scrubber",MOUSE_MOVE:"mousemove:scrubber",MOUSE_ENTER:"mouseenter:scrubber",MOUSE_LEAVE:"mouseleave:scrubber"},w=f.touch?"touchend":"mouseup",y=f.touch?"touchstart":"mousedown",k=f.touch?"touchmove":"mousemove";e.exports=new m({applyTo:function(e){var t=e.constructor;c.extend(t,{Events:x}),e.events=e.events||{},e.events[y]="onPointerDown",e.events[k]="onPointerMove",e.states=c.extend({},e.states,{"selection-disabled":function(e){e?(document.onselectstart=function(){return!1},g.addClass("sc-selection-disabled")):(document.onselectstart=null,g.removeClass("sc-selection-disabled"))}})},before:{setup:function(){this.scrubbingEnabled=!0,this.scrub=c.throttle(this.scrub.bind(this),b),this.unscrub=this.unscrub.bind(this),this.onWindowResize=c.debounce(this.onWindowResize.bind(this),100),a.call(this,!0)},dispose:function(){a.call(this,!1)},renderDecorate:function(){this.width=this.coord=null}},defaults:{ModelClass:d,width:null,coord:null,onWindowResize:function(){this.rerender()},onPlay:function(){this.scrubbingEnabled=!1,c.delay(function(){this.scrubbingEnabled=!0}.bind(this),_)},onPause:function(){this.scrubbingEnabled=!1},onSeek:t.noop,onPointerDown:function(e){this.trigger(x.CLICK),this.scrubbingEnabled&&this.model.isPlaying()?(i.call(this,e.originalEvent.pageX),v.on(k,this.scrub).on(w,this.unscrub)):h.toggle(this.model,{userAction:!0})},onPointerMove:function(e){var t=this.model.isPlaying(),n=e.originalEvent.pageX-l.call(this).left;!this.scrubbingEnabled||!t||n>u.call(this)||n<=0||this.hasHoverIntent&&!this._isEntered||this.trigger(x.MOUSE_MOVE,n-1)},scrub:function(e){return o.call(this,e)?(this.toggleState("selection-disabled",!0),void i.call(this,e.originalEvent.pageX)):v.trigger(w)},unscrub:function(){this.toggleState("selection-disabled",!1),v.off(k,this.scrub).off(w,this.unscrub),f.touch&&this.trigger(x.MOUSE_LEAVE)}}})}).call(t,n(1))},function(e,t,n){function i(){this.disposed||this.toggleState("related",!!this.relatedSounds.length).toggleState("compact",this.$el.height()<=300).toggleState("visible",!0)}function s(e){e.preventDefault();var t=o(this.options.sound_id);l.setSource(t),l.play(t.at(0),{userAction:!0})}function o(e){return new r(null,{resource_id:e})}var a=n(281),r=n(464),l=n(234);e.exports=a.extend({defaults:{sound_id:null},template:n(465),css:n(480),className:"blockedSound g-transition-opacity",events:{"click .blockedSound__relatedSoundsLink":s},setup:function(e){this.relatedSounds=o(e.sound_id)},dispose:function(){this.relatedSounds.release()},renderDecorate:function(){this.relatedSounds.fetch().done(i.bind(this)),this.whenInserted(i.bind(this))},getTemplateData:function(e){return e.getRelatedSounds=o,e}})},function(e,t,n){function i(){return Math.floor(1e8*Math.random())}var s=n(219),o=n(370),a=null;e.exports=o.extend({audioSourceVersion:null,baseUrl:function(){var e=s.get("me").id||null;e||a||(a=i());var t={user_id:e,anon_user_id:e?null:a};return this.getEndpointUrl("relatedTracks",{id:this.options.resource_id},t)},getInfo:function(){return{type:"recommender",version:this.audioSourceVersion}},parse:function(e){return this.audioSourceVersion=e.version||"no_version",o.prototype.parse.apply(this,arguments)}})},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,i,s,o){var a,r=null!=t?t:e.nullContext||{},l=i.helperMissing,u=e.escapeExpression;return'<div class="blockedSound__placeholder"></div>\n<div class="blockedSound__content">\n  <div class="blockedSound__icon"></div>\n  <div class="blockedSound__text sc-truncate sc-text-verylight">\n    <p>\n      '+u((n(331)||t&&t.$t||l).call(r,"This track is not available in your country.",{name:"$t",hash:{_context:"sound"},data:o}))+'\n    </p>\n    <a class="blockedSound__relatedSoundsLink sc-text-verylight sc-link-verylight" href="#">\n      '+u((n(331)||t&&t.$t||l).call(r,"Play related tracks",{name:"$t",hash:{_context:"sound"},data:o}))+'\n    </a>\n  </div>\n</div>\n<div class="blockedSound__relatedSounds">\n  <div class="blockedSound__relatedSoundsTitle sc-truncate sc-text-verylight">\n    '+u((n(331)||t&&t.$t||l).call(r,"Play related tracks",{name:"$t",hash:{_context:"sound"},data:o}))+"\n  </div>\n  "+u((n(366)||t&&t.$view||l).call(r,n(466),{name:"$view",
hash:{getRelatedSounds:null!=t?t.getRelatedSounds:t,resource_id:null!=(a=null!=t?t._options:t)?a.sound_id:a},data:o}))+"\n</div>\n\n"},useData:!0})},function(e,t,n){(function(t){function i(){var e=t(window).height();this.toggleState("relatedVisible",e>200),s.call(this)}function s(){var e=o.call(this);this.$el.css({"max-height":e.height}),this.$(this.getListItemSelector()).each(function(t,n){n.style.width=e.width,n.style.height=e.height})}function o(){var e=this.$el.width(),n=Math.ceil(e/h),i=Math.floor((e-(n-1)*d)/n);return{width:i+"px",height:Math.min(t(window).height()-(this.$el.position().top+p+f),i)+"px"}}var a=n(217),r=n(467),l=n(468),u=n(471),c=n(407),d=10,h=200,p=60,f=40;e.exports=r.extend({className:"relatedVisualSounds sc-clearfix",itemClassName:"relatedVisualSounds__item sc-pointer",css:n(479),Subview:u,defaults:{maxDisplay:0,getRelatedSounds:null},states:{relatedVisible:"relatedVisible"},setup:function(e){a.isFunction(e.getRelatedSounds)?this.collection=e.getRelatedSounds(e.resource_id):this.collection=new l(null,{resource_id:e.resource_id}),this.collection.setLimit(20),c.on("resize:debounced",i,this)},dispose:function(){c.off("resize:debounced",i,this)},renderDecorate:function(){r.prototype.renderDecorate.apply(this,arguments),this.whenInserted().done(i.bind(this))},getListItemAttributes:function(){return{style:o.call(this)}}})}).call(t,n(1))},function(e,t,n){(function(t){function i(){var e=u.pluck(this.subviews,"model");return this.collection.find(function(t){return e.indexOf(this.getSubviewModel(t))===-1},this)}function s(e){var t,n,i=[];return u.each(e,function(e,s){t=s+'="',n=[],u.isObject(e)?u.each(e,function(e,t){n.push(t+":"+e)}):n.push(e),i.push(t+n.join(";")+'"')}),i.join(" ")}function o(){return this.getDesiredNumItems()-(this.needsReadMoreView()?1:0)}function a(){var e,t,n=o.call(this);if(n)for(e=this.getLength();e-- >n;)t=this.getListItemView(this.collection.at(n)),t&&(this.removeListItemFromDOM(t,{animations:!1,index:n}),this.removeSubview(t))}function r(){return this.hasData()&&this.collection&&0===this.collection.length&&this.collection.isFullyPopulated()}function l(e){return function(t){return t instanceof e}}var u=n(217),c=n(281),d=n(285);e.exports=c.extend({emptyTemplate:null,defaults:{minDisplay:0,maxDisplay:3,inverted:!1,showReadMore:!1},Subview:null,subviewArgs:{},ReadMoreView:null,readMoreViewArgs:null,listTagName:"ul",listClassName:"sc-list-nostyle sc-clearfix",itemTagName:"li",itemClassName:"",animations:{},template:function(){return""},_isShowingEmpty:!1,_listElement:null,_desiredLength:null,_setup:function(e){c.prototype._setup.call(this,e),this._desiredLength=Math.max(e.minDisplay,e.maxDisplay)||1/0},renderDecorate:function(){this.createListElement()&&this.syncItems()},createListElement:function(){var e,n=this.getListContainer();return n.length&&!this._listElement&&(e=window.document.createElement(this.listTagName),this.listClassName&&(e.className=this.listClassName),n.append(e),this.resetElementCache(),this._listElement=t(e)),this._listElement},syncItems:function(){var e,t=this.getModelsToRender(),n=this.getLength(),i=Math.min(o.call(this),t.length);if(this.removeReadMoreView(),n<i)for(e=n;e<i;++e)this.createAndInsertListItemView(t[e],-1);else n>i&&a.call(this);this.appendReadMoreView()},getReadMoreViews:function(){return this.subviews.filter(l(this.ReadMoreView))},needsReadMoreView:function(){return this.options.showReadMore&&this.getModelsToRender().length>=this.getDesiredNumItems()},appendReadMoreView:function(){var e,t;this.needsReadMoreView()&&(e=this.getLength(),t=this.getSubviewModel(this.getModelsToRender()[e]),this.createAndInsertReadMoreView(t,e))},removeReadMoreView:function(){var e=this;this.options.showReadMore&&this.getReadMoreViews().forEach(function(t){e.removeSubview(t),t._dispose()})},createAndInsertReadMoreView:function(e,t){var n=this.addSubview(new this.ReadMoreView(u.assign({alreadyShown:t,Subview:this.Subview,subviewArgs:this.getSubviewArgs(e)},this.readMoreViewArgs))).render();this.addListItemToDOM(n)},getDesiredNumItems:function(){return this._desiredLength},getLength:function(){return this.getListItemViews().length},setDisplayedItems:function(e){e=Math.min(e,this.options.maxDisplay||1/0),e!==this._desiredLength&&(this._desiredLength=e,this.syncItems())},_teardown:function(){this._listElement&&(this._listElement.remove(),this._listElement=null),c.prototype._teardown.call(this)},getModelsToRender:function(){return this.collection.models},createAndInsertListItemView:function(e,t){var n=this.addListItemSubview(e);n.render(),this.addListItemToDOM(n,u.isNumber(t)?t:-1),a.call(this)},getTemplate:function(e){var t=this.getEmptyTemplate();return t&&this.useEmptyTemplate()?t:c.prototype.getTemplate.apply(this,arguments)},getEmptyTemplate:function(){return this.emptyTemplate},useEmptyTemplate:function(){return r.call(this)},getListContainer:function(){return this.$el},getListElement:function(){return this._listElement||t()},getListItemView:function(e){var t=this.getSubviewModel(e);return u.find(this.subviews,function(e){return e.model===t})},getListItemViews:function(){return this.subviews.filter(l(this.Subview))},getSubviewArgs:function(e){return u.defaults({resource_id:e.resource_id,resource_type:e.resource_type},this.subviewArgs)},getSubviewModel:u.identity,getListItemAttributesData:function(e){return e.model?e.model.toJSON():{}},getListItemAttributes:function(){return{}},getListItemAttributesString:function(e){var t=this.getListItemAttributes(e);return new d.SafeString(s(t))},onAdd:function(e,t,n){if(!this.disposed){var i=t.indexOf(e),s=o.call(this),a=i>=0&&i<s||i<0&&this.collection.length<=s;this.removeReadMoreView(),a&&this.createAndInsertListItemView(e,i),this.appendReadMoreView()}},onRemove:function(e,t,n){var i=this.getListItemView(e);i&&(this.removeReadMoreView(),this.removeSubview(i),this.removeListItemFromDOM(i,n.index),this.appendReadMoreView())},onCollectionChange:function(e,t){var n=r.call(this);c.prototype.onCollectionChange.apply(this,arguments),this._isShowingEmpty!==n&&this.rerender(),this._isShowingEmpty=n},addListItemSubview:function(e){var t=this.getSubviewArgs(this.getSubviewModel(e));return this.addSubview(new this.Subview(t))},getListItemViewByEvent:function(e){var n,i=t(e.target).closest(this.getListItemSelector());return i.length&&(n=u.find(this.subviews,function(e){return e.el===i.children()[0]})),n},getListItemSelector:function(){return"."+this.itemClassName.trim().split(/\s+/).join(".")},createSubviewWrapper:function(e){var n,i=this.getListItemAttributesString(this.getListItemAttributesData(e));return i=i.toString().length?" "+i:"",n=t("<"+this.itemTagName+' class="'+this.itemClassName+'"'+i+">")},getSubviewWrapper:function(e){return e.$el.parent()},addListItemToDOM:function(e,t){var n,i,s=this.getListElement(),o=this.getSubviewWrapper(e),a=this.options.inverted;o.length||(o=this.createSubviewWrapper(e),o.append(e.el)),t===-1||t>=this.getLength()-1||void 0===t?s[a?"prepend":"append"](o):0===t?s[a?"append":"prepend"](o):(i=this.getListItemView(this.collection.at(t-1)),i&&(n=this.getSubviewWrapper(i),o[a?"insertBefore":"insertAfter"](n))),this.resetElementCache()},removeListItem:function(e){var t=this.getListItemView(e);t&&this.removeListItemFromDOM(t)},removeListItemFromDOM:function(e,t){var n,s=this.getSubviewWrapper(e),o=this.options.maxDisplay,a=!t||t.animations!==!1;n=function(){var t,n,a,r=-1;s.detach(),e._dispose(),a=!this._disposed&&o&&o<=this.collection.length&&this.getLength()<o,a&&(n=i.call(this),t=this.addListItemSubview(n),t.render(),this.addListItemToDOM(t,r))}.bind(this),a&&this.animations.remove?this.addDeferred(window.setTimeout(s.fadeOut.bind(s,"slow",n),this.animations.remove.delay)):n(),this.resetElementCache()},detachSubviewFromDOM:function(e){this.getSubviewWrapper(e).detach()},appendDOMElement:function(e){var t=this.getListContainer();t&&t[this.options.inverted?"prepend":"append"](e),this.resetElementCache()},getCollectionData:function(){return[]}})}).call(t,n(1))},function(e,t,n){(function(t){function i(e){function n(){return c.prototype.fetch.call(o,e).fail(i.reject).done(i.resolve)}var i=t.Deferred(),o=this,u=o.options.resource_id;return e=e?a.clone(e):{},l.getUserBySoundId(u).done(function(t){t.getPlan()===r.Plans.PRO_UNLIMITED?o.isFullyPopulated()?i.resolve():s(t.id,u).done(function(t){t.length>=p?(o.hasOwnSounds=!0,o.next_href=!1,o.lastFetchTime=Date.now(),o[e.add?"add":"reset"](t,e),i.resolve()):n()}).fail(i.reject):n()}),i}function s(e,n){var i=t.Deferred();return t.whenAll(h.map(o.bind(null,e))).done(function(){var e=a.chain(arguments).flatten().uniq().value(),t=e.filter(function(e){return e.id!==n});i.resolve(t)}),i}function o(e,n){var i,s=t.Deferred();return i=new n(null,{resource_id:e}),i.setLimit(20),i.fetch({add:!!i.length}).always(function(){s.resolve.apply(s,i.models),i.release()}),s}var a=n(217),r=n(359),l=n(337),u=n(469),c=n(464),d=n(470),h=[d,u],p=2;e.exports=c.extend({fetch:function(e){return i.call(this,e)},hasOwnSounds:!1,getInfo:function(){return{type:this.hasOwnSounds?"own-related-sounds":"recommender",version:this.audioSourceVersion}}})}).call(t,n(1))},function(e,t,n){var i=n(370);e.exports=i.extend({baseUrl:function(){return this.getEndpointUrl("userTracks",{id:this.options.resource_id})}})},function(e,t,n){function i(e){return"track"===e.kind}var s=n(370);e.exports=s.extend({baseUrl:function(){return this.getEndpointUrl("spotlightItems",{id:this.options.resource_id})},parse:function(e){return e.collection.filter(i)}})},function(e,t,n){var i=n(337),s=n(281);e.exports=s.extend({template:n(472),css:n(478),ModelClass:i,className:"visualSoundBadge g-box-full",requiredAttributes:["permalink","permalink_url"],getTemplateData:function(e){return e.shareUrl=this.model.getShareURL(),e}})},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,i,s,o){var a,r=null!=t?t:e.nullContext||{},l=i.helperMissing,u=e.escapeExpression;return'<a href="'+u((a=null!=(a=i.shareUrl||(null!=t?t.shareUrl:t))?a:l,"function"==typeof a?a.call(r,{name:"shareUrl",hash:{},data:o}):a))+'" target="_blank">\n  '+u((n(366)||t&&t.$view||l).call(r,n(380),{name:"$view",hash:{size:200,stretch:!0,resource_type:null!=t?t._resource_type:t,resource_id:null!=t?t._resource_id:t},data:o}))+'\n  <div class="visualSoundBadge__title">\n    '+u((n(366)||t&&t.$view||l).call(r,n(473),{name:"$view",hash:{show_link:!1,visual:!0,resource_type:null!=t?t._resource_type:t,resource_id:null!=t?t._resource_id:t},data:o}))+"\n  </div>\n</a>\n"},useData:!0})},function(e,t,n){function i(){return this.options.visual&&this.isSound&&this.model.isExplicit()}function s(e){var t=e?"on":"off";_[t]("resize:x:debounced",o,this)}function o(){a.call(this)}function a(){if(i.call(this)){var e=15,t=this.$el.width()-this.$$("explicit").width()-e;this.$$("h2Text")[0].style.maxWidth=t+"px"}}function r(){p.trigger(g.UI.CREATOR_LINK_CLICKED,this.model)}function l(){p.trigger(g.UI.TITLE_LINK_CLICKED,this.model),this.isSound&&p.trigger("sound:deeplink",this.$$("h2")[0],this.model)}function u(){var e,t,n,i,s=this.options.resource_type,o=this.model;switch(s){case h.SOUND:case h.PLAYLIST:e=o.get("user").username,n=o.get("user").permalink_url,t=o.get("title"),i=this.getShareURL();break;case h.USER_SOUNDS:case h.USER_FAVORITES:case h.USER_SPOTLIGHT:switch(e=o.get("username"),n=o.get("permalink_url"),s){case h.USER_FAVORITES:t=f.t("Liked tracks");break;case h.USER_SPOTLIGHT:t=f.t("Featured tracks");break;default:t=f.t("Latest tracks")}i=this.getShareURL()}return{h1Text:e,h1Link:n,h2Text:t,h2Link:i}}var c=n(217),d=n(219),h=n(320),p=n(229),f=n(259),m=n(397),g=n(248),v=n(281),_=n(407);e.exports=v.extend(m,{template:n(474),css:n(477),className:"title sc-truncate",defaults:{visual:!1,show_link:!0,inline:!1,inverse:!1},events:{"click a.title__h1":r,"click a.title__h2":l},requiredAttributes:{user:["permalink_url","username"],track:["permalink_url","title","user","publisher_metadata"],playlist:["permalink_url","title","user"]},setup:function(){s.call(this,!0)},dispose:function(){s.call(this,!1)},renderDecorate:function(){this.whenInserted().done(a.bind(this))},getTemplateData:function(){var e=u.call(this),t=d.get("widgetParams"),n=!this.isSound||t.show_user,s=this.options,o=s.show_link&&!this.isPrivate()&&e.h2Link;return c.extend(e,{resource_id:this.model.resource_id,visual:s.visual,inline:s.inline,showH1:n,inverse:s.inverse,showExplicit:i.call(this),h1TagName:s.show_link?"a":"span",h2TagName:o?"a":"span",showH2Link:o,inlineTitle:(n?e.h1Text+" – ":"")+e.h2Text,h2Link:o?e.h2Link:""})}})},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,n,i,s){var o,a,r=null!=t?t:e.nullContext||{},l=n.helperMissing,u="function",c=e.escapeExpression;return(null!=(o=n["if"].call(r,null!=t?t.showH2Link:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?o:"")+'     <span title="'+c((a=null!=(a=n.inlineTitle||(null!=t?t.inlineTitle:t))?a:l,typeof a===u?a.call(r,{name:"inlineTitle",hash:{},data:s}):a))+'" class="'+(null!=(o=n["if"].call(r,null!=t?t.inverse:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?o:"")+' title__line">'+c((a=null!=(a=n.inlineTitle||(null!=t?t.inlineTitle:t))?a:l,typeof a===u?a.call(r,{name:"inlineTitle",hash:{},data:s}):a))+"</span>\n"+(null!=(o=n["if"].call(r,null!=t?t.showH2Link:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?o:"")},2:function(e,t,n,i,s){var o,a,r=null!=t?t:e.nullContext||{},l=n.helperMissing,u="function",c=e.escapeExpression;return'    <a href="'+c((a=null!=(a=n.h2Link||(null!=t?t.h2Link:t))?a:l,typeof a===u?a.call(r,{name:"h2Link",hash:{},data:s}):a))+'" title="'+c((a=null!=(a=n.h2Text||(null!=t?t.h2Text:t))?a:l,typeof a===u?a.call(r,{name:"h2Text",hash:{},data:s}):a))+'" class="sc-link-'+(null!=(o=n["if"].call(r,null!=t?t.inverse:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?o:"")+' title__line">\n'},3:function(e,t,n,i,s){return"white"},5:function(e,t,n,i,s){return"dark"},7:function(e,t,n,i,s){return"title__white"},9:function(e,t,n,i,s){return"    </a>\n"},11:function(e,t,n,i,s){var o,a,r=null!=t?t:e.nullContext||{},l=n.helperMissing,u="function",c=e.escapeExpression;return(null!=(o=n["if"].call(r,null!=t?t.showH1:t,{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?o:"")+"  <"+c((a=null!=(a=n.h2TagName||(null!=t?t.h2TagName:t))?a:l,typeof a===u?a.call(r,{name:"h2TagName",hash:{},data:s}):a))+' href="'+c((a=null!=(a=n.h2Link||(null!=t?t.h2Link:t))?a:l,typeof a===u?a.call(r,{name:"h2Link",hash:{},data:s}):a))+'" title="'+c((a=null!=(a=n.h2Text||(null!=t?t.h2Text:t))?a:l,typeof a===u?a.call(r,{name:"h2Text",hash:{},data:s}):a))+'" class="title__h2 sc-link-dark sc-truncate g-text-shadow '+(null!=(o=n["if"].call(r,null!=t?t.visual:t,{name:"if",hash:{},fn:e.program(17,s,0),inverse:e.noop,data:s}))?o:"")+' title__line">\n'+(null!=(o=n["if"].call(r,null!=t?t.showExplicit:t,{name:"if",hash:{},fn:e.program(19,s,0),inverse:e.program(21,s,0),data:s}))?o:"")+"  </"+c((a=null!=(a=n.h2TagName||(null!=t?t.h2TagName:t))?a:l,typeof a===u?a.call(r,{name:"h2TagName",hash:{},data:s}):a))+">\n"},12:function(e,t,n,i,s){var o,a,r=null!=t?t:e.nullContext||{},l=n.helperMissing,u="function",c=e.escapeExpression;return"    <"+c((a=null!=(a=n.h1TagName||(null!=t?t.h1TagName:t))?a:l,typeof a===u?a.call(r,{name:"h1TagName",hash:{},data:s}):a))+' href="'+c((a=null!=(a=n.h1Link||(null!=t?t.h1Link:t))?a:l,typeof a===u?a.call(r,{name:"h1Link",hash:{},data:s}):a))+'" title="'+c((a=null!=(a=n.h1Text||(null!=t?t.h1Text:t))?a:l,typeof a===u?a.call(r,{name:"h1Text",hash:{},data:s}):a))+'" class="title__h1 sc-truncate g-text-shadow '+(null!=(o=n["if"].call(r,null!=t?t.visual:t,{name:"if",hash:{},fn:e.program(13,s,0),inverse:e.program(15,s,0),data:s}))?o:"")+' title__line">\n      '+c((a=null!=(a=n.h1Text||(null!=t?t.h1Text:t))?a:l,typeof a===u?a.call(r,{name:"h1Text",hash:{},data:s}):a))+"\n    </"+c((a=null!=(a=n.h1TagName||(null!=t?t.h1TagName:t))?a:l,typeof a===u?a.call(r,{name:"h1TagName",hash:{},data:s}):a))+">\n    <br>\n"},13:function(e,t,n,i,s){return"sc-text-verylight sc-link-verylight g-text-visual"},15:function(e,t,n,i,s){return"sc-link-medium"},17:function(e,t,n,i,s){return"g-text-visual"},19:function(e,t,i,s,o){var a,r=null!=t?t:e.nullContext||{},l=i.helperMissing,u=e.escapeExpression;return'      <span class="sc-media">\n        <span class="sc-media-left sc-truncate title__h2Text">'+u((a=null!=(a=i.h2Text||(null!=t?t.h2Text:t))?a:l,"function"==typeof a?a.call(r,{name:"h2Text",hash:{},data:o}):a))+'</span>\n        <span class="sc-media-content title__explicit">'+u((n(366)||t&&t.$view||l).call(r,n(475),{name:"$view",hash:{resource_id:null!=t?t.resource_id:t},data:o}))+"</span>\n      </span>\n"},21:function(e,t,n,i,s){var o;return'      <span class="title__h2Text">'+e.escapeExpression((o=null!=(o=n.h2Text||(null!=t?t.h2Text:t))?o:n.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{name:"h2Text",hash:{},data:s}):o))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){var o;return null!=(o=n["if"].call(null!=t?t:e.nullContext||{},null!=t?t.inline:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(11,s,0),data:s}))?o:""},useData:!0})},function(e,t,n){var i=n(281);e.exports=i.extend({css:n(476),tagName:"span",className:"explicitBadge sc-border-dark sc-text-light sc-font-light",template:function(){return"EXPLICIT"}})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".explicitBadge{display:inline-block;padding:0 1px;font-size:10px;line-height:12px;height:12px;text-transform:uppercase}",""])},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".title{font-size:12px;line-height:16px}.title__h1,.title__h2{display:inline-block;max-width:100%;vertical-align:bottom;outline-offset:-1px;font-family:Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight:100}.title__h1{margin-bottom:1px;text-decoration:underline}.title__h1.g-text-visual{padding-top:2px;padding-bottom:2px;margin-bottom:2px}.title__h1:hover{color:#999}.title__white{color:#fff}.title__h2{font-size:15px;line-height:18px}.title__h2.g-text-visual{padding-top:3px;padding-bottom:3px}.title__h2Text{max-width:80%}.title__line:focus{outline:none;text-decoration:underline}",""])},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".visualSoundBadge{position:relative;overflow:hidden}.visualSoundBadge__title{position:absolute;top:5px;left:5px;right:5px}",""])},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".relatedVisualSounds{position:relative;overflow:hidden;width:100%;height:100%;display:none}.relatedVisualSounds.relatedVisible{display:block}.relatedVisualSounds__item{float:left;margin-left:10px}.relatedVisualSounds__item:first-child{margin-left:0}",""])},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".blockedSound{height:100%;padding:10px 10px 25px;background:rgba(0,0,0,.6);opacity:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between}.blockedSound__placeholder{height:50px}.blockedSound__content{text-align:center;z-index:100}.blockedSound__icon{background:url("+n(481)+") 50% no-repeat;background-size:45px 56px;width:45px;height:56px;margin:0 0 10px;display:inline-block}.blockedSound__relatedSounds{position:relative;height:150px;overflow:hidden;visibility:hidden}.blockedSound__relatedSoundsLink{display:none;text-decoration:underline}.blockedSound__relatedSoundsTitle{margin-bottom:5px}.blockedSound.related .blockedSound__relatedSounds{visibility:visible}.blockedSound.compact{padding-bottom:0;-ms-flex-pack:center;justify-content:center}.blockedSound.compact .blockedSound__placeholder,.blockedSound.compact .blockedSound__relatedSounds{display:none}.blockedSound.related.compact .blockedSound__relatedSoundsLink{display:inline-block}.blockedSound.compact .blockedSound__content{line-height:30px}.blockedSound.compact .blockedSound__text{display:inline-block;margin:0 0 0 10px;height:50px}.blockedSound.compact .blockedSound__text>p{margin:0;line-height:14px}.blockedSound.visible{opacity:1}",""])},function(e,t,n){e.exports=n.p+"assets/images/geoblock-07f157.png"},function(e,t,n){(function(t){function i(e){var t=e?"on":"off",n=this.isPlaylist?u:this.model;n[t]("play",s,this)}function s(){var e=this.subviews.likeButton,t=this.getState("likeVisible");e&&!t&&(this.model.isPlaying()?(this.$$("buttons").prepend(e.$el),this.toggleState("likeVisible")):e.$el.detach())}var o=n(217),a=n(219),r=n(483),l=n(397),u=n(234),c=n(363),d=n(281),h=a.get("widgetParams");e.exports=d.extend(c,l,{css:n(484),className:"soundHeader",template:n(485),requiredAttributes:{sound:["sharing"],playlist:["sharing"]},defaults:{hide_action_buttons:!1,show_like_button:!0,show_share_button:!0,show_buy_button:!0,show_download_button:!0,show_button_overlay:!1,visual:!1},setup:function(){this.toggleState("visual",this.options.visual),i.call(this,!0)},dispose:function(){i.call(this,!1)},renderDecorate:function(){s.call(this)},getTemplateData:function(){var e=this.options;return e=o.defaults({show_share_button:e.show_share_button&&h.sharing&&this.isShareable(),show_like_button:e.show_like_button&&t.support.cors&&h.liking&&this.isLikeable()&&this.isSound,show_buy_button:e.show_buy_button&&h.buying&&this.isBuyable(),show_download_button:e.show_download_button&&h.download&&this.isDownloadable(),show_snippet_indicator:e.visual&&this.isSound&&r.soundRequiresUpsell(this.model)},e)}})}).call(t,n(1))},function(e,t){function n(e){return e.isSnippetized()&&i(e.get("monetization_model")).length>0}function i(e){switch(e){case"SUB_MID_TIER":return[s.productIds.HIGH_TIER];case"SUB_HIGH_TIER":return[s.productIds.HIGH_TIER];default:return[]}}var s=e.exports={monetizationModelToProductIds:i,soundRequiresUpsell:n,productIds:{HIGH_TIER:"go"}}},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".soundHeader{display:-ms-flexbox;display:flex;width:100%}.soundHeader__playButton{-ms-flex-negative:0;flex-shrink:0;margin:2px 5px 1px 1px}.soundHeader__title{overflow:hidden;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1;margin-top:6px}.soundHeader.visual .soundHeader__title{margin-top:0}.soundHeader__rightRow{-ms-flex-negative:0;flex-shrink:0;margin-left:10px;margin-top:-2px}.soundHeader__logo,.soundHeader__rightRow{position:relative}.soundHeader__logo{height:22px;text-align:right}.soundHeader__actions{float:right}.soundHeader.visual .soundHeader__actions,.soundHeader.visual .soundHeader__skipAdContainer{margin-top:3px}.soundHeader .soundHeader__likeButton{display:none}.soundHeader.likeVisible .soundHeader__likeButton{display:inline-block}.soundHeader.state-medium .soundTitle__title,.soundHeader.state-small .soundTitle__title{position:absolute;left:49px;right:65px}.soundHeader.visual.state-medium .soundTitle__title,.soundHeader.visual.state-small .soundTitle__title{left:59px}.soundHeader.visual .soundHeader__logo{right:-1px}.soundHeader__skipAdContainer{position:absolute;right:0;z-index:1}.soundHeader__snippetIndicator{margin:3px 0 1px}",""])},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,i,s,o){return'    <div class="soundHeader__snippetIndicator g-transition-opacity">\n      '+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},n(486),{name:"$view",hash:{backgroundColor:!0,size:"medium",color:"light"},data:o}))+"\n    </div>\n"},3:function(e,t,n,i,s){var o,a=null!=t?t:e.nullContext||{};return'    <div class="soundHeader__skipAdContainer"></div>\n    <div class="soundHeader__actions g-transition-opacity">\n      <div class="sc-button-group sc-button-group-pill soundHeader__buttons">\n'+(null!=(o=n["if"].call(a,null!=t?t.show_like_button:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?o:"")+(null!=(o=n["if"].call(a,null!=t?t.show_buy_button:t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.program(8,s,0),data:s}))?o:"")+"\n"+(null!=(o=n["if"].call(a,null!=t?t.show_share_button:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.noop,data:s}))?o:"")+"      </div>\n    </div>\n"},4:function(e,t,i,s,o){return"          "+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},n(488),{name:"$view",hash:{className:"soundHeader__likeButton",visual:null!=t?t.visual:t,size:"small",key:"likeButton",resource_type:null!=t?t.resource_type:t,resource_id:null!=t?t.resource_id:t},data:o}))+"\n"},6:function(e,t,i,s,o){return"          "+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},n(495),{name:"$view",hash:{visual:null!=t?t.visual:t,size:"small",resource_type:null!=t?t.resource_type:t,resource_id:null!=t?t.resource_id:t},data:o}))+"\n"},8:function(e,t,n,i,s){var o;return null!=(o=n["if"].call(null!=t?t:e.nullContext||{},null!=t?t.show_download_button:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?o:""},9:function(e,t,i,s,o){return"            "+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},n(497),{name:"$view",hash:{visual:null!=t?t.visual:t,size:"small",resource_type:null!=t?t.resource_type:t,resource_id:null!=t?t.resource_id:t},data:o}))+"\n"},11:function(e,t,i,s,o){return"          "+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},n(498),{name:"$view",hash:{className:"soundHeader__shareButton",size:"small",overlay:null!=t?t.show_button_overlay:t,visual:null!=t?t.visual:t,resource_type:null!=t?t.resource_type:t,resource_id:null!=t?t.resource_id:t},data:o}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,s,o){var a,r=null!=t?t:e.nullContext||{},l=i.helperMissing,u=e.escapeExpression;return'<div class="soundHeader__playButton g-transition-opacity">\n  '+u((n(366)||t&&t.$view||l).call(r,n(523),{name:"$view",hash:{resource_type:null!=t?t.resource_type:t,resource_id:null!=t?t.resource_id:t},data:o}))+'\n</div>\n\n<div class="soundHeader__title g-transition-opacity">\n  '+u((n(366)||t&&t.$view||l).call(r,n(473),{name:"$view",hash:{visual:null!=t?t.visual:t,resource_type:null!=t?t.resource_type:t,resource_id:null!=t?t.resource_id:t},data:o}))+"\n"+(null!=(a=i["if"].call(r,null!=t?t.show_snippet_indicator:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?a:"")+'</div>\n\n<div class="soundHeader__rightRow">\n  <div class="soundHeader__logo g-transition-opacity">\n    '+u((n(366)||t&&t.$view||l).call(r,n(526),{name:"$view",hash:{key:"logo",inverse:null!=t?t.visual:t,resource_type:null!=t?t.resource_type:t,resource_id:null!=t?t.resource_id:t},data:o}))+"\n  </div>\n"+(null!=(a=i.unless.call(r,null!=t?t.hide_action_buttons:t,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o}))?a:"")+"</div>\n"},useData:!0})},function(e,t,n){var i=n(259),s=n(281);e.exports=s.extend({css:n(487),className:"snippetIndicator sc-snippet-badge sc-snippet-badge-small",tagName:"span",template:function(){return i.t("Preview",null,{comment:"Audible preview of an track"})},defaults:{color:"grey",backgroundColor:!1,size:"small"},setup:function(e){this.$el.addClass("sc-snippet-badge-"+e.color).addClass("sc-snippet-badge-"+e.size).toggleClass("snippetIndicatorBackgroundActive",e.backgroundColor)}})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".snippetIndicator.snippetIndicatorBackgroundActive{background:rgba(0,0,0,.2)}",""])},function(e,t,n){var i=n(373),s=n(378),o=n(229),a=n(489),r=n(377),l=n(259),u=n(248),c=n(281);e.exports=c.extend(s,a,{className:"sc-button-like likeButton",template:function(){return l.t("Like",null,{context:"button"})},defaults:{resource_id:null},attributes:{title:l.t("Like",null,{context:"button"})},setup:function(){this.model=new r,this.observedAttributes=[this.options.resource_id]},renderDecorate:function(){var e=!!this.model.get(this.options.resource_id),t=e?l.t("Liked",null,{context:"button"}):l.t("Like",null,{context:"button"});this.toggleState("selected",e),this.$el.attr("title",t).html(t)},onClick:function(e){var t=this.options;o.trigger(u.UI.LIKE_BUTTON_CLICKED,this.model),i.like(t.resource_id,t.resource_type,!this.model.get(t.resource_id)),e.preventDefault()}})},function(e,t,n){function i(e){var t=s.call(this),n=this.el.getAttribute("aria-haspopup"),i=this.el.getAttribute("aria-owns");"mouseenter"!==e.type||n&&(!i||document.getElementById(i))?"mouseleave"===e.type&&(this.toggleState("mouseover",!1),t.close()):(this.toggleState("mouseover",!0),t.open())}function s(){var e=this.subviews.tooltip;return e&&e.disposed&&(this.removeSubview(e),e=null),e||(e=o.call(this),this.addSubview(e,"tooltip")),this.subviews.tooltip}function o(){var e=new r({togglerEl:this.el,relativeElement:this.el,domId:this.domId,priorityLevel:r.PriorityLevels.LOW});return e}var a=n(217),r=n(490),l=n(225);e.exports=new l({applyTo:function(e){e.events=a.extend({mouseenter:i,mouseleave:i},e.events)},before:{setup:function(){this.domId=a.uniqueId("tooltip-"),this.$el.attr({"aria-describedby":this.domId})}},after:{renderDecorate:function(){if(this.getState("mouseover")){var e=s.call(this);e.open()}}}})},function(e,t,n){var i=n(491),s=n(281);e.exports=s.extend(i,{template:n(493),css:n(494),className:"tooltip g-overlay sc-selection-disabled",defaults:{margin:11,collision:"fit",text:null},attributes:{role:"tooltip"},setup:function(){var e=this.options;!e.text&&e.relativeElement&&(e.text=e.relativeElement.title,e.relativeElement.removeAttribute("title"))},closeDecorate:function(){this.toggleState("visible",!1)},renderDecorate:function(){this.whenInserted().done(function(){this.toggleState("visible",this.isOpened)}.bind(this))}})},function(e,t,n){(function(t){function i(e){var n=e?"on":"off";c[n](p.OPENED,this.onOverlayOpen,this),t(document)[n]("keydown",this.onDocumentKeydown),document[e?"addEventListener":"removeEventListener"]("click",this.onDocumentClick,!0),t(window)[n]("resize",this.onWindowResize)}function s(e,n){var i=n.element.element,s=n.target.element,o=t(window),a=this.$$("arrow"),r=e.top,l=e.left,u="fixed",c=o.width(),h=o.height(),p=i.outerWidth(),f=i.outerHeight(),m=this.options.margin,g=c-p-this.options.margin,v=this.options.margin,_=h-f-this.options.margin;r=d.clamp(r,v,_),l=d.clamp(l,m,g),this.options.relativeElement&&a.length&&"center top"===this.options.anchor&&(a.css({left:s.offset().left-l+s.outerWidth()/2-a.outerWidth()/2,top:-a.outerHeight()}),r+=a.outerHeight()+3),i.css({position:u,top:r,left:l})}function o(e){var t=a(this),n=a(e);return t<n}function a(e){return e.options.priorityLevel||f.MEDIUM}function r(){return!0}var l=n(217),u=n(492),c=n(229),d=n(228),h=n(225),p={OPENED:"overlay:opened",CLOSED:"overlay:closed"},f={HIGH:1,MEDIUM:2,LOW:3},m=300;e.exports=new h({applyTo:function(e){var t=e.constructor;l.extend(t,{Events:p,PriorityLevels:f}),e.defaults=l.defaults(e.defaults||{},{Subview:null,subviewArgs:null,togglerEl:null,relativeElement:null,relativeElementAnchor:"center bottom",anchor:"center top",offset:"0 0",collision:"flip",width:"auto",minHeight:"auto",domId:null,focusable:!0,margin:0,priorityLevel:null}),e.element2selector=l.extend({},e.element2selector,{"last-tabbable":":tabbable:last","first-tabbable":":tabbable:first"})},before:{setup:function(){l.bindAll(this,"onDocumentClick","onDocumentKeydown","onWindowResize"),i.call(this,!0),this.$el.css({outline:"none"}),this.onPositionComplete=s.bind(this)},dispose:function(){i.call(this,!1),this.close()}},defaults:{template:function(){return""},isOpened:!1,open:function(){this.disposed||this.isOpened||!this.canBeOpened()||(this.isOpened=!0,this.rerender(),this.$el.appendTo(document.body),this.createContentView(),this.position(),this.options.focusable&&this.$el.focus(),this.trigger(p.OPENED),c.trigger(p.OPENED,this))},close:function(e){!this.disposed&&this.isOpened&&(e||this.canBeClosed())&&(this.isOpened=!1,this.$el.detach(),this.closeDecorate(),this.trigger(p.CLOSED))},closeDecorate:t.noop,canBeClosed:r,canBeOpened:r,getContentView:function(){
return this.subviews.contentView},createContentView:function(){if(!this.getContentView()&&this.options.Subview){var e,t=this.options,n=t.Subview,i=l.result(t,"subviewArgs");e=this.addSubview(new n(l.extend({resource_id:t.resource_id,resource_type:t.resource_type},i)),"contentView"),this.$el.attr({tabindex:"-1",id:this.options.domId||l.uniqueId("overlay_")}),this.getOverlayContentEl().append(e.render().el)}},getOverlayContentEl:function(){return this.$el},position:function(){var e=this.options;this.$el.css({width:e.width,minHeight:e.minHeight,position:"fixed"}).position({my:e.anchor,at:e.relativeElementAnchor,of:e.relativeElement,offset:e.offset,collision:e.collision,using:this.onPositionComplete}),this.positionDecorate()},positionDecorate:t.noop,onOverlayOpen:function(e){e.isOpened&&e!==this&&!o.call(this,e)&&this.close(!0)},onDocumentClick:function(e){this.isOpened&&!t(e.target).closest(this.options.togglerEl).length&&(t(e.target).closest(this.$el).length||this.close())},onDocumentKeydown:function(e){if(this.isOpened)if(e.which===u.ESC){this.close();var t=this._parentView&&this._parentView.$el;t&&t.focus()}else if(e.which===u.TAB){if(!e.shiftKey&&e.target===this.getElement("last-tabbable")[0])return this.getElement("first-tabbable").focus(),!1;if(e.shiftKey&&e.target===this.getElement("first-tabbable")[0])return this.getElement("last-tabbable").focus(),!1}},onWindowResize:l.throttle(function(){!this.disposed&&this.isOpened&&this.position()},m)}})}).call(t,n(1))},function(e,t){e.exports={ALT:18,BACKSPACE:8,CTRL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESC:27,HOME:36,INSERT:45,LEFT:37,META:97,PGDOWN:34,PGUP:33,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,COMMA:188}},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){var o;return'<div class="tooltip__arrow g-arrow g-arrow-top"></div>\n<div class="tooltip__content">'+e.escapeExpression(e.lambda(null!=(o=null!=t?t._options:t)?o.text:o,t))+"</div>\n"},useData:!0})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".tooltip{padding:3px 7px;opacity:0;transition:opacity .1s linear;font-size:12px;line-height:15px}.tooltip.visible{opacity:1}",""])},function(e,t,n){var i=n(368),s=n(378),o=n(229),a=n(489),r=n(259),l=n(496),u=n(248),c=n(281);e.exports=c.extend(s,a,{tagName:"a",className:"sc-button-buy",ModelClass:i,requiredAttributes:["purchase_url"],template:function(){return""},renderDecorate:function(){var e="sound"===this.options.resource_type,t=this.model,n=l.getPurchaseTitle(t.toJSON(),e?r.t("Buy",null,{comment:"Buy this track.",context:"button"}):r.t("Buy all",null,{comment:"Buy all tracks.",context:"button"}));this.$el.attr({href:t.get("purchase_url"),title:n}).html(n)},onClick:function(){o.trigger(u.UI.BUY_LINK_CLICKED,this.model)}})},function(e,t){!function(){var t={getPurchaseTitle:function(e,t){var n,i=e.purchase_url,s=this._shops;if(i&&!e.purchase_title)if(s.Flattr.test(i))e.purchase_title="Flattr";else if(s["Getty Images"].test(i))e.purchase_title="License";else{e.purchase_title=t||"Buy";for(n in s)if(s.hasOwnProperty(n)&&s[n].test(i)){e.purchase_title+=" on "+n;break}}return e.purchase_title},getStoreName:function(e){var t,n=e.purchase_url,i=this._shops;if(n)for(var s in i)if(i[s].test(n)){t=s;break}return t},_shops:{Amazon:/ama?zo?n\.(co\.(jp|uk)|com|de|to)/,Beatport:/beatport\.(com|it)/,iTunes:/apple\.com/,Juno:/juno(\.co\.uk|download\.com)/,"Digital Tunes":/digital-tunes\.net/,'zero"':/zero-inch\.com/,trackitdown:/trackitdown\.net/,whatpeopleplay:/whatpeopleplay\.com/,DJdownload:/djdownload\.com/,Minno:/soundra\.in/,Flattr:/flattr\.com/,Ganxy:/ganxy\.com/,"Getty Images":/soundcloud\.(.*-)?gettyimages\.com/}};"undefined"!=typeof e&&e.exports?e.exports=t:(window.SC=window.SC||{},window.SC.OnlineStores=t)}()},function(e,t,n){var i=n(368),s=n(378),o=n(219),a=n(229),r=n(489),l=n(259),u=n(248),c=n(222),d=n(281);e.exports=d.extend(s,r,{tagName:"a",className:"sc-button-download",ModelClass:i,requiredAttributes:["download_url"],template:function(){return l.t("Download")},renderDecorate:function(){var e=c.modify(this.model.get("download_url"),{query:{client_id:o.get("client_id")}});this.$el.attr({href:e,title:l.t("Download")})},onClick:function(){a.trigger(u.UI.DOWNLOAD_LINK_CLICKED,this.model)}})},function(e,t,n){function i(){return this.getState("selected")?c.t("Hide share options"):c.t("Share")}var s=n(378),o=n(499),a=n(489),r=n(229),l=n(503),u=n(248),c=n(259),d=n(397),h=n(281);e.exports=h.extend(s,o,a,d,{className:"sc-button-share",defaults:{icon_only:!1,responsive:!0,overlay:!0,ContentViewClass:l,contentViewOptions:{show_embed_options:!1}},states:{"overlay-opened":function(e){this.toggleState("selected",e)}},template:function(){return""},renderDecorate:function(){var e=i.call(this);this.$el.attr("title",e).html(e)},onClick:function(){this.toggleState("selected"),r.trigger(u.UI.SHARE_BUTTON_CLICKED,this.model),this.options.overlay?this.toggleOverlay():this.rerender()}})},function(e,t,n){function i(){var e,t,n,i=this.options;return t=s.call(this,i.ContentViewClass),n=a.extend({resource_id:i.resource_id,resource_type:i.resource_type},i.contentViewOptions),e=new r({togglerEl:this.el,relativeElement:this.el,Subview:t,subviewArgs:n,domId:this.domId,priorityLevel:r.PriorityLevels.HIGH})}function s(e){return e?a.isFunction(e.extend)?e:e.call(this):void 0}function o(){var e=this.subviews.overlay;e&&this.toggleState("overlay-opened",e.isOpened)}var a=n(217),r=n(500),l=n(225);e.exports=new l({applyTo:function(e){e.defaults=a.extend({el:null,ContentViewClass:null,contentViewOptions:null},e.defaults)},defaults:{contentView:null,domId:null,toggleOverlay:function(){var e=this.getOverlay();e.isOpened?e.close():e.open()},getOverlay:function(){var e=this.subviews.overlay;return e&&e.disposed&&(this.removeSubview(e),e=null),e||(e=i.call(this),e.on([r.Events.CLOSED,r.Events.OPENED].join(" "),o,this),this.addSubview(e,"overlay")),this.subviews.overlay}},before:{setup:function(){a.bindAll(this,"toggleOverlay"),this.domId=a.uniqueId("overlay-"),this.$el.attr({"aria-haspopup":"true","aria-owns":this.domId})}}})},function(e,t,n){var i=n(491),s=n(281);e.exports=s.extend(i,{css:n(501),template:n(502),className:"dialog g-overlay",defaults:{margin:11},getOverlayContentEl:function(){return this.$$("content")}})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".dialog{padding:10px}",""])},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){return'<div class="dialog__arrow g-arrow g-arrow-top"></div>\n<div class="dialog__content"></div>\n'},useData:!0})},function(e,t,n){function i(e){e.isTrigger||u.trigger(c.UI.LINK_INPUT_CLICKED,this.model),r(e.target)}function s(e){r(e.target)}function o(){this.toggleState("embed",!1).$$("linkCodeInput").click(),u.trigger(c.UI.LINK_BUTTON_CLICKED,this.model)}function a(){this.toggleState("embed",!0).$$("embedCodeInput").click(),u.trigger(c.UI.EMBED_BUTTON_CLICKED,this.model)}function r(e){e.select()}var l=n(397),u=n(229),c=n(248),d=n(281);e.exports=d.extend(l,{css:n(504),template:n(505),className:"sharePanel",requiredAttributes:["permalink_url"],events:{"click  .sharePanel__embedButton":a,"click  .sharePanel__embedCodeInput":s,"click  .sharePanel__linkButton":o,"click  .sharePanel__linkCodeInput":i},defaults:{show_embed_options:!0},states:{embed:"embedCodeVisible"},setup:function(){this.options.show_embed_options=!!this.isAudible&&this.options.show_embed_options,u.trigger(c.UI.SHARE_VIEW_OPENED,this.model)},getTemplateData:function(e){return this.options.show_embed_options&&this.isAudible&&"all"===this.model.get("embeddable_by")&&(e.embed_code=this.model.getEmbedCode()),e.share_url=this.getShareURL(),e}})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".sharePanel__header{height:32px;margin-bottom:14px}.sharePanel__embedCode,.sharePanel__header,.sharePanel__linkCode{overflow:hidden}.sharePanel.embedCodeVisible .sharePanel__embedCode,.sharePanel__linkCode{display:block}.sharePanel.embedCodeVisible .sharePanel__linkCode,.sharePanel__embedCode{display:none}.sharePanel-selection::-moz-selection{background:$mainColor;color:$mainContrastColor}.sharePanel-selection::selection{background:$mainColor;color:$mainContrastColor}",""])},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,i,s,o){return'    <div class="sc-media-right">\n      <button class="sharePanel__embedButton sc-button">'+e.escapeExpression((n(331)||t&&t.$t||i.helperMissing).call(null!=t?t:e.nullContext||{},"Embed",{name:"$t",hash:{},data:o}))+"</button>\n    </div>\n"},3:function(e,t,i,s,o){var a,r=null!=t?t:e.nullContext||{};return'<div class="sharePanel__embedCode sc-media">\n  <div class="sc-media-right">\n    <button class="sharePanel__linkActionButton sharePanel__linkButton sc-button">'+e.escapeExpression((n(331)||t&&t.$t||i.helperMissing).call(r,"Link",{name:"$t",hash:{},data:o}))+"</button>\n  </div>\n"+(null!=(a=i["if"].call(r,null!=t?t.embed_code:t,{name:"if",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o}))?a:"")+"</div>\n"},4:function(e,t,n,i,s){var o;return'  <div class="sc-media-body">\n    <input class="sharePanel__embedCodeInput g-input sharePanel-selection" type="text" readonly="readonly" value="'+e.escapeExpression((o=null!=(o=n.embed_code||(null!=t?t.embed_code:t))?o:n.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{name:"embed_code",hash:{},data:s}):o))+'"/>\n  </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,i,s,o){var a,r,l=null!=t?t:e.nullContext||{},u=i.helperMissing,c=e.escapeExpression;return'<div class="sharePanel__header">\n  <div class="sharePanel__icons sc-left">\n    '+c((n(366)||t&&t.$view||u).call(l,n(506),{name:"$view",hash:{resource_type:null!=(a=null!=t?t._options:t)?a.resource_type:a,resource_id:null!=(a=null!=t?t._options:t)?a.resource_id:a},data:o}))+'\n  </div>\n</div>\n\n<div class="sharePanel__linkCode sc-media">\n'+(null!=(a=i["if"].call(l,null!=t?t.embed_code:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?a:"")+'  <div class="sc-media-body">\n    <input id="link-code-input" class="sharePanel__linkCodeInput g-input sharePanel-selection" type="text" readonly="readonly" value="'+c((r=null!=(r=i.share_url||(null!=t?t.share_url:t))?r:u,"function"==typeof r?r.call(l,{name:"share_url",hash:{},data:o}):r))+'"/>\n  </div>\n</div>\n\n'+(null!=(a=i["if"].call(l,null!=(a=null!=t?t._options:t)?a.show_embed_options:a,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o}))?a:"")},useData:!0})},function(e,t,n){var i=n(217),s=n(507),o=n(397),a=n(281),r=n(508),l=n(514),u=n(515),c=n(516),d=n(517),h=n(518),p=n(519),f=n(520),m=[l,h,d,u],g={global:[c],china:[f],russia:[p]},v=s.isUsedLanguage("zh")?"china":s.isUsedLanguage("ru")||s.isUsedLanguage("uk")?"russia":"global";e.exports=a.extend(o,{tagName:"ul",template:n(521),css:n(522),className:"shareIcons sc-list-nostyle",getTemplateData:function(e){return i.extend(e,{icons:m.concat(g[v]).concat(r)})}})},function(e,t){var n=(navigator.userLanguage||navigator.language||"").toLowerCase(),i=n.split("-")[0];e.exports={isUsedLanguage:function(e){return i===e.toLowerCase()},isUsedLanguageAndCountry:function(e){return n===e.toLowerCase()}}},function(e,t,n){var i=n(509),s=n(222);e.exports=i.extend({defaults:{popupSize:[550,300],serviceKey:"email",serviceName:"Email",opensPopup:!1},getHref:function(){var e=this.model;return"mailto:"+s.stringify({query:{subject:encodeURIComponent(e.get("title"))+" - SoundCloud",body:e.get("permalink_url")}})}})},function(e,t,n){function i(){return{tags:a.call(this),share_url:s.call(this),share_title:o.call(this)}}function s(){var e=this.getShareURL(),t=this.options;return f.stringify({query:{utm_source:"soundcloud",utm_campaign:t.campaignName,utm_medium:t.serviceName,utm_content:e}},e)}function o(){var e=[],t=this.model.toJSON();switch(this.options.resource_type){case p.SOUND:case p.PLAYLIST:e=d.t("[[title]] by [[username]]",{title:t.title,username:t.user.username});break;case p.USER_FAVORITES:e=d.t("Liked tracks of [[username]]",{username:t.username});break;case p.USER_SOUNDS:e=d.t("Latest tracks by [[username]]",{username:t.username});break;case p.GROUP_SOUNDS:e=d.t("Tracks from [[group]]",{group:t.username})}return e}function a(){var e,t="";return this.isAudible&&(e=this.model.toJSON(),encodeURIComponent(["SoundCloud",e.user.username].concat(u.extract(e).slice(0,4)).join(","))),t}var r=n(229),l=n(510),u=n(511),c=n(248),d=n(259),h=n(397),p=n(320),f=n(222),m=n(281);e.exports=m.extend(h,{className:"shareIcon",css:n(512),template:n(513),defaults:{popupSize:null,serviceKey:null,serviceName:null,campaignName:"wtshare",opensPopup:!0},events:{"click .sc-social-logo":"onIconClick"},onIconClick:function(e){var t=this.options,n=t.popupSize;t.opensPopup&&(e.preventDefault(),l.centered(e.target.getAttribute("href"),n[0],n[1])),r.trigger(c.UI.SHARE_ICON_CLICKED,{model:this.model,shareIconType:this.options.serviceKey})},getHref:function(e){},getTemplateData:function(){var e=this.options;return{href:this.getHref(i.call(this)),key:e.serviceKey,title:d.t("Share to [[socialnetwork]]",{socialnetwork:e.serviceName})}}})},function(e,t){e.exports={centered:function(e,t,n){var i=window.screenX+(window.outerWidth-t)/2,s=window.screenY+(window.outerHeight-n)/2;return window.open(e,"",["location=1","width="+t,"height="+n,"top="+s,"left="+i,"toolbar=no","scrollbars=yes"].join(","))}}},function(e,t){e.exports={extract:function(e){var t,n,i,s=e.tag_list||"",o=e.genre||"",a=[],r="",l=!1,u=!0,c=/(\w+)\:(\w+)=(.+)/;for(o&&a.push(o),t=0,n=s.length;t<n;++t)i=s.charAt(t),'"'===i?l=!l:" "===i?l?r+=i:u===!1&&(u=!0,a.push(r),r=""):(u=!1,r+=i);return u||a.push(r),a.filter(function(e){return!c.test(e)}).map(function(e){return e.replace(/"/g,"").replace(/\s\s+/," ").trim()}).filter(Boolean)}}},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".shareIcon{display:inline-block}",""])},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){var o,a=null!=t?t:e.nullContext||{},r=n.helperMissing,l="function",u=e.escapeExpression;return'<a class="sc-social-logo sc-social-logo-32 sc-social-logo-'+u((o=null!=(o=n.key||(null!=t?t.key:t))?o:r,typeof o===l?o.call(a,{name:"key",hash:{},data:s}):o))+' sc-ir"\n   href="'+u((o=null!=(o=n.href||(null!=t?t.href:t))?o:r,typeof o===l?o.call(a,{name:"href",hash:{},data:s}):o))+'"\n   title="'+u((o=null!=(o=n.title||(null!=t?t.title:t))?o:r,typeof o===l?o.call(a,{name:"title",hash:{},data:s}):o))+'">'+u((o=null!=(o=n.title||(null!=t?t.title:t))?o:r,typeof o===l?o.call(a,{name:"title",hash:{},data:s}):o))+"</a>\n"},useData:!0})},function(e,t,n){var i=n(219),s=n(509),o=n(222);e.exports=s.extend({defaults:{popupSize:[550,300],serviceKey:"facebook",serviceName:"Facebook"},getHref:function(e){return o.stringify({query:{app_id:i.get("fb_app_id"),display:"popup",redirect_uri:encodeURI(location.protocol+"//soundcloud.com/fb_popup_callback.html"),href:e.share_url}},"https://www.facebook.com/v2.2/dialog/share")}})},function(e,t,n){var i=n(509),s=n(222);e.exports=i.extend({defaults:{popupSize:[600,600],serviceKey:"googleplus",serviceName:"Google+"},getHref:function(e){return s.stringify({query:{url:e.share_url}},"https://plus.google.com/share")}})},function(e,t,n){var i=n(381),s=n(259),o=n(509),a=n(222);e.exports=o.extend({defaults:{popupSize:[665,300],serviceKey:"pinterest",serviceName:"Pinterest"},getHref:function(e){var t=e.share_url,n=i.urlFrom(this.model.toJSON(),200),o=s.t("[[title]] on SoundCloud",{title:e.share_title});return a.stringify({query:{url:t,media:n,description:o,is_video:"true",utm_source:"soundcloud",utm_campaign:"share",utm_medium:"pinterest",utm_content:t}},"http://pinterest.com/pin/create/button/")},getTemplateData:function(){var e=o.prototype.getTemplateData.apply(this,arguments);return e.title=s.t("Pin it"),e}})},function(e,t,n){var i=n(509),s=n(222);e.exports=i.extend({defaults:{popupSize:[450,450],serviceKey:"tumblr",serviceName:"Tumblr"},getHref:function(e){return s.stringify({query:{externally_hosted_url:e.share_url,tags:e.tags}},"http://www.tumblr.com/share/audio")}})},function(e,t,n){var i=n(509),s=n(222);e.exports=i.extend({defaults:{popupSize:[700,251],serviceKey:"twitter",serviceName:"Twitter"},getHref:function(e){return s.stringify({query:{text:e.share_title+" via #soundcloud",url:e.share_url}},"http://twitter.com/share")}})},function(e,t,n){var i=n(509),s=n(222);e.exports=i.extend({defaults:{popupSize:[645,450],serviceKey:"vkontakte",serviceName:"VK"},getHref:function(e){return s.stringify({query:{url:e.share_url}},"http://vkontakte.ru/share.php")}})},function(e,t,n){var i=n(509),s=n(222);e.exports=i.extend({defaults:{popupSize:[450,450],serviceKey:"weibo",serviceName:"Weibo"},getHref:function(e){return s.stringify({query:{url:e.share_url}},"http://service.weibo.com/share/share.php")}})},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,i,s,o,a,r){var l;return'  <li class="shareIcons__icon">\n    '+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"$view",hash:{resource_type:null!=(l=null!=r[1]?r[1]._options:r[1])?l.resource_type:l,resource_id:null!=(l=null!=r[1]?r[1]._options:r[1])?l.resource_id:l},data:o}))+"\n  </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s,o,a){var r;return null!=(r=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.icons:t,{name:"each",hash:{},fn:e.program(1,s,0,o,a),inverse:e.noop,data:s}))?r:""},useData:!0,useDepths:!0})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".shareIcons__icon{float:left;margin:0 4px 0 0}",""])},function(e,t,n){function i(e){var t=e?"on":"off";d[t]("finish",r,this)[t]("play pause",a,this)}function s(){var e=d.getCurrentSound();e&&e.isPlayable()&&e.initAudio()}function o(){d.toggle(d.getCurrentSound(),{userAction:!0,view:"play-button"})}function a(){l.call(this)}function r(){this.disposed||l.call(this)}function l(){var e=d.getCurrentSound(),t=e&&e.isPlaying(),n=e&&(e.isProcessing()||!e.isPlayable()),i=t?h.t("Pause"):h.t("Play");this.toggleState("replay",!1).toggleState("playing",t).toggleState("disabled",n).$el.attr("title",i)}var u=n(217),c=n(304),d=n(234),h=n(259),p=n(397),f=n(320),m=n(281);e.exports=m.extend(p,{css:n(524),template:n(525),tagName:"button",className:"playButton",loadingTemplate:null,events:{click:o,mouseenter:s},defaults:{size:"medium"},setup:function(){i.call(this,!0),this.observedAttributes=this.observedAttributes||{},this.observedAttributes[f.SOUND]=["playable"],this.$el.toggleClass(this.options.size).attr("role","application")},dispose:function(){i.call(this,!1)},renderDecorate:function(){l.call(this),this.$el.css({color:c.getColorParams().mainColorDarker})},getTemplateData:function(){return{custom:c.getColorParams(),gradient_id:u.uniqueId("playButton__gradient")}}})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".playButton{position:relative;display:inline-block;width:43px;height:43px;margin:0;padding:0;vertical-align:middle;border:0;background:transparent}.playButton:focus{outline:1px dotted currentColor}.playButton.small{width:20px;height:20px}.playButton.disabled,.playButton:disabled{opacity:.4;cursor:default}.playButton.playing .playButton__play,.playButton__pause{display:none}.playButton.playing .playButton__pause,.playButton__play{display:block}.playButton .playButton__overlay{visibility:hidden}.playButton:focus .playButton__overlay,.playButton:hover .playButton__overlay{visibility:visible}",""])},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){var o,a,r=null!=t?t:e.nullContext||{},l=n.helperMissing,u="function",c=e.escapeExpression,d=e.lambda;return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 43 43">\n  <defs>\n    <linearGradient id="'+c((a=null!=(a=n.gradient_id||(null!=t?t.gradient_id:t))?a:l,typeof a===u?a.call(r,{name:"gradient_id",hash:{},data:s}):a))+'"\n                    x1="0%" y1="0%"\n                    x2="0%" y2="100%"\n                    spreadMethod="pad">\n      <stop offset="0%" stop-color="'+c(d(null!=(o=null!=t?t.custom:t)?o.mainColor:o,t))+'" stop-opacity="1"/>\n      <stop offset="100%" stop-color="'+c(d(null!=(o=null!=t?t.custom:t)?o.mainColorShade:o,t))+'" stop-opacity="1"/>\n    </linearGradient>\n  </defs>\n  <circle fill="url(#'+c((a=null!=(a=n.gradient_id||(null!=t?t.gradient_id:t))?a:l,typeof a===u?a.call(r,{name:"gradient_id",hash:{},data:s}):a))+')" stroke="'+c(d(null!=(o=null!=t?t.custom:t)?o.mainColorDarker:o,t))+'" cx="21.5" cy="21.5" r="21"/>\n  <circle class="playButton__overlay" fill="#000" fill-opacity="0.08" stroke="'+c(d(null!=(o=null!=t?t.custom:t)?o.mainColorDarker:o,t))+'" cx="21.5" cy="21.5" r="21"/>\n  <path class="playButton__play" fill="#fff" d="M31,21.5L17,33l2.5-11.5L17,10L31,21.5z"/>\n  <g fill="#fff" class="playButton__pause">\n    <rect x="15" y="12" width="5" height="19"/>\n    <rect x="23" y="12" width="5" height="19"/>\n  </g>\n</svg>\n'},useData:!0})},function(e,t,n){function i(){this.isSound&&a.trigger("sound:deeplink",this.el,this.model),a.trigger(c.UI.LOGO_LINK_CLICKED,this.model)}function s(){var e,t,n=this.model,i=this.isAudible&&n.isPrivate();return e=i?n.get("user").permalink_url:n.get("permalink_url"),t=i?r.t("SoundCloud"):r.t("Play on SoundCloud"),{href:e,title:t}}var o=n(217),a=n(229),r=n(259),l=n(397),u=n(363),c=n(248),d=n(281);e.exports=d.extend(u,l,{tagName:"a",css:n(527),template:n(528),className:"logo",requiredAttributes:["permalink_url"],defaults:{inverse:!1},events:{click:i},setup:function(){this.$el.toggleClass("inverse",this.options.inverse)},renderDecorate:function(){this.$el.attr(s.call(this))},getColor:function(){return this.getState("alt")?"#FF5500":"#FFFFFF"},toggleAltColor:function(){this.toggleState("alt")},getTemplateData:function(){return{gradient_id:o.uniqueId("logo_hover_")}}})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".logo,.logo:focus,.logo:hover{outline:0}",""])},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){var o,a=null!=t?t:e.nullContext||{},r=n.helperMissing,l="function",u=e.escapeExpression;return'<style type="text/css">\n  .logo {\n    display: inline-block;\n    height: 22px;\n    padding: 5px 0;\n  }\n\n  .logo__path               { fill: #999; }\n  .logo.inverse .logo__path { fill: #fff; }\n  .logo.alt     .logo__path { fill: #333; }\n  .logo:hover   .logo__path,\n  .logo:focus   .logo__path { fill: url("#'+u((o=null!=(o=n.gradient_id||(null!=t?t.gradient_id:t))?o:r,typeof o===l?o.call(a,{name:"gradient_id",hash:{},data:s}):o))+'"); }\n\n  .logo.state-small {\n    width: 25px;\n    overflow: hidden;\n  }\n</style>\n<svg xmlns="http://www.w3.org/2000/svg" width="100" height="14">\n  <defs>\n   <linearGradient id="'+u((o=null!=(o=n.gradient_id||(null!=t?t.gradient_id:t))?o:r,typeof o===l?o.call(a,{name:"gradient_id",hash:{},data:s}):o))+'"\n                   x1="0%" y1="0%"\n                   x2="0%" y2="100%"\n                   spreadMethod="pad">\n     <stop offset="0%"   stop-color="#ff7700" stop-opacity="1"/>\n     <stop offset="100%" stop-color="#ff3300" stop-opacity="1"/>\n   </linearGradient>\n  </defs>\n  <path\n    class="logo__path"\n    d="M10.517 3.742c-.323 0-.49.363-.49.582 0 0-.244 3.591-.244 4.641 0 1.602.15 2.621.15 2.621 0 .222.261.401.584.401.321 0 .519-.179.519-.401 0 0 .398-1.038.398-2.639 0-1.837-.153-4.127-.284-4.592-.112-.395-.313-.613-.633-.613zm-1.996.268c-.323 0-.49.363-.49.582 0 0-.244 3.322-.244 4.372 0 1.602.119 2.621.119 2.621 0 .222.26.401.584.401.321 0 .581-.179.581-.401 0 0 .081-1.007.081-2.608 0-1.837-.206-4.386-.206-4.386 0-.218-.104-.581-.425-.581zm-2.021 1.729c-.324 0-.49.362-.49.582 0 0-.272 1.594-.272 2.644 0 1.602.179 2.559.179 2.559 0 .222.229.463.552.463.321 0 .519-.241.519-.463 0 0 .19-.944.19-2.546 0-1.837-.253-2.657-.253-2.657 0-.22-.104-.582-.425-.582zm-2.046-.358c-.323 0-.49.363-.49.582 0 0-.162 1.92-.162 2.97 0 1.602.069 2.496.069 2.496 0 .222.26.557.584.557.321 0 .581-.304.581-.526 0 0 .143-.936.143-2.538 0-1.837-.206-2.96-.206-2.96 0-.218-.198-.581-.519-.581zm-2.169 1.482c-.272 0-.232.218-.232.218v3.982s-.04.335.232.335c.351 0 .716-.832.716-2.348 0-1.245-.436-2.187-.716-2.187zm18.715-.976c-.289 0-.567.042-.832.116-.417-2.266-2.806-3.989-5.263-3.989-1.127 0-2.095.705-2.931 1.316v8.16s0 .484.5.484h8.526c1.655 0 3-1.55 3-3.155 0-1.607-1.346-2.932-3-2.932zm10.17.857c-1.077-.253-1.368-.389-1.368-.815 0-.3.242-.611.97-.611.621 0 1.106.253 1.542.699l.981-.951c-.641-.669-1.417-1.067-2.474-1.067-1.339 0-2.425.757-2.425 1.99 0 1.338.873 1.736 2.124 2.026 1.281.291 1.513.486 1.513.923 0 .514-.379.738-1.184.738-.65 0-1.26-.223-1.736-.777l-.98.873c.514.757 1.504 1.232 2.639 1.232 1.853 0 2.668-.873 2.668-2.163 0-1.477-1.193-1.845-2.27-2.097zm6.803-2.745c-1.853 0-2.949 1.435-2.949 3.502s1.096 3.501 2.949 3.501c1.852 0 2.949-1.434 2.949-3.501s-1.096-3.502-2.949-3.502zm0 5.655c-1.097 0-1.553-.941-1.553-2.153 0-1.213.456-2.153 1.553-2.153 1.096 0 1.551.94 1.551 2.153.001 1.213-.454 2.153-1.551 2.153zm8.939-1.736c0 1.086-.533 1.756-1.396 1.756-.864 0-1.388-.689-1.388-1.775v-3.897h-1.358v3.916c0 1.978 1.106 3.084 2.746 3.084 1.726 0 2.754-1.136 2.754-3.103v-3.897h-1.358v3.916zm8.142-.89l.019 1.485c-.087-.174-.31-.515-.475-.768l-2.703-3.692h-1.362v6.894h1.401v-2.988l-.02-1.484c.088.175.311.514.475.767l2.79 3.705h1.213v-6.894h-1.339v2.975zm5.895-2.923h-2.124v6.791h2.027c1.746 0 3.474-1.01 3.474-3.395 0-2.484-1.437-3.396-3.377-3.396zm-.097 5.472h-.67v-4.152h.719c1.436 0 2.028.688 2.028 2.076 0 1.242-.651 2.076-2.077 2.076zm7.909-4.229c.611 0 1 .271 1.242.737l1.26-.582c-.426-.883-1.202-1.503-2.483-1.503-1.775 0-3.016 1.435-3.016 3.502 0 2.143 1.191 3.501 2.968 3.501 1.232 0 2.047-.572 2.513-1.533l-1.145-.68c-.358.602-.718.864-1.329.864-1.019 0-1.611-.932-1.611-2.153-.001-1.261.583-2.153 1.601-2.153zm5.17-1.192h-1.359v6.791h4.083v-1.338h-2.724v-5.453zm6.396-.157c-1.854 0-2.949 1.435-2.949 3.502s1.095 3.501 2.949 3.501c1.853 0 2.95-1.434 2.95-3.501s-1.097-3.502-2.95-3.502zm0 5.655c-1.097 0-1.553-.941-1.553-2.153 0-1.213.456-2.153 1.553-2.153 1.095 0 1.55.94 1.55 2.153.001 1.213-.454 2.153-1.55 2.153zm8.557-1.736c0 1.086-.532 1.756-1.396 1.756-.864 0-1.388-.689-1.388-1.775v-3.794h-1.358v3.813c0 1.978 1.106 3.084 2.746 3.084 1.726 0 2.755-1.136 2.755-3.103v-3.794h-1.36v3.813zm5.449-3.907h-2.318v6.978h2.211c1.908 0 3.789-1.037 3.789-3.489 0-2.552-1.565-3.489-3.682-3.489zm-.108 5.623h-.729v-4.266h.783c1.565 0 2.21.706 2.21 2.133.001 1.276-.707 2.133-2.264 2.133z"/>\n </svg>\n'},useData:!0})},,,,,,function(e,t,n){function i(e,t,n){function i(){clearTimeout(a),clearTimeout(o)}function s(){e()&&(i(),n())}var o=this.addDeferred(setTimeout(i,t)),a=this.addDeferred(setInterval(s,r));s()}var s=n(229),o=n(225),a=n(248),r=50,l=1e4,u=window.performance&&window.performance.timing,c="fetchStart",d=!0;e.exports=new o(u?{defaults:{performanceSelector:null},after:{render:function(){var e,t,n;d&&(d=!1,(e=this.performanceSelector)&&(t=function(){return this.$(e).length}.bind(this),n=function(){var e=Date.now()-u[c];s.trigger(a.APP.LOAD,{latency:e})},i.call(this,t,l,n)))}}}:{})},,,,,function(e,t,n){(function(t){function i(){var e=this.subviews.teaser,t=d.getCurrentSound();e||(e=new h({resource_id:t.resource_id,resource_type:t.resource_type,hasCountDown:this.teaserHasCountDown}),e.on(h.Events.DISMISS,s,this),e.on(h.Events.DOWNLOAD_CLICK,o,this),e.render(),this.addSubview(e,"teaser"),this.$$("teaser").append(e.el))}function s(){this.toggleTeaserView(!1),this.onTeaserDismiss()}function o(){u.trigger(p.UI.UPSELL_CTA_BUTTON_CLICKED,this.model)}function a(){var e=this.subviews.visualAudible;this._hideTeaserTimeoutId&&clearTimeout(this._hideTeaserTimeoutId),i.call(this),e&&(e.toggleBackgroundState(!0),e.toggleState("onlyArtwork",!0)),this.$el.toggleClass("teaserVisible",!0)}function r(){var e=this.subviews.visualAudible,t=this.subviews.teaser;t&&(e&&(e.toggleBackgroundState(!1),t.scaleUpArtwork(Math.max(this.$el.height()-e.$el.height(),0))),this._hideTeaserTimeoutId=this.addDeferred(setTimeout(function(){e&&e.toggleState("onlyArtwork",!1),t._dispose(),this.removeSubview(t),this.$el.toggleClass("teaserVisible",!1)}.bind(this),this.TEASER_TRANSITION_DURATION)))}var l=n(310),u=n(229),c=n(225),d=n(234),h=n(540),p=n(248),f=!1;e.exports=new c({TEASER_TRANSITION_DURATION:200,defaults:{onTeaserDismiss:t.noop,teaserHasCountDown:!1},toggleTeaserView:function(e){e?this.teaserCanBeDisplayed()&&(a.call(this),f=!0):r.call(this)},teaserCanBeDisplayed:function(){return!l.isMobile&&!f},createTeaserView:i})}).call(t,n(1))},function(e,t,n){function i(){return s()&&(y.isiOS||y.isAndroid)}function s(){return y.isMobile}function o(e){return w.soundRequiresUpsell(e)}function a(){if(this.options.hasCountDown&&(this._leftSecondsToClose=N,r.call(this)),o(this.model)){var e=u();_.trackImpression({page_name:e.page_name,impression_name:e.impression,impression_object:e.tCodeURN,impression_category:e.category})}this.el.focus(),this.toggleState("visible",!0)}function r(){this.disposed||(this._leftSecondsToClose-=1,this.$$("countdown").text(this._leftSecondsToClose),this._leftSecondsToClose>0?setTimeout(r.bind(this),1e3):h.call(this))}function l(e){var t=u();_.trackClickV1({page_name:t.pageName,click_category:t.category,click_name:["clickthrough",t.impression].join("::"),click_object:t.tCodeURN})}function u(){return{impression:"consumer_sub_upgrade",pageName:"consumer-premium:main",category:"consumer_subs",tCodeURN:"soundcloud:tcode:3003"}}function c(){this.trigger(R.DOWNLOAD_CLICK,this,{ios:this.getState("ios"),android:this.getState("android")})}function d(e){e.target===e.currentTarget&&h.call(this)}function h(){this.trigger(R.DISMISS,this)}function p(e){return v()?m.call(this,e):f.call(this,e)}function f(e){var t=162,n=this.$el.width(),i=e&&e===T.SMALL,s=i?3:10,o=65,a=n>450,r=Math.max(s,t/20),l=20+(a?t:0),u=r+o+10;a&&this.$$("artwork").removeClass("g-all-transitions-200").css({top:1,left:1,width:t,height:t}),this.$$("text").css({top:r,left:l,right:a?50:2*l}),this.toggleState("state-small"),this.$$("button_container").css({left:l,top:u})}function m(e){var t=e&&e===T.SMALL,n=t?15:35,i=t?10:30,s=t?10:40,o=t?15:20,a=100,r=this.$$("text").height(),l=this.$$("button_container").height(),u=this.$el.width(),c=this.$el.height(),d=u-2*s,h=Math.min(d,c-n-i-l-r-3*o),p=(c-h)/2,f=p,m=h>=a,g=Math.max(n,p-o-r),v=f-o-l-c/20;m?this.$$("artwork").removeClass("g-all-transitions-200").css({top:p,left:s,right:s,bottom:f}):(g+=h/2+o,v+=h/2),v=Math.abs(v),this.toggleState("artworkHidden",!m),this.$$("text").css({top:g,left:s,right:s}),this.$$("button_container").css({left:s,right:s,bottom:v}),this.$$("timer").css({right:5,bottom:3})}function g(e){this.$$("artwork").addClass("g-all-transitions-200").css({top:0,left:0,right:0,bottom:e||0})}function v(){return x.get("widgetParams").visual}var _=n(358),b=n(368),x=n(219),w=n(483),y=n(310),k=n(363),S=n(259),T=n(321),C=n(281),P=n(541),E="https://app.adjust.com/4mv2c5?adgroup=__browser_locale__&creative=var_a",I=E+"&campaign=player",A=E+"&campaign=player_widget",D="market://details?id=com.soundcloud.android&referrer=utm_source%3Dsoundcloud%26Dutm_medium%3Dwidget",M=D+"%26utm_campaign%3Dwidget_upsell",L=D+"%26utm_campaign%3Dplayer_widget",$="https://soundcloud.com/go",R={DISMISS:"teaser:dismiss",DOWNLOAD_CLICK:"teaser:download-click"},N=15;e.exports=C.extend(k,{template:n(542),css:n(543),ModelClass:b,className:"teaser",attributes:{tabindex:"0"},defaults:{hasCountDown:!1},_leftSecondsToClose:0,events:{"click .teaser__dismiss":h,click:d,"click .teaser__button":c,"click .consubUpsell":l},requiredAttributes:["title"],setup:function(){this.toggleState("mobile",s()).toggleState(y.isiOS?"ios":"android",i()&&!o(this.model)).toggleState("nonVisual",!v())},renderDecorate:function(){this.whenInserted().done(a.bind(this))},onWindowSizeChange:p,scaleUpArtwork:g,getTemplateData:function(e){var t=this.model,n=v()?M:L,a=v()?I:A,r=i()?y.isiOS?a:n:o(t)?$:e.permalink_url;
return e.consubUpsell=o(t),e.consubButtonSize=v()?"sc-button-large":"sc-button sc-button-medium",e.consubButtonText=s()?S.t("Hear full track"):S.t("Try it free for 30 days"),e.link=r.replace("__browser_locale__",S.getBrowserPrimaryLocale()),e.hasCountDown=this.options.hasCountDown,e.locale=S.getLocale(),e.isMobile=s(),e.downloadAppText=y.isiOS?S.t("Download on the App Store"):S.t("Get in on Google Play"),e.upsellMarkup=S.t("Explore more music & audio like [[[title]]] on SoundCloud.",{title:P({title:e.title,link:r})}),e}},{Events:R})},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){var o,a=null!=t?t:e.nullContext||{},r=n.helperMissing,l="function",u=e.escapeExpression;return'<span class="teaser__trackTitle sc-truncate sc-font-light">\n  <a href="'+u((o=null!=(o=n.link||(null!=t?t.link:t))?o:r,typeof o===l?o.call(a,{name:"link",hash:{},data:s}):o))+'" class="teaser__trackLink">'+u((o=null!=(o=n.title||(null!=t?t.title:t))?o:r,typeof o===l?o.call(a,{name:"title",hash:{},data:s}):o))+"</a>\n</span>\n"},useData:!0})},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,i,s,o){var a=null!=t?t:e.nullContext||{},r=i.helperMissing,l=e.escapeExpression;return'    <h2 class="sc-font-light sc-truncate">'+l((n(331)||t&&t.$t||r).call(a,"Upgrade to SoundCloud Go+",{name:"$t",hash:{},data:o}))+'</h2>\n    <h2 class="teaser__consubUpsellText sc-font-light sc-text-light">'+l((n(331)||t&&t.$t||r).call(a,"Get our expanded catalog, with offline listening and no ads.",{name:"$t",hash:{},data:o}))+"</h2>\n"},3:function(e,t,n,i,s){var o,a;return'    <h2 class="sc-font-light sc-truncate">'+(null!=(a=null!=(a=n.upsellMarkup||(null!=t?t.upsellMarkup:t))?a:n.helperMissing,o="function"==typeof a?a.call(null!=t?t:e.nullContext||{},{name:"upsellMarkup",hash:{},data:s}):a)?o:"")+"</h2>\n"},5:function(e,t,i,s,o){var a,r,l=null!=t?t:e.nullContext||{},u=i.helperMissing,c="function",d=e.escapeExpression;return'  <div class="teaser__button_container">\n    <a class="teaser__button consubUpsell hearmore sc-button-cta '+d((r=null!=(r=i.consubButtonSize||(null!=t?t.consubButtonSize:t))?r:u,typeof r===c?r.call(l,{name:"consubButtonSize",hash:{},data:o}):r))+'" href="'+d((r=null!=(r=i.link||(null!=t?t.link:t))?r:u,typeof r===c?r.call(l,{name:"link",hash:{},data:o}):r))+'">'+d((r=null!=(r=i.consubButtonText||(null!=t?t.consubButtonText:t))?r:u,typeof r===c?r.call(l,{name:"consubButtonText",hash:{},data:o}):r))+'</a>\n    <div class="teaser__restrictions">\n      '+(null!=(a=(n(331)||t&&t.$t||u).call(l,"[[[spanStart]]]Restrictions apply - [[[spanEnd]]] [[[linkStart]]]See details to learn more[[[linkEnd]]]",{name:"$t",hash:{linkEnd:"</a>",linkStart:'<a class="sc-font-light sc-link-medium" href="https://soundcloud.com/go" target="_blank">',spanEnd:"</span>",spanStart:'<span class="sc-font-light sc-text-light">'},data:o}))?a:"")+"\n    </div>\n  </div>\n"},7:function(e,t,n,i,s){var o;return null!=(o=n["if"].call(null!=t?t:e.nullContext||{},null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.program(10,s,0),data:s}))?o:""},8:function(e,t,n,i,s){var o,a=null!=t?t:e.nullContext||{},r=n.helperMissing,l="function",u=e.escapeExpression;return'    <div class="teaser__button_container">\n      <a class="teaser__button '+u((o=null!=(o=n.locale||(null!=t?t.locale:t))?o:r,typeof o===l?o.call(a,{name:"locale",hash:{},data:s}):o))+'" href="'+u((o=null!=(o=n.link||(null!=t?t.link:t))?o:r,typeof o===l?o.call(a,{name:"link",hash:{},data:s}):o))+'" title="'+u((o=null!=(o=n.downloadAppText||(null!=t?t.downloadAppText:t))?o:r,typeof o===l?o.call(a,{name:"downloadAppText",hash:{},data:s}):o))+'"><span class="sc-visuallyhidden">'+u((o=null!=(o=n.downloadAppText||(null!=t?t.downloadAppText:t))?o:r,typeof o===l?o.call(a,{name:"downloadAppText",hash:{},data:s}):o))+"</span></a>\n    </div>\n"},10:function(e,t,i,s,o){var a,r,l=null!=t?t:e.nullContext||{},u=i.helperMissing,c="function",d=e.escapeExpression;return'    <div class="teaser__button_container">\n      <a class="teaser__button hearmore '+d((r=null!=(r=i.locale||(null!=t?t.locale:t))?r:u,typeof r===c?r.call(l,{name:"locale",hash:{},data:o}):r))+' sc-link-white" href="'+d((r=null!=(r=i.link||(null!=t?t.link:t))?r:u,typeof r===c?r.call(l,{name:"link",hash:{},data:o}):r))+'">\n        <div class="hearmore__container">\n          <div class="hearmore__left">\n            <div class="hearmore__logo"></div>\n          </div>\n          <div class="hearmore__right">\n'+(null!=(a=(n(331)||t&&t.$t||u).call(l,{name:"$t",hash:{_comment:"Teaser button text"},fn:e.program(11,o,0),inverse:e.noop,data:o}))?a:"")+"          </div>\n        </div>\n      </a>\n    </div>\n"},11:function(e,t,n,i,s){return"              Hear more on<br/>SoundCloud\n"},13:function(e,t,n,i,s){return"Close"},15:function(e,t,i,s,o){var a;return'  <div class="teaser__timer sc-font-light sc-truncate">'+(null!=(a=(n(331)||t&&t.$t||i.helperMissing).call(null!=t?t:e.nullContext||{},"Back to track in [[[seconds]]]",{name:"$t",hash:{seconds:"<span class='teaser__countdown'></span>"},data:o}))?a:"")+" &hellip; </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,s,o){var a,r,l=null!=t?t:e.nullContext||{},u=i.helperMissing,c=e.escapeExpression;return'<div class="teaser__text">\n'+(null!=(a=i["if"].call(l,null!=t?t.consubUpsell:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o}))?a:"")+"</div>\n\n"+(null!=(a=i["if"].call(l,null!=t?t.consubUpsell:t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.program(7,o,0),data:o}))?a:"")+'\n<button class="teaser__dismiss" type="button"\n        aria-label="'+(null!=(a=(n(331)||t&&t.$t||u).call(l,{name:"$t",hash:{_comment:"Label that is read out for screen readers to close a popup window"},fn:e.program(13,o,0),inverse:e.noop,data:o}))?a:"")+'">\n</button>\n'+(null!=(a=i["if"].call(l,null!=t?t.hasCountDown:t,{name:"if",hash:{},fn:e.program(15,o,0),inverse:e.noop,data:o}))?a:"")+'<div class="teaser__artwork">\n  <a href="'+c((r=null!=(r=i.link||(null!=t?t.link:t))?r:u,"function"==typeof r?r.call(l,{name:"link",hash:{},data:o}):r))+'">'+c((n(366)||t&&t.$view||u).call(l,n(380),{name:"$view",hash:{size:500,stretch:!0,resource_type:null!=t?t._resource_type:t,resource_id:null!=t?t._resource_id:t},data:o}))+"</a>\n</div>\n"},useData:!0})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".teaser{position:relative;width:100%;height:100%;background:hsla(0,0%,100%,.9);z-index:10}.teaser>*{visibility:hidden}.teaser.visible>*{visibility:visible}.teaser__artwork,.teaser__button_container,.teaser__text,.teaser__timer{position:absolute}.teaser.artworkHidden .teaser__artwork{display:none}.teaser__text>h2{margin:3px auto 0;text-align:center}.teaser.nonVisual .teaser__text>h2{margin:3px 0 0;text-align:left;padding-right:60px}.teaser__trackTitle{font-size:24px;display:block}.teaser.state-medium .teaser__text>h2,.teaser.state-small .teaser__text>h2{font-size:14px}.teaser.state-medium .teaser__trackTitle,.teaser.state-small .teaser__trackTitle{font-size:18px}.teaser__text>.teaser__consubUpsellText{width:295px;margin-bottom:20px}.teaser.nonVisual .teaser__consubUpsellText{width:350px}.teaser__dismiss{position:absolute;top:15px;right:15px;width:29px;height:29px;cursor:pointer;background:url("+n(544)+") 50% no-repeat;background-size:29px 29px;border-style:none}.teaser__button{display:block;height:57px;overflow:hidden;margin:0 auto}.teaser__button.consubUpsell{height:auto}.mobile .teaser__button.consubUpsell{max-width:134px}.teaser__restrictions{padding-top:8px;text-align:center}.teaser__button.hearmore{width:204px;background-color:#f50;border-radius:4px}.teaser__button.hearmore .hearmore__container{margin:8px 10px;height:41px}.teaser__button.hearmore .hearmore__container .hearmore__left{width:30%;display:inline-block;height:100%;border-right:1px solid #da3318}.teaser__button.hearmore .hearmore__container .hearmore__right{width:70%;float:right;height:100%;text-align:left;padding-left:10px;font-weight:100;font-size:14px}.teaser__button.hearmore .hearmore__container .hearmore__left .hearmore__logo{background:url("+n(545)+") 50% no-repeat;background-size:48px 24px;width:48px;height:24px;margin-top:9px}.teaser.android .teaser__button{background:url("+n(546)+") no-repeat 50% 50%;background-size:165px 57px;width:165px}.teaser.ios .teaser__button{background:url("+n(547)+") no-repeat 50% 50%;background-size:193px 57px;width:193px}.teaser__trackLink,.teaser__trackLink:visited{color:#333}.teaser__trackLink:active,.teaser__trackLink:focus,.teaser__trackLink:hover{color:#666}.teaser.ios .teaser__button.es{background-image:url("+n(548)+")}.teaser.android .teaser__button.es{background-image:url("+n(549)+")}.teaser.ios .teaser__button.pt_BR{background-image:url("+n(550)+")}.teaser.android .teaser__button.pt_BR{background-image:url("+n(551)+")}.teaser.ios .teaser__button.ar{background-image:url("+n(552)+")}.teaser.android .teaser__button.ar{background-image:url("+n(553)+")}.teaser.ios .teaser__button.fr{background-image:url("+n(554)+")}.teaser.android .teaser__button.fr{background-image:url("+n(555)+")}.teaser.ios .teaser__button.id{background-image:url("+n(556)+")}.teaser.android .teaser__button.id{background-image:url("+n(557)+")}.teaser.ios .teaser__button.it{background-image:url("+n(558)+")}.teaser.android .teaser__button.it{background-image:url("+n(559)+")}.teaser.ios .teaser__button.ja{background-image:url("+n(560)+")}.teaser.android .teaser__button.ja{background-image:url("+n(561)+")}.teaser.ios .teaser__button.ko{background-image:url("+n(562)+")}.teaser.android .teaser__button.ko{background-image:url("+n(563)+")}.teaser.ios .teaser__button.nl{background-image:url("+n(564)+")}.teaser.android .teaser__button.nl{background-image:url("+n(565)+")}.teaser.ios .teaser__button.ru{background-image:url("+n(566)+")}.teaser.android .teaser__button.ru{background-image:url("+n(567)+")}.teaser.ios .teaser__button.th{background-image:url("+n(568)+")}.teaser.android .teaser__button.th{background-image:url("+n(569)+")}.teaser.ios .teaser__button.zh{background-image:url("+n(570)+")}.teaser.android .teaser__button.zh{background-image:url("+n(571)+")}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx),(min-resolution:192dpi){.teaser__dismiss{background-image:url("+n(572)+")}.teaser__button.hearmore .hearmore__container .hearmore__left .hearmore__logo{background-image:url("+n(573)+")}.teaser.android .teaser__button{background-image:url("+n(574)+")}.teaser.ios .teaser__button{background-image:url("+n(575)+")}.teaser.ios .teaser__button.es{background-image:url("+n(576)+")}.teaser.android .teaser__button.es{background-image:url("+n(577)+")}.teaser.ios .teaser__button.pt_BR{background-image:url("+n(578)+")}.teaser.android .teaser__button.pt_BR{background-image:url("+n(579)+")}.teaser.ios .teaser__button.ar{background-image:url("+n(580)+")}.teaser.android .teaser__button.ar{background-image:url("+n(581)+")}.teaser.ios .teaser__button.fr{background-image:url("+n(582)+")}.teaser.android .teaser__button.fr{background-image:url("+n(583)+")}.teaser.ios .teaser__button.id{background-image:url("+n(584)+")}.teaser.android .teaser__button.id{background-image:url("+n(585)+")}.teaser.ios .teaser__button.it{background-image:url("+n(586)+")}.teaser.android .teaser__button.it{background-image:url("+n(587)+")}.teaser.ios .teaser__button.ja{background-image:url("+n(588)+")}.teaser.android .teaser__button.ja{background-image:url("+n(589)+")}.teaser.ios .teaser__button.ko{background-image:url("+n(590)+")}.teaser.android .teaser__button.ko{background-image:url("+n(591)+")}.teaser.ios .teaser__button.nl{background-image:url("+n(592)+")}.teaser.android .teaser__button.nl{background-image:url("+n(593)+")}.teaser.ios .teaser__button.ru{background-image:url("+n(594)+")}.teaser.android .teaser__button.ru{background-image:url("+n(595)+")}.teaser.ios .teaser__button.th{background-image:url("+n(596)+")}.teaser.android .teaser__button.th{background-image:url("+n(597)+")}.teaser.ios .teaser__button.zh{background-image:url("+n(570)+")}.teaser.android .teaser__button.zh{background-image:url("+n(598)+")}}",""])},function(e,t,n){e.exports=n.p+"assets/images/dismiss_button_29x29-192fb0.png"},function(e,t,n){e.exports=n.p+"assets/images/sc_white_48x24-91ac8a.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/en/google_165x57-13e2df.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/en/apple_193x57-a054fd.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/es/apple_192x57-2c9788.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/es/google_165x57-5ecd8f.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/pt_BR/apple_192x57-75ceb2.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/pt_BR/google_165x57-ae2214.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ar/apple_193x57-f7d654.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ar/google_165x57-e4ee45.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/fr/apple_193x57-76f3dc.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/fr/google_165x57-2ebfee.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/id/apple_193x57-cd12b6.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/id/google_165x57-32f55d.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/it/apple_193x57-a9bbfc.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/it/google_165x57-4a1f72.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ja/apple_193x57-5a42d5.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ja/google_165x57-6bd1f6.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ko/apple_193x57-91e123.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ko/google_165x57-5262c3.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/nl/apple_193x57-d0fb45.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/nl/google_165x57-aaf637.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ru/apple_192x57-e47b15.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ru/google_165x57-d5f1ac.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/th/apple_192x57-ea61ba.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/th/google_165x57-53606e.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/zh/apple_192x57-b6b48a.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/zh/google_165x57-646464.png"},function(e,t,n){e.exports=n.p+"assets/images/dismiss_button_58x58-1f7d15.png"},function(e,t,n){e.exports=n.p+"assets/images/sc_white_96x48-0bff02.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/en/google_330x114-d3b569.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/en/apple_385x114-c9cebf.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/es/apple_385x114-b67199.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/es/google_330x114-213dc9.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/pt_BR/apple_385x114-affd0b.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/pt_BR/google_330x114-d49670.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ar/apple_385x114-dbbbfd.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ar/google_330x114-6db486.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/fr/apple_385x114-1063bc.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/fr/google_330x114-b403a6.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/id/apple_385x114-a6ce73.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/id/google_330x114-0943e8.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/it/apple_385x114-2717cc.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/it/google_330x114-2198d8.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ja/apple_385x114-a8664f.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ja/google_330x114-5e77fb.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ko/apple_385x114-0410ab.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ko/google_330x114-df76bc.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/nl/apple_385x114-08312b.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/nl/google_330x114-49294b.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ru/apple_385x114-3c0578.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/ru/google_330x114-6f769c.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/th/apple_385x114-736861.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/th/google_330x114-e67070.png"},function(e,t,n){e.exports=n.p+"assets/images/badges/zh/google_330x114-506221.png"},,,,,,,,,,,,,,,,function(e,t,n){(function(t){function i(){var e=this.collection||this.model;return e.isPopulated()&&(!this.collection||this.collection.length||this.collection.isFullyPopulated())?b.resolve():this.collection?s(this.collection):this.fetchData(this.model)}function s(e,t){return e.fetch({add:!!t}).then(function(){if(0===e.length&&!e.isFullyPopulated())return s(e,!0)})}function o(){var e=u.call(this),t=h.get("widgetParams");return e instanceof c&&!e.isEmbeddable()?void r(e):(v.setSource(e).setCursor(t.start_track),!t.auto_play||d.isMobileSafari||d.isAndroid||v.play(v.getCurrentSound()),void p.trigger("widget:ready"))}function a(e){var t=this.getFetchErrorMessage(e);t&&l(t)}function r(e){var t,n=e.get("permalink_url");t="playlist"===e.resource_type&&!e.isPrivate()&&n?m.t('This playlist can’t be played outside of SoundCloud <br><a href="[[url]]">Play on SoundCloud</a>',{url:n}):"playlist"===e.resource_type?m.t("This playlist can’t be played outside of SoundCloud"):"playlist"!==e.resource_type&&!e.isPrivate()&&n?m.t('This track can’t be played outside of SoundCloud <br><a href="[[url]]">Play on SoundCloud</a>',{url:n}):m.t("This track can’t be played outside of SoundCloud"),l(t)}function l(e){f.raise({fatal:!0,message:e})}function u(){return this.collection||this.model}var c=n(338),d=n(310),h=n(219),p=n(229),f=n(313),m=n(259),g=n(225),v=n(234),_=n(363),b=n(253);e.exports=new g({applyTo:function(e){_.applyTo(e)},defaults:{getFetchErrorMessage:t.noop},after:{setup:function(){var e=u.call(this);v.setSource(e),i.call(this).done(o.bind(this)).fail(a.bind(this))}}})}).call(t,n(1))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i=n(311),s=n(534),o=n(337),a=n(281),r=n(614);e.exports=a.extend(r,s,{ModelClass:o,performanceSelector:".playButton",SoundView:null,css:n(646),className:"singleSound g-box-full",template:function(){return""},defaults:{resource_id:null,resource_type:null,secret_token:null},setup:function(){var e=this.options.secret_token;e&&this.model.set({secret_token:e,sharing:"private"})},renderDecorate:function(){var e=this.subviews.sound;e||(e=this.addSubview(new this.SoundView(this.options),"sound")),this.$el.empty().append(e.render().el)},getFetchErrorMessage:function(){return i.SOUND_NOT_FOUND}})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".singleSound{border-radius:3px;overflow:hidden}",""])},,,,function(e,t,n){var i=n(651),s=n(645);e.exports=s.extend({SoundView:i})},function(e,t,n){function i(e){e=e?"on":"off",g[e]("play",s,this)[e]("pause",o,this)[e]("change:current",a,this)}function s(){return h.call(this)?(this.model.areRelatedSoundsEnabled()&&(u.call(this),this.toggleState("related",!1)),void this.toggleState("teaser",!1)):void f.call(this,!1)}function o(e){return h.call(this)?void(this.teaserCanBeDisplayed()&&this.model.isTeaserEnabled()?(this.toggleState("teaser",!0),e.isEnded()&&(this.showRelatedAfterTeaser=!0)):this.model.areRelatedSoundsEnabled()&&this.toggleState("related",!0)):void f.call(this,!0)}function a(e){var t=e.current,n=e.prev;t&&r.call(this,t),n&&n.seek(0)}function r(e){var t,n=this.subviews.visualAudible;n&&n.model.id===e.id||(t=l(e),this.removeSubview(n),this.addSubview(t.render(),"visualAudible"),t.whenInserted().done(function(){t.$el.removeClass("animate"),this.addDeferred(setTimeout(n._dispose.bind(n),1e3))}.bind(this)),t.$el.addClass("animate g-transition-transform").appendTo(this.$$("sound")),this.toggleState("related",!1))}function l(e){return new y({resource_id:e.resource_id,resource_type:e.resource_type})}function u(){var e,t=this.subviews.relatedSounds;t||(t=new _({resource_id:this.model.id}),t.render(),this.addSubview(t,"relatedSounds"),e=t.collection,e.fetch().done(c.bind(this,e))),this.$$("related").append(t.el)}function c(e){var t=new v({resource_id:this.model.resource_id,own_sounds:e.hasOwnSounds});this.$$("related").prepend(t.render().el)}function d(e){var t,n,i,s;e&&(u.call(this),this.toggleState("teaser",!1)),t=this.subviews.relatedSounds,i=t&&t.collection,f.call(this,e),e&&(n=g.getCurrentSound(),i&&n&&(s=i.models.slice(0,i.indexOf(n)+1),s.forEach(t.removeListItem.bind(t))),t.getLength()||t.rerender()),this.toggleState("relatedVisible",e)}function h(){return this.getWindowHeight()>130}function p(e){e&&this.toggleState("related",!1),this.toggleTeaserView(e)}function f(e){var t=this.subviews.visualAudible;t&&t.toggleBackgroundState(e)}var m=n(539),g=n(234),v=n(652),_=n(466),b=n(363),x=n(337),w=n(281),y=n(360);e.exports=w.extend(m,b,{className:"visualSoundContainer g-box-full",css:n(654),template:n(655),ModelClass:x,showRelatedAfterTeaser:!1,states:{related:d,teaser:p},setup:function(){i.call(this,!0)},dispose:function(){i.call(this,!1)},onTeaserDismiss:function(){this.showRelatedAfterTeaser&&this.model.areRelatedSoundsEnabled()&&this.addDeferred(setTimeout(function(){this.toggleState("related",!0),this.showRelatedAfterTeaser=!1}.bind(this),1.5*this.TEASER_TRANSITION_DURATION))}})},function(e,t,n){var i=n(337),s=n(281);e.exports=s.extend({template:n(653),className:"relatedSoundsTitle sc-truncate sc-text-verylight",ModelClass:i,requiredAttributes:["user","title","permalink_url"],defaults:{own_sounds:!1},getTemplateData:function(e){var t={isOwnSounds:this.options.own_sounds};return this.options.own_sounds?(t.link=e.user.permalink_url,t.text=e.user.username):(t.link=e.permalink_url,t.text=e.title),t}})},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({1:function(e,t,n,i,s){var o;return(null!=(o=n["if"].call(null!=t?t:e.nullContext||{},null!=t?t.isContinuousPlayEnabled:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(5,s,0),data:s}))?o:"")+"\n"},2:function(e,t,i,s,o){var a;return null!=(a=(n(331)||t&&t.$t||i.helperMissing).call(null!=t?t:e.nullContext||{},{name:"$t",hash:{text:null!=t?t.text:t,link:null!=t?t.link:t},fn:e.program(3,o,0),inverse:e.noop,data:o}))?a:""},3:function(e,t,n,i,s){return'      Play more tracks by <a class="sc-link-white" href="[[link]]">[[text]]</a>\n'},5:function(e,t,i,s,o){var a;return null!=(a=(n(331)||t&&t.$t||i.helperMissing).call(null!=t?t:e.nullContext||{},{name:"$t",hash:{text:null!=t?t.text:t,link:null!=t?t.link:t},fn:e.program(6,o,0),inverse:e.noop,data:o}))?a:""},6:function(e,t,n,i,s){return'      Play another track by <a class="sc-link-white" href="[[link]]">[[text]]</a>\n'},8:function(e,t,i,s,o){var a;return null!=(a=(n(331)||t&&t.$t||i.helperMissing).call(null!=t?t:e.nullContext||{},{name:"$t",hash:{text:null!=t?t.text:t,link:null!=t?t.link:t},fn:e.program(9,o,0),inverse:e.noop,data:o}))?a:""},9:function(e,t,n,i,s){return'    Play more tracks like <a class="sc-link-white" href="[[link]]">[[text]]</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,s){var o;return null!=(o=n["if"].call(null!=t?t:e.nullContext||{},null!=t?t.isOwnSounds:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(8,s,0),data:s}))?o:""},useData:!0})},function(e,t,n){t=e.exports=n(4)(),t.push([e.id,".visualSoundContainer{position:fixed;top:0;left:0}.visualSoundContainer__sound>.visualAudible{position:absolute;top:0;left:0;-webkit-transform:translateZ(0)}.visualSoundContainer__sound>.visualAudible.animate{-webkit-transform:translate3d(100%,0,0)}.visualSoundContainer__teaser{position:absolute;right:0;bottom:0;left:0;top:0;opacity:0;pointer-events:none}.visualSoundContainer.teaserVisible .visualSoundContainer__teaser{opacity:1;pointer-events:auto}.visualSoundContainer__related{position:absolute;right:0;bottom:0;left:0;padding:30px 12px;transform:translate3d(0,100%,0)}.visualSoundContainer .visualAudible__waveform{bottom:30px}.visualSoundContainer__related>.relatedSoundsTitle{margin-bottom:5px}.visualSoundContainer.relatedVisible .visualSoundContainer__related{transform:translateZ(0);z-index:1}.visualSoundContainer .adContainer{position:absolute;right:0;left:0;top:0;bottom:0;transform:translate3d(0,100%,0);visibility:hidden}.visualSoundContainer .adContainer>*{visibility:visible}.visualSoundContainer.adState .adContainer{transform:translateZ(0)}",""])},function(e,t,n){var i=n(285);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,i,s,o){return'<div class="visualSoundContainer__sound">\n  '+e.escapeExpression((n(366)||t&&t.$view||i.helperMissing).call(null!=t?t:e.nullContext||{},n(360),{name:"$view",hash:{key:"visualAudible",resource_type:null!=t?t._resource_type:t,resource_id:null!=t?t._resource_id:t},data:o}))+'\n</div>\n<div class="visualSoundContainer__related g-transition-transform"></div>\n<div class="visualSoundContainer__teaser g-transition-opacity"></div>\n'},useData:!0})}]));